---
id: include
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALToolbox:phone-number-validation.yml
  - docassemble.ALToolbox:al_income.yml
  - docassemble.VTSharedYMLFile:VTSharedYMLFile.yml
  - VTFinAffSelfEmplPart.yml
---
id: all_courts object
objects:
  - all_courts: ALCourtLoader.using(file_name='docassemble.VTSharedYMLFile:data/sources/courts_list_full.xlsx')
---
id: modules
modules:
  - .al_income_move
  - docassemble.demo.accordion
---
id: trial_court_index
code: |
  trial_court_index = all_courts.matching_courts_in_county(county_name=user_selected_county,search_columns=['division_abbr'],search_string="Family")[0][0]
---
id: users and jobs objects
objects:
  - users: ALPeopleList.using(ask_number=True,target_number=1)
  - jobs: ALItemizedJobList.using(complete_attribute="complete", ask_number=True)
---
id: jobs[i].to_add object
objects:
  - jobs[i].to_add: ALItemizedValueDict.using(complete_attribute="complete", there_are_any=True)
---
comment: |
  Global interview metadata
metadata:
  al_weaver_version: "1.7.0"
  generated on: "2022-08-19"
  title: >-
    Financial Affidavit 813A
  short title: >-
    Form 813A
  description: |-
    Financial Affidavit 813A for Vermont family courts. Based on Vermont Judiciary paper form 400-813A (6/2023).
  original_form: >-
    https://www.vermontjudiciary.org/media/886
  help_page_url: >-
    https://vtlawhelp.org/cfp/fill-out-form-813a-financial-affidavit-income-and-expenses
  help_page_title: >-
    Fill Out Form 813A - Financial Affidavit: Income and Expenses
  authors:
    - VTCourtForms guided interview by Legal Services Vermont / VTLawHelp.org website
    - Authored by Legal Services Vermont
  categories:
    - "FA-00-00-00-00"
    - "HO-00-00-00-00"
    - "MO-00-00-00-00"
  typical role: "plaintiff"
  generate download screen: True
---
id: customized feedback form
code: |   
  feedback_form = "docassemble.VTFeedback:VTfeedback.yml"
---
id: main_interview_key
code: |
  interview_metadata['main_interview_key'] =  'VT_fee_813'
---
id: github_repo_name
code: |
  github_repo_name =  'docassemble-VT813 '
---
id: correct last-updated date
#this will correct the last-updated date that gets shown on About This Form page
code: |
  res = github_modified_date(github_user, "docassemble-VT813")
  if res:
    package_updated_on = res.format('yyyy-MM-dd')
  else:
    package_updated_on = None  
---
id: interview_short_title
code: |
  interview_short_title = "Fill out Financial Affidavit form 400-00813A"
---
id: existing_case
code: |
  al_form_type = "existing_case" 
---
############Code below to allow Edit my answers to be clicked in Menu or in side nav#########
---
reconsider: True
code: |
  al_menu_items_tmp = [
    {"url": url_ask(['al_start_over_confirmation','al_start_over']),
    "label": "Start over"
    },
    {
      "url": url_ask(['al_exit_logout_confirmation', 'al_exit_logout']),
      "label": "Exit and delete my answers"
    },
  ]
  if al_enable_incomplete_downloads:
    al_menu_items_tmp.append({
        "url": url_action('al_error_action_download_screen'), 
        "label": "Download current progress"
    })
  
  # Answer set feature is behind a server-wide configuration option
  if get_config('assembly line',{}).get('enable answer sets'):
    al_menu_items_tmp.extend([
    {"url": url_ask(["al_sessions_snapshot_label", {"recompute": ["al_sessions_save_session_snapshot"]}, "al_sessions_save_status"]),
    "label": "Save answer set"
    },
    action_menu_item("Load answer set", "al_load_saved_session"),
  ]
  )
  
  if get_config('assembly line',{}).get('enable answer set imports'):
    al_menu_items_tmp.append(
      {"url": url_ask(["al_sessions_json_file", {"recompute": ["al_sessions_import_json"]}, "al_sessions_load_status"]),
      "label": "Import answer set"
      }
    )
  al_menu_items_tmp.append(
    {
      "url": url_action('edit_answers_screen'),
      "label": "Edit my answers"
      
    }
  )
    
  al_menu_items = al_menu_items_tmp
  del al_menu_items_tmp
---
---
event: edit_answers_screen
id: edit answers screen
question: |
  Edit your answers
subquestion: |
  ${ action_button_html(url_action('review_VT_813'), label='<i class="fa-solid fa-pencil"></i> Edit your answers', color='info') }
  
  Remember to come back to this screen to continue.
continue button field: VT_fee_waiver_preview_question
---
---
id: sections
sections:
  - intro: Is this tool right for you
  - about_you: About you
  - other_party: The other party
  - children: About kids
  - case_info: Your court case
  - your_income: Your income
  - your_loans: Your loans
  - your_debts: Your debts
  - your_expenses: Your expenses
  - review_VT_813: <i class="fa-solid fa-pencil"></i> <u>Edit your answers</u>
  - sign: Sign your document
  - get_docs: Download your document
progressive: False
---
id: This adds the signature feature to the interview
code: |
  signature_fields = ['users[0].signature']
---
#################### INTERVIEW ORDER #####################
---
comment: |
  Controls order and branching logic for questions specific to this form
id: interview_order_VT_813
code: |
  
  nav.set_section('intro')
  set_progress(5)

  VT_813A_intro
  important_notes_to_user
  
  nav.set_section('about_you')
  set_progress(10)
  
  users.gather()
  users[0].address.address
  users[0].daytime_phone_number
  users[0].email
  users[0].birthdate
  
  nav.set_section('other_party')
  set_progress(15)
  #collect other party info
  other_parties[0].name.first
  other_parties[0].birthdate
  
  nav.set_section('children')
  set_progress(20)
  
  shared_children.gather()
  children_income.gathered
  other_children.gather()
  for child in supported_children:
    child.name.first
  
  nav.set_section('case_info')
  set_progress(30)
  user_ask_role
  docket_number
  user_selected_county
  if defined("user_selected_county"):
    trial_court.address.county
  
  nav.set_section('your_income')
  set_progress(40)
  income_intro_screen
  
  if len(public_benefits) > 0:
    public_benefits.review_items
  set_progress(42)


  jobs_order

  if rental_income:
    has_schedule_e or monthly_rental_income
  
  set_progress(48)
  if len(other_incomes) > 0:
    other_incomes.review_items
  

  
  nav.set_section('your_loans')
  loan_intro_screen
  set_progress(50)

  if real_estate_user_owned:
    if real_estate_owned["user_owns_home_re"] == True:
      if len(primary_residence_loans) > 0:
        primary_residence_loans.review_items
    else:
      primary_residence_loans.there_are_any = False
    if real_estate_owned["user_owns_other_re"] == True:
      if len(real_estate_loans) > 0:
        real_estate_loans.review_items
    else:
      real_estate_loans.there_are_any = False
  else:
    primary_residence_loans.there_are_any = False
    real_estate_loans.there_are_any = False
  primary_residence_loans.total_monthly_self_payment
  real_estate_loans.total_monthly_self_payment
  
  set_progress(55)
  if len(vehicle_loans) > 0:
    vehicle_loans.review_items
  vehicle_loans.total_monthly_self_payment
  set_progress(57)
  if len(other_loans) > 0:
    other_loans.review_items
  other_loans.total_monthly_self_payment
  
  
  nav.set_section('your_debts')
  set_progress(60)
  if len(credit_card_debt) > 0:
    credit_card_debt.review_items
  credit_card_debt.total_monthly_self_payment
  set_progress(65)
  if len(other_debt) > 0:
    other_debt.review_items

  nav.set_section('your_expenses')
  set_progress(70)
  expenses_intro_screen
  
  if len(shared_children) > 0:
    total_monthly_childcare_costs
    extraordinary_expenses
  if len(children_expenses) > 0:
    children_expenses.review_items

  set_progress(74)
      
  if len(household_expenses) > 0:
    household_expenses.review_items
  household_expenses.total_monthly_self_payment
  set_progress(76)
  if len(vehicle_expenses) > 0:
    vehicle_expenses.review_items
  vehicle_expenses.total_monthly_self_payment
  set_progress(77)
  if len(insurance_expenses) > 0:
    insurance_expenses.review_items
  set_progress(78)
  if len(personal_expenses) > 0:
    personal_expenses.review_items
  set_progress(79)
  wait_while_form_is_generated
  
      

  set_progress(80)
  interview_order_VT_813 = True

---
code: |
  if employed:
    if is_self_employed:
      if has_schedule_c:
        self_employed_net_income
        self_employed_estimated_taxes_paid_feds
      else:
        net_income_order
        self_employed_expenses_monthly_amount
        self_employed_net_income_monthly_amount
        self_employed_estimated_taxes_paid_feds
    if len(jobs) > 0:
      review_jobs
      healthcare_available 
      set_progress(44)    
      paystub_instructions
  single_jobs_attribute
  jobs_order = True
---
###################### MAIN INTERVIEW ORDER ######################
id: interview order main
comment: |
  This block includes the logic for standalone interviews.
  Delete mandatory: True to include in another interview
mandatory: True
code: |
  al_intro_screen
  interview_order_VT_813
  if employed and is_self_employed and not has_schedule_c:
    al_expense_lists
  nav.set_section('review_VT_813')  
  set_progress(90)
  if defined("user_selected_county"):
    trial_court.address.county
  VT_813A_preview_question
  

  nav.set_section('sign')
  signature_date
  set_progress(95)
  al_form_requires_digital_signature = False
  basic_questions_signature_flow
  
    # Store anonymous data for analytics / statistics
  store_variables_snapshot(
      persistent=True,
      data={
          "zip": showifdef("users[0].address.zip"),
          "county_where_filing": showifdef("trial_court.address.county"),
          "gets_public_benefits": showifdef("public_benefits.sources"),
          "employed": showifdef("employed"),
          "reached_interview_end": True,
          "num_forms": len(al_user_bundle.enabled_documents()),
      },
  )
  nav.set_section('get_docs')
  set_progress(100)
  if defined("user_selected_county"):
    trial_court.address.county
  VT_813A_download
---
id: other_parties object
objects:
  - other_parties: ALPeopleList.using(complete_attribute='name.first',ask_number=True,target_number=1)
---
sets:
  - other_parties[0].name.first
  - other_parties[0].name.last
  - other_parties[0].name.middle
  - other_parties[0].name.suffix
id: names of opposing parties
question: |
  Name of the other party in this court case
fields:
  - code: |
      other_parties[0].name_fields(person_or_business='person')
  - Date of birth: other_parties[0].birthdate
    datatype: BirthDate
---
#################### CHILDREN ####################
---
id: shared_children object
objects:
  - shared_children: ALPeopleList.using(complete_attribute='complete')
---
id: other_children object
objects:
  - other_children: ALPeopleList.using(complete_attribute='complete')
---
id: supported_children object
objects:
  - supported_children: ALPeopleList.using(auto_gather=False)
---
objects:
  - shared_children[i].income: ALIncomeList.using(complete_attribute='complete',there_is_another=False)
---
objects:
  - children_income: ALIncomeList.using(auto_gather=False)
---
id: address_choices object
objects:
  - address_choices: DAList.using(auto_gather=False)
---
id: address_choices code to add users address
code: |
  address_choices.clear()

  address_choices.append(users[0].address)
  if len(users.complete_elements()) > 1 and defined('users[1].address') and users[1].address.normalize() != users[0].address.normalize:
    address_choices.append(users[1].address)
  address_choices.gathered = True
---
id: shared children complete
code: |
  shared_children[i].income.gather()
  shared_children[i].complete = True
---
code: |
  for child in shared_children:
    for income in child.income:
      children_income.append(income)
      children_income[-1].name = child.name
      if not defined('children_income.parents'):
        children_income.parents = income.parent
      elif income.parent not in children_income.parents:
        children_income.parents = children_income.parents + " & " + income.parent 
  children_income.gathered = True
---
id: other children complete
code: |
  other_children[i].name.first
  other_children[i].complete = True
---
id: are there shared children
question: Minor children with ${ other_parties[0].name.full() }
fields:
  - Do you have children under 18 years old with ${ other_parties[0].name.full() }?: shared_children.there_are_any
    datatype: yesnoradio
---
sets:
  - shared_children[i].name.first
  - shared_children[i].name.middle
  - shared_children[i].name.last
  - shared_children[i].name.suffix
id: shared children
question: ${ title_case(ordinal(i)) } child with ${ other_parties[0].name.full() }
fields:
  - code: |
      shared_children[i].name_fields(person_or_business='person')
  - Date of birth: shared_children[i].birthdate
    datatype: BirthDate
  - Their address: shared_children[i].address
    datatype: object_radio
    choices: address_choices
    none of the above: A different address
    default: users[0].address
    disable others:
      - shared_children[i].address.address
      - shared_children[i].address.unit
      - shared_children[i].address.city
      - shared_children[i].address.state
      - shared_children[i].address.zip
  - Street address: shared_children[i].address.address
    required: False
    address autocomplete: True
  - Apartment: shared_children[i].address.unit
    required: False
  - City: shared_children[i].address.city
    required: False
  - State: shared_children[i].address.state
    required: False
    code: states_list()
  - Zip: shared_children[i].address.zip
    required: False
  - Are you ordered to pay child support for this child?: shared_children[i].child_support
    datatype: yesnoradio
  - Amount you are ordered to pay each month for this child: shared_children[i].child_support_amount
    datatype: currency
    show if: shared_children[i].child_support
  - note: |
      If you pay one amount for more than one child, you can divide that total amount by the number of children.
    show if: shared_children[i].child_support
  - Amount you currently pay each month for this child: shared_children[i].child_support_paid
    datatype: currency
    show if: shared_children[i].child_support
  - State of order: shared_children[i].child_support_state
    show if: shared_children[i].child_support
    code: states_list()
  - County of order:  shared_children[i].child_support_county
    code: sorted(all_courts.unique_column_values('branch') - {"Environmental", "Judicial Bureau"} )
    show if:
      variable: shared_children[i].child_support_state
      is: "VT"
  - Does this child receive any income?: shared_children[i].income.selected_types
    datatype: checkboxes
    code: |
      children_income_ordered
  - Add another child?: shared_children.there_is_another
    datatype: yesnoradio
validation code: |
  if shared_children[i].age_in_years() >= 19:
    validation_error("Check the birthdate you entered. This child is too old to be a 'minor.'",field="shared_children[i].birthdate")
---
sets:
  - shared_children[i].name.first
  - shared_children[i].name.middle
  - shared_children[i].name.last
  - shared_children[i].name.suffix
id: shared children for review screen only
question: ${ title_case(ordinal(i)) } child with ${ other_parties[0].name.full() }
fields:
  - code: |
      shared_children[i].name_fields(person_or_business='person')
  - Date of birth: shared_children[i].birthdate
    datatype: BirthDate
  - Their address: shared_children[i].address
    datatype: object_radio
    choices: address_choices
    none of the above: A different address
    default: users[0].address
    disable others:
      - shared_children[i].address.address
      - shared_children[i].address.unit
      - shared_children[i].address.city
      - shared_children[i].address.state
      - shared_children[i].address.zip
  - Street address: shared_children[i].address.address
    required: False
    address autocomplete: True
  - Apartment: shared_children[i].address.unit
    required: False
  - City: shared_children[i].address.city
    required: False
  - State: shared_children[i].address.state
    required: False
    code: states_list()
  - Zip: shared_children[i].address.zip
    required: False
  - Are you ordered to pay child support for this child?: shared_children[i].child_support
    datatype: yesnoradio
  - Amount you are ordered to pay each month for this child: shared_children[i].child_support_amount
    datatype: currency
    show if: shared_children[i].child_support
  - note: |
      If you pay one amount for more than one child, you can divide that total amount by the number of children.
    show if: shared_children[i].child_support
  - Amount you currently pay each month for this child: shared_children[i].child_support_paid
    datatype: currency
    show if: shared_children[i].child_support
  - State of order: shared_children[i].child_support_state
    show if: shared_children[i].child_support
    code: states_list()
  - County of order:  shared_children[i].child_support_county
    code: sorted(all_courts.unique_column_values('branch') - {"Environmental", "Judicial Bureau"} )
    show if:
      variable: shared_children[i].child_support_state
      is: "VT"
continue button field: shared_children[i].revisit
validation code: |
  if shared_children[i].child_support == False:
    invalidate('shared_children[i].child_support_amount','shared_children[i].child_support_paid','shared_children[i].child_support_state')
---
id: children income
variable name: shared_children[i].income.terms_ordered
data: !!omap
  - disability: "Disability benefits"
  - social security: "Social Security benefits"
  - other: "Other"
---
id: children income ordered object for checkboxes
objects:
  - children_income_ordered: DAOrderedDict.using(elements=shared_children[i].income.terms_ordered, auto_gather=False, gathered=True)
---
id: children income info for list
#generic object: ALIncomeList
reconsider: shared_children[i].income[j].display_name
question: |
  Tell us about ${ shared_children[i].income[j].display_name} for ${ shared_children[i].name.full() } 
subquestion: |
  % if j > 1:
  You have already told us about your benefits from ${ comma_and_list(shared_children_income.display_name for shared_children_income in shared_children[i].income.complete_elements()) }.
  % endif
fields:
  - Source of income: shared_children[i].income[j].source
    input type: dropdown
    code: |
      children_income_ordered
  - What type of income?: shared_children[i].income[j].source_other
    maxlength: 14
    show if:
      variable: shared_children[i].income[j].source
      is: other
  - Times per year you receive this income: shared_children[i].income[j].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_list
  - Amount of income: shared_children[i].income[j].value
    datatype: currency
  - Name of Parent who receives the child's benefit: shared_children[i].income[j].parent
    datatype: radio
    choices:
      - ${ users[0].name }
      - ${ other_parties[0].name }
validation code: |
  if shared_children[i].income[j].source != "other":
    shared_children[i].income[j].display_name = shared_children[i].income.terms_ordered.get(shared_children[i].income[j].source, shared_children[i].income[j].source)
  else:
    shared_children[i].income[j].display_name = shared_children[i].income[j].source_other
---
id: children income set display name
code: |
  if defined('shared_children[i].income[j].source') and shared_children[i].income[j].source != "other":
    shared_children[i].income[j].display_name = shared_children[i].income.terms_ordered.get(shared_children[i].income[j].source, shared_children[i].income[j].source)
  elif defined('shared_children[i].income[j].source') and shared_children[i].income[j].source == "other" and defined('shared_children[i].income[j].source_other'):
    shared_children[i].income[j].display_name = shared_children[i].income[j].source_other
  else:
    shared_children[i].income[j].display_name = shared_children_income_other_display
---
id: children income other display
comment: |
  This keeps the text that may be changed near the top of the public benefits section.
  Used in:
  Tell us about ______
code: |
  shared_children_income_other_display = "another source of income"
---
sets:
  - other_children[i].name.first
  - other_children[i].name.middle
  - other_children[i].name.last
  - other_children[i].name.suffix
id: other children
question: ${ title_case(ordinal(i)) } child whom you provide support
fields:
  - code: |
      other_children[i].name_fields(person_or_business='person')
  - Date of birth: other_children[i].birthdate
    datatype: BirthDate
  - Their address: other_children[i].address
    datatype: object_radio
    choices: address_choices
    none of the above: A different address
    default: users[0].address
    disable others:
      - other_children[i].address.address
      - other_children[i].address.unit
      - other_children[i].address.city
      - other_children[i].address.state
      - other_children[i].address.zip
  - Street address: other_children[i].address.address
    required: False
    address autocomplete: True
  - Apartment: other_children[i].address.unit
    required: False
  - City: other_children[i].address.city
    required: False
  - State: other_children[i].address.state
    required: False
    code: states_list()
  - Zip: other_children[i].address.zip
    required: False
  - What is your relationship to this child?: other_children[i].relationship
    required: False
  - Are you ordered to pay child support for this child?: other_children[i].child_support
    datatype: yesnoradio
  - Amount you are ordered to pay each month for this child: other_children[i].child_support_amount
    datatype: currency
    show if: other_children[i].child_support
  - note: |
      If you pay one amount for more than one child, you can divide that total amount by the number of children.
    show if: other_children[i].child_support
  - Amount you currently pay each month for this child: other_children[i].child_support_paid
    datatype: currency
    show if: other_children[i].child_support
  - State of Order: other_children[i].child_support_state
    show if: other_children[i].child_support
    code: states_list()
  - County of Order:  other_children[i].child_support_county
    code: sorted(all_courts.unique_column_values('branch') - {"Environmental", "Judicial Bureau"} )
    show if:
      variable: other_children[i].child_support_state
      is: "VT"
continue button field: other_children[i].revisit
---
sets:
  - other_children[i].name.first
  - other_children[i].name.middle
  - other_children[i].name.last
  - other_children[i].name.suffix
id: other children
question: ${ title_case(ordinal(i)) } child whom you provide support
fields:
  - code: |
      other_children[i].name_fields(person_or_business='person')
  - Date of birth: other_children[i].birthdate
    datatype: BirthDate
  - Their address: other_children[i].address
    datatype: object_radio
    choices: address_choices
    none of the above: A different address
    default: users[0].address
    disable others:
      - other_children[i].address.address
      - other_children[i].address.unit
      - other_children[i].address.city
      - other_children[i].address.state
      - other_children[i].address.zip
  - Street address: other_children[i].address.address
    required: False
    address autocomplete: True
  - Apartment: other_children[i].address.unit
    required: False
  - City: other_children[i].address.city
    required: False
  - State: other_children[i].address.state
    required: False
    code: states_list()
  - Zip: other_children[i].address.zip
    required: False
  - What is your relationship to this child?: other_children[i].relationship
    required: False
  - Are you ordered to pay child support for this child?: other_children[i].child_support
    datatype: yesnoradio
  - Amount you are ordered to pay each month for this child: other_children[i].child_support_amount
    datatype: currency
    show if: other_children[i].child_support
  - note: |
      If you pay one amount for more than one child, you can divide that total amount by the number of children.
    show if: other_children[i].child_support
  - Amount you currently pay each month for this child: other_children[i].child_support_paid
    datatype: currency
    show if: other_children[i].child_support
  - State of Order: other_children[i].child_support_state
    show if: other_children[i].child_support
    code: states_list()
  - County of Order:  other_children[i].child_support_county
    code: sorted(all_courts.unique_column_values('branch') - {"Environmental", "Judicial Bureau"} )
    show if:
      variable: other_children[i].child_support_state
      is: "VT"
  - Add another child?: other_children.there_is_another
    datatype: yesnoradio
---
id: are there other children
question: Other minor children
fields:
  - Do you have other children under age 18 for whom you provide support?: other_children.there_are_any
    datatype: yesnoradio
  - note: |
      Examples: A step-child – or a child with another person – who you pay child support for or spend money on their daily needs.
---
depends on:
  - shared_children
  - other_children
code: |
  supported_children.clear()
  child_support_shared = 0
  child_support_other_self_paid = 0
  child_support_other_other_paid = 0
  child_support_other_total = 0
  for child in shared_children:
    if child.child_support:
      supported_children.append(child)
      child_support_shared += child.child_support_paid
  for child in other_children:
    if child.child_support:
      supported_children.append(child)
      child_support_other_self_paid += child.child_support_paid
      child_support_other_other_paid += child.child_support_amount - child.child_support_paid
      child_support_other_total += child.child_support_amount
      
  supported_children.gathered = True
---
reconsider: supported_children.gathered
id: shared_children.revisit
continue button field: shared_children.revisit
question: |
  Edit info about your shared children
subquestion: |
  ${ shared_children.table }

  ${ shared_children.add_action() }

  The child support you pay for your shared children is ${ child_support_shared }.
---
reconsider: supported_children.gathered
id: other_children.revisit
continue button field: other_children.revisit
question: |
  Edit info about other children you support
subquestion: |
  ${ other_children.table }

  ${ other_children.add_action() }
---
id: shared_children.table
table: shared_children.table
rows: shared_children
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Birthdate: |
      row_item.birthdate if defined("row_item.birthdate") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Child gets income: |
      "Yes" if len(row_item.income) > 0 else "No"
  - Child support you are ordered to pay: |
      currency(row_item.child_support_amount) if defined("row_item.child_support_amount") else "$0"
edit:
  - revisit
  - income.revisit
confirm: True  
---
id: other_children.table
table: other_children.table
rows: other_children
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Birthdate: |
      row_item.birthdate if defined("row_item.birthdate") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Child support you are ordered to pay: |
      currency(row_item.child_support_amount) if defined("row_item.child_support_amount") else "$0"
edit:
  - revisit
confirm: True  
---
continue button field: shared_children[i].income.revisit
question: |
  Edit info about the income of ${ shared_children[i].name }
subquestion: |
  ${ shared_children[i].income.table }

  ${ shared_children[i].income.add_action() }

---
generic object: ALPeopleList
id: shared_children income table
table: shared_children[i].income.table
rows: shared_children[i].income
columns:
  - Name: |
      row_item.display_name
  - Income per month: |
      currency(row_item.total(times_per_year=12))
  - Parent who receives the income: |
      row_item.parent

edit:
  - value
  - children_income.gathered
confirm: True  
---
id: income intro screen
continue button field: income_intro_screen
question: |
  Income
subquestion: |
  Now we'll review any income you get.
---
################################# PUBLIC BENEFITS ##############################
comment: |
  --Notes on how a list is gathered, using public_benefits as an example--
  
  Interview calls public_benefits.gather

  Gather looks for .there_are_any

  there_any_any asks for x.selected_types

  if any selected types,
   move_check_to_lists
     This creates a number of elements in the list, and deletes 'source' if other, (which may set 'source' to the default, like 'vehicle')
     also sets .moved for the list
     
  there_are_any is set to true

  will then look for complete

  check_for_others will set source

  complete calls for attribute (value for public_benefits) for information question
  
  information question calls display name (with reconsider to keep it fresh)
  
  answering the question sets display_name fresh with new source_other with validation code

  complete sets display  
---
id: public_benefits terms_ordered
variable name: public_benefits.terms_ordered
data: !!omap
  - 3squaresvt: "3SquaresVT / Food assistance"
  - dynasaur: "Dr. Dynasaur"
  - fuel_assist: "Fuel Assistance"
  - ga: "General Assistance (GA)"
  - housing_assist: "Housing assistance (subsidy/voucher/Section 8)"
  - medicaid: "Medicaid"
  - medicare: "Medicare"
  - reach_up: "Reach Up"  
  - ssi: "SSI (Supplemental Security Income)" 
  - vhap: "VHAP"
---
id: public_benefits other display
comment: |
  This keeps the text that may be changed near the top of the public benefits section.
  Used in:
  Tell us about ______
code: |
  public_benefits_other_display = "another benefit that provides you income"
---
id: public_benefits object
objects:
  - public_benefits: ALIncomeList.using(complete_attribute='complete',there_is_another=False)
---
id: public_benefits ordered object for checkboxes
objects:
  - public_benefits_ordered: DAOrderedDict.using(elements=public_benefits.terms_ordered, auto_gather=False, gathered=True)
---
id: selected types sets there_are_any
generic object: ALIncomeList
code: |
  if x.selected_types.any_true():
    x.move_checks_to_list(selected_terms=x.terms_ordered)
    x.there_are_any = True
  else:
    x.there_are_any = False
---
id: selected types sets there_are_any
generic object: ALIncomeList
code: |
  if not len(shared_children) > 0 and not len(other_children) > 0:
    children_expenses.there_are_any = False
---
id: are there public benefits
#public_benefits
question: |
  Do you get public assistance?
subquestion: |
  Do you get any of these benefits?
  
  Check any that apply to you.
fields:
  - no label: public_benefits.selected_types
    datatype: checkboxes
    code: |
      public_benefits_ordered
  - note: |
      If you get SSDI, we will ask about that income later.
---
id: ALIncome complete
generic object: ALIncome
code: |
  x.value
  x.complete = True
---
id: public benefits info for list
#generic object: ALIncomeList
reconsider: public_benefits[i].display_name
question: |
  Tell us about ${ public_benefits[i].display_name }
subquestion: |
  % if i > 1:
  You have already told us about your benefits from ${ comma_and_list(public_benefit.display_name for public_benefit in public_benefits.complete_elements()) }.
  % elif i > 0:
  You have already told us about your benefits from ${ comma_and_list(public_benefit.display_name for public_benefit in public_benefits.complete_elements()) }.
  % endif
fields:
  - Source of income: public_benefits[i].source
    input type: dropdown
    code: |
      public_benefits_ordered
  - What type of income?: public_benefits[i].source_other
    maxlength: 14
    show if:
      variable: public_benefits[i].source
      is: other
  - Times per year you receive this income: public_benefits[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_list
    js hide if: |
      val("public_benefits[i].source") === "medicaid" || val("public_benefits[i].source") === "medicare" || val("public_benefits[i].source") === "dynasaur" 
  - Amount of income: public_benefits[i].value
    datatype: currency
    js hide if: |
      val("public_benefits[i].source") === "medicaid" || val("public_benefits[i].source") === "medicare" || val("public_benefits[i].source") === "dynasaur" 
validation code: |
  if public_benefits[i].source != "other":
    public_benefits[i].display_name = public_benefits.terms_ordered.get(public_benefits[i].source, public_benefits[i].source)
  else:
    public_benefits[i].display_name = public_benefits[i].source_other
---
if: public_benefits[i].source in ["medicaid","medicare","dynasaur"]
code: |
  public_benefits[i].value = 0
  public_benefits[i].times_per_year = 0
---
id: public_benefits set display name
code: |
  if defined('public_benefits[i].source') and public_benefits[i].source != "other":
    public_benefits[i].display_name = public_benefits.terms_ordered.get(public_benefits[i].source, public_benefits[i].source)
  elif defined('public_benefits[i].source') and public_benefits[i].source == "other" and defined('public_benefits[i].source_other'):
    public_benefits[i].display_name = public_benefits[i].source_other
  else:
    public_benefits[i].display_name = public_benefits_other_display
---
id: want to add more public benefits
question: Do you want to list any more public assistance?
subquestion: |
  Tap Next if you don't have more to add.
  
  ${ public_benefits_table }
  
  ${ public_benefits.add_action() }
continue button field: public_benefits.review_items
---
id: public_benefits revisit
continue button field: public_benefits.revisit
question: |
  Edit public assistance
subquestion: |
  ${ public_benefits_table }

  ${ public_benefits.add_action() }
---
id: public_benefits table
table: public_benefits_table
rows: public_benefits
columns:
  - Source: |
      row_item.display_name if defined("row_item.source") else ""
  - Public assistance per month: |
      "Varies. Exact amount not needed for form." if row_item.source in ["medicaid","medicare","dynasaur"] else currency(row_item.total(times_per_year=12))
edit:
  - source
  - value
---
################################# OTHER INCOMES ##############################
---
id: other_incomes.terms_ordered
variable name: other_incomes.terms_ordered
data: !!omap
  - pension: "Retirement/pension"
  - unemployment income: "Unemployment benefits"
  - worker comp: "Workers compensation and/or disability insurance (SSDI)"
  - social security: "Social Security benefits"
  - veteran: "Veteran's benefits (VA)"
  - interest: "Interest or dividend income"
  - trust: "Trust or annuity income"
  - gift: "Gifts or prize money (include lottery winnings)"
  - alimony: |
      Spousal Maintenance (Alimony) from ${ other_parties[0].name_full() }
  - alimony other: |
      Spousal Maintenance (Alimony) from a person other than ${ other_parties[0].name_full() }
  - other: "Other"
---
variable name: help_text
data: !!omap
  - unemployment income help: "Enter gross amount of unemployment income — before taxes were taken out."
  - default: " "
---
id: other income display default
## This keeps the text that may be changed near the top of the public benefits section.
code: |
  other_incomes_other_display = "other source of income"
---
id: other_incomes
objects:
  - other_incomes: ALIncomeList.using(complete_attribute='complete',there_is_another=False)
---
id: other_incomes_ordered
objects:
  - other_incomes_ordered: DAOrderedDict.using(elements=other_incomes.terms_ordered, auto_gather=False, gathered=True)
---
comment: |
  will use id: ALIncomeList there are any to set other_incomes.there_are_any
---
id: are there other incomes
#other_incomes
question: |
  Do you have other sources of income?
subquestion: |
  Check any that apply to you.
  
  Do not include employment income.
fields:
  - no label: other_incomes.selected_types
    datatype: checkboxes
    code: |
      other_incomes_ordered
---
comment: |
  will use id: ALIncome complete to set other_incomes[i].complete
---
id: other income info for list
#generic object: ALIncomeList
reconsider: other_incomes[i].display_name
question: |
  Tell us about your ${ other_incomes[i].display_name.lower() }
subquestion: |
  % if i > 1:
  You have already told us about your incomes from ${ comma_and_list(other_income.display_name for other_income in other_incomes.complete_elements()) }.
  % elif i > 0:
  You have already told us about your income from ${ comma_and_list(other_income.display_name for other_income in other_incomes.complete_elements()) }.
  % endif

  % if rental_income:
  You have already told us about your rental income.
  % endif
fields:
  - Source of income: other_incomes[i].source
    input type: dropdown
    code: |
      other_incomes_ordered
  - What type of income?: other_incomes[i].source_other
    show if:
      variable: other_incomes[i].source
      is: other
  - Specify Type: other_incomes[i].source_other
    show if:
      variable: other_incomes[i].source
      is: social security
  - Times per year you receive this income: other_incomes[i].times_per_year
    input type: radio
    code: |
      times_per_year_list
    default: 12
  - Amount of income: other_incomes[i].value
    datatype: currency
  - note: |
      ${ help_text['unemployment income help'] }
    show if:
      variable: other_incomes[i].source
      is: unemployment income
validation code: |
  if other_incomes[i].source != "other":
    other_incomes[i].display_name = other_incomes.terms_ordered.get(other_incomes[i].source, other_incomes[i].source)
  else:
    other_incomes[i].display_name = other_incomes[i].source_other
---
id: rental_expenses.terms_ordered
variable name: rental_expenses.terms_ordered
data: !!omap
  - cleaning: "Cleaning and maintenance"
  - commissions: "Commissions"
  - insurance: "Insurance"
  - legal: "Legal and other professional fees"
  - mortgage: "Mortgage interest paid to banks"
  - other_interest: "Other interest"
  - repairs: "Repairs"
  - supplies: "Supplies"
  - taxes: "Taxes"
  - utilities: "Utilities"
  - wages: "Wages and salaries"
  - depreciation: "Depreciation expense"
  - other: "Other"
---
id: annual_rental_income revisit
continue button field: annual_rental_income_revisit
question: Edit annual rental income
fields:
  - Annual rent received: annual_rental_income
    datatype: currency
---
id: rental income and expenses
question: |
  Rental income worksheet
fields:
  - Annual rent received: annual_rental_income
    datatype: currency
  - What expenses did you have for your rental business?: rental_expenses.selected_types
    datatype: checkboxes
    code: |
      rental_expenses_ordered
---
id: rental expenses object
objects:
  - rental_expenses: ALExpenseList.using(complete_attribute='complete',there_is_another=False)
---
id: rental expenses object
objects:
  - rental_expenses_other: ALExpenseList.using(auto_gather=False)
---
id: rental_expenses_ordered object
objects:
  - rental_expenses_ordered: DAOrderedDict.using(elements=rental_expenses.terms_ordered, auto_gather=False, gathered=True)
---
id: rental expense information
reconsider: rental_expenses[i].display_name
question: |
  Tell us about your ${ rental_expenses[i].display_name.lower() } expense for your rental business
subquestion: |
  **Tip**: You can look back 12 months for this expense. That will give an accurate picture of how much the expense really is.
fields: 
  - Type of expense: rental_expenses[i].source
    code: |
      rental_expenses_ordered
  - Other (explain): rental_expenses[i].source_other
    show if:
      variable: rental_expenses[i].source
      is: other
  - Amount: rental_expenses[i].value
    datatype: currency
  - How often do you pay this amount?: rental_expenses[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_for_expenses
---
id: sets display name for rental income expense
code: |
  if defined('rental_expenses[i].source') and rental_expenses[i].source != "other":
    rental_expenses[i].display_name = rental_expenses.terms_ordered.get(rental_expenses[i].source, rental_expenses[i].source)
  elif defined('rental_expenses[i].source') and rental_expenses[i].source == "other" and defined('rental_expenses[i].source_other'):
    rental_expenses[i].display_name = rental_expenses[i].source_other
  else:
    rental_expenses[i].display_name = rental_income_expenses_other_display
---
id: rental expense income other display
code: |
  rental_income_expenses_other_display = "another rental income expense"
---
code: |
  for re in rental_expenses:
    if re.source is "other":
      rental_expenses_other.append(re)
  rental_expenses_other.gathered = True
---
code: |
  monthly_rental_income = (annual_rental_income - float(rental_expenses.total(times_per_year=1)))/12
---
id: rental net income
question:  Rental income
subquestion: |
  This can include long-term or short-term rental income.
fields:
  - Do you receive any rental income?: rental_income
    datatype: yesnoradio
  - note: |
      Many people don't file an IRS Schedule E for rental income. If this is the case, the Vermont Judiciary offers a worksheet to figure your monthly rental income. Only complete the worksheet if you can’t include an IRS Schedule E.
    show if: rental_income
  - Do you have a copy of your IRS Schedule E tax form for rental income?: has_schedule_e
    datatype: yesnoradio
    show if: rental_income
  - note: |
      If you file an IRS Schedule E tax form, find the line for "Total rental real estate and royalty income or (loss)." That is your annual rental net income.
      
      Enter that amount from Schedule E and we will calculate your monthly net income for this form. If you had a net loss, enter it as a negative number, like this: -5000.00
    show if: has_schedule_e
  - Annual rental net income: schedule_e_income
    datatype: currency
    show if: has_schedule_e
---
code: |
  if defined('other_incomes[i].source') and other_incomes[i].source != "other":
    other_incomes[i].display_name = other_incomes.terms_ordered.get(other_incomes[i].source, other_incomes[i].source)
  elif defined('other_incomes[i].source') and other_incomes[i].source == "other" and defined('other_incomes[i].source_other'):
    other_incomes[i].display_name = other_incomes[i].source_other
  else:
    other_incomes[i].display_name = other_incomes_other_display
---
id: want to add more other incomes
question: Do you want to add any more incomes?
subquestion: |
  Tap Next if you don't have more to add.

  % if rental_income:
  You said that your total monthly rental income is
  % if has_schedule_e:
  **${ currency(schedule_e_income/12) }**
  % else: 
  **${ currency(monthly_rental_income) }** 
  % endif
  . This amount will be entered into the form.   
  % if has_schedule_e:
  [You can edit this by
  clicking this link](${ url_action('schedule_e_income')}).
  % else: 
  [You can edit this by
  clicking this link](${ url_action('rental_expenses.revisit')}).
  % endif
  % endif
  
  ${ other_incomes_table }
  
  ${ other_incomes.add_action() }

  Your total monthly other income is 
  % if rental_income and has_schedule_e:
  ${ currency((float(other_incomes.total(times_per_year=1)) + schedule_e_income)/12)}.
  % elif rental_income:
  ${ currency(float(other_incomes.total(times_per_year=12)) + monthly_rental_income)}.
  % else:
  ${ currency(float(other_incomes.total(times_per_year=12)))}.
  % endif
continue button field: other_incomes.review_items
---
id: other_incomes.revisit
continue button field: other_incomes.revisit
question: |
  Edit other incomes
subquestion: |
  ${ other_incomes_table }

  ${ other_incomes.add_action() }
---
id: other_incomes_table
table: other_incomes_table
rows: other_incomes
columns:
  - Source: |
      row_item.display_name if defined("row_item.source") else ""
  - Income per month: |
      currency(row_item.total(times_per_year=12))
edit:
  - source
  - value
---
################################# JOBS ##############################
---
id: work
question: |
  Work
fields:
  - "Do you get income from working?": employed
    datatype: yesnoradio
  - Reason for not working: why_unemployed
    show if:
      variable: employed
      is: False
---
id: self employed income
question: |
  Income from self-employment
subquestion: |
  Note: If you get income from long-term or short-term rentals, don't include that here. We will collect information about that income separately.
fields:
  - Do you have self-employed income?: is_self_employed
    datatype: yesnoradio
  - note: |
      Self-employed income includes some gig work such as driving for Uber or Door Dash, where you usually get an IRS form 1099 from the company.
---
id: self employed estimated taxes
question: |
  How much you pay in estimated taxes
subquestion: |
  When you are self-employed, you usually pay Federal and State estimated taxes on your income through the year. Or maybe you pay just once a year.

  Enter 0 if you did not pay taxes on your self-employed income.
fields:
  - How much did you pay in **Federal** estimated taxes in the last year?: self_employed_estimated_taxes_paid_feds
    datatype: currency
  - How much did you pay in **State** estimated taxes in the last year?: self_employed_estimated_taxes_paid_state
    datatype: currency
---
id: regular income
question: |
  Income from jobs
subquestion: |
  % if is_self_employed:
  You said you have self-employment income. Do you also have jobs where you work for an employer?

  % else:
  You said you do not have self-employment income. Do you have jobs where you work for an employer? 
  % endif

  Note: If you get income from long-term or short-term rentals, don’t include that here. We will collect information about that income separately.
  
fields:
  - Do you have other jobs?: has_jobs
    datatype: yesnoradio

  - How many of these jobs do you have?: jobs.target_number
    datatype: integer
    js show if: |
      val("has_jobs") == true

validation code: |
  if has_jobs == False:
    jobs.target_number = 0

---
id: sets jobs.target_number
code: |
  if not employed:
    jobs.target_number = 0
---
if: j in ["self employed"]
id: self employed income
question: |
  What do you make in self-employed income each month as a ${ jobs[i].source }?
subquestion: |
  
  Most people report their net income from self-employment. To figure your monthly net income:
  
  - Look at your gross income over the last 12 months of self-employment. 
  - Subtract your business expenses over that time.
  - Then divide by 12.
  
  Or you can:
  
  - Look at your most recent IRS Schedule C form from your federal taxes.
  - Divide the net income by 12.
fields:
  - Your monthly net income: jobs[i].to_add[j].value
    datatype: currency
---
id: sets times_per_year to monthly (which shouldnt be used)
code: |
  jobs[i].times_per_year = 12
---
id: job complete
generic object: ALItemizedJob
code: |
  x.source
  x.employer.name.first
  x.to_add.gather()   
  x.complete = True
---
id: job at least one wage
generic object: ALItemizedJob
code: |
  x.to_add.there_are_any = True

---
id: job itemized value complete
generic object: ALItemizedValueDict
code: |
  if len(public_benefits) == 0:
    x.times_per_year
  x.complete = True
---
sets:
  - x.employer.name.first
id: employer
generic object: ALItemizedJob
question: |
  Tell us who employs you as a ${ x.source }
fields:
  - Is this a part time job: x.is_part_time
    datatype: yesnoradio
  - Employer's name: x.employer.name.first
  - note: |
      ---

      Employer's address
  - Street address: x.employer.address.address 
    address autocomplete: True
  - Unit: x.employer.address.unit
    required: False
  - City: x.employer.address.city
  - State: x.employer.address.state
    default: VT
  - Zip or postal code: x.employer.address.zip

---
id: name of one itemized job in list
generic object: ALItemizedJobList
question: |
  What is your job title for this job?
subquestion: |
  % if is_self_employed and len(x.complete_elements()) > 0:
  Remember, you've already told us about your self-employed income and being a ${ comma_and_list([job.source for job in x.complete_elements()]) }.
  % elif is_self_employed:
  Remember, you've already told us about your self-employed income. 
  % elif len(x.complete_elements()) > 0:
  Remember, you've already told us about being a ${ comma_and_list([job.source for job in x.complete_elements()]) }.
  % endif
fields:
  - Job title: x[i].source
---
id: other itemized job income value
generic object: ALItemizedJob
question: |
  Edit your ${ job_items_names.get(i, i) } in your job as a ${ x.source }
fields:
  - Amount: x.to_add[i].value
    datatype: currency
    hide if:
      code: x.is_hourly is True
  - Your hourly pay rate: x.to_add[i].value
    datatype: currency
    show if:
      code: x.is_hourly is True
        
  - How often do you get paid this amount?: x.to_add[i].times_per_year
    input type: radio
    code: |
      times_per_year_list
    datatype: integer
    hide if:
      code: x.is_hourly is True
  - How often do you get paid?: x.to_add[i].times_per_year
    input type: radio
    code: |
      times_per_year_list
    datatype: integer
    show if:
      code: x.is_hourly is True
  #- Do you have other additional income from this job? (Examples — Tips, commissions, bonuses): x.to_add.there_is_another
    #datatype: yesnoradio
---
if: j in ["full time","part time"]
id: itemized job period pt and ft wages
generic object: ALItemizedJob
question: |
  Details about ${ j } pay for your ${ jobs[i].source } job
fields:
  - Paid hourly or salary?: jobs[i].to_add[j].is_hourly
    input type: radio
    choices:
      - Hourly: True
      - Salary: False
  - label: |
      What is your hourly pay for this job?
    field: jobs[i].to_add[j].value
    datatype: currency
    show if: 
      variable: jobs[i].to_add[j].is_hourly
      is: True
  - label: |
      What do you get for wages during each pay period?
    field: jobs[i].to_add[j].value
    datatype: currency
    show if: 
      variable: jobs[i].to_add[j].is_hourly
      is: False
  - How often are you paid?: jobs[i].to_add[j].times_per_year
    input type: radio
    code: |
      times_per_year_list
    datatype: integer
  - How many hours are worked during that time?: jobs[i].to_add[j].hours_per_period
    datatype: number
    show if: 
      variable: jobs[i].to_add[j].is_hourly
      is: True
    validation messages:
      number: |
        Enter a number, like 40. If you don't know, enter your best guess.
  - Does the job have other incomes, like tips, commissions, royalties or bonuses?: jobs[i].to_add.there_is_another
    datatype: yesnoradio
  - Have you included overtime income?: jobs[i].overtime_info
    datatype: yesnoradio
  - note: |
      ---
      Look at a recent pay stub to figure the following information.
      
      Withholding **each month**
      
  - Federal: jobs[i].deductions_federal_monthly_amount
    datatype: currency
    required: False
  - FICA: jobs[i].deductions_fica_monthly_amount
    datatype: currency
    required: False
  - Medicare: jobs[i].deductions_medicare_monthly_amount
    datatype: currency
    required: False
  - State of Vermont: jobs[i].deductions_state_monthly_amount
    datatype: currency
    required: False
  - Other Taxes Withheld/Paid: jobs[i].deductions_other_monthly_amount
    datatype: currency
    required: False
  - note: |
      <hr>
  - Does the employer pay any personal expenses?: jobs[i].pay_personal_expenses
    datatype: yesnoradio
  - note: |
      Examples might be: cell phone, car expenses, housing allowance, meals or military allowances. 
  - How much does your employer pay in personal expenses?: jobs[i].to_add['expenses'].value
    datatype: currency
    show if: jobs[i].pay_personal_expenses
  - How often are you paid this?: jobs[i].to_add['expenses'].times_per_year
    input type: radio
    code: |
      times_per_year_list
    datatype: integer
    show if: jobs[i].pay_personal_expenses
---
code: |
  overtime_included_any_job = False
  for job in jobs:
    if job.overtime_info:
      overtime_included_any_job = True
---
comment: |
  jobs.kids_enrolled = False
  for job in jobs:
    if job.healthcare_available and job.kids_enrolled:
      jobs.kids_enrolled = True
---
code: |
  jobs.deductions_federal_monthly_amount = 0
  for job in jobs:
    if job.deductions_federal_monthly_amount > 0:
      jobs.deductions_federal_monthly_amount = job.deductions_federal_monthly_amount
---
code: |
  jobs.deductions_fica_monthly_amount = 0
  for job in jobs:
    if job.deductions_fica_monthly_amount > 0:
      jobs.deductions_fica_monthly_amount = job.deductions_fica_monthly_amount
---
code: |
  jobs.deductions_medicare_monthly_amount = 0
  for job in jobs:
    if job.deductions_medicare_monthly_amount > 0:
      jobs.deductions_medicare_monthly_amount = job.deductions_medicare_monthly_amount
---
code: |
  jobs.deductions_state_monthly_amount = 0
  for job in jobs:
    if job.deductions_state_monthly_amount > 0:
      jobs.deductions_state_monthly_amount = job.deductions_state_monthly_amount
---
code: |
  jobs.deductions_other_monthly_amount = 0
  for job in jobs:
    if job.deductions_other_monthly_amount > 0:
      jobs.deductions_other_monthly_amount = job.deductions_other_monthly_amount
---
code: |
  overtime_included_any_job
  jobs.deductions_federal_monthly_amount
  jobs.deductions_fica_monthly_amount
  jobs.deductions_medicare_monthly_amount
  jobs.deductions_state_monthly_amount
  jobs.deductions_other_monthly_amount
  single_jobs_attribute = True
---
id: health insurance through work
question: Health insurance through your work
fields:
  - Could you get insurance through a job — even if you choose not to enroll yourself or your children?: healthcare_available
    datatype: yesnoradio
  - note: |
      Ask the human resources department at your job to find answers to these questions. You need to fill in all the prices even if you don't have kids and even if you don't use your employer's health insurance.
    show if: healthcare_available
  - Total monthly family health insurance cost to employee: health_insurance_family_cost
    datatype: currency
    show if: healthcare_available
  - Total monthly two person cost to employee: health_insurance_2_person_cost
    datatype: currency
    show if: healthcare_available
  - Total monthly cost for single person coverage to employee: health_insurance_single_person_cost
    datatype: currency
    show if: healthcare_available
  - Are you enrolled in your employer's insurance?: enrolled
    datatype: yesnoradio
    show if: healthcare_available
  - Are your kids enrolled?: kids_enrolled
    datatype: yesnoradio
    show if: healthcare_available
  - How much do **you** pay for the health insurance each month?: health_insurance_paid
    show if: enrolled
    datatype: currency
  - How much does **someone else** pay for the health insurance each month? For example, your employer or spouse.: health_insurance_paid_by_employer
    show if: enrolled
    datatype: currency
---
id: sets health insurance info if no job
depends on: healthcare_available
if: len(jobs) == 0 or not healthcare_available
code: |
  health_insurance_family_cost = 0
  health_insurance_2_person_cost = 0
  health_insurance_single_person_cost = 0
  health_insurance_paid = 0
  enrolled = False
  kids_enrolled = False
  health_insurance_paid_by_employer = 0
    
---
id: sets default attributes if personal expenses arent paid
if: not jobs[i].pay_personal_expenses
code: |
  jobs[i].to_add['expenses'].value = 0
  jobs[i].to_add['expenses'].times_per_year = 0
---
if: j not in ["full time","part time","self employed"]
id: itemized job period non-pt-or-ft wages
generic object: ALItemizedJob
question: |
  Details about ${ j.lower() } you get at your ${ jobs[i].source } job
fields:
  - label: |
      Amount
    field: jobs[i].to_add[j].value
    datatype: currency
  - How often are you paid this?: jobs[i].to_add[j].times_per_year
    input type: radio
    code: |
      times_per_year_list
    datatype: integer
  - Does the job have any more incomes, like tips, commissions, royalties or bonuses?: jobs[i].to_add.there_is_another
    datatype: yesnoradio
---
id: sets hourly to false if salary
code: |
  if j not in ["full time","part time"]:
    jobs[i].to_add[j].is_hourly = False
---
id: are there more non-wage income
question: Are there more types of non-wage income for your job  as a ${ x.source }?
subquestion: |
  You have already mentioned:
  ${ x.to_add.true_values() }
fields:
  - Does the job have other incomes, like tips, commissions or bonuses?: x.to_add.there_is_another
    datatype: yesnoradio
---
id: jobs details about tips commissions bonuses
generic object: ALItemizedJob
question: |
  Other incomes from your job as a ${ x.source }
subquestion: |
  You have already told us about your income from **${comma_and_list( [job_items_names.get(key, key).lower() for key in x.to_add.complete_elements().keys()] )}**.
fields:
  - What kind of additional income do you get from this job? We will collect these one at a time.: x.to_add.new_item_name
    datatype: radio
    choices:
      - Tips
      - Commissions
      - Bonuses
      - Royalties
  - Specify: x.to_add.new_item_name
    show if:
      variable: x.to_add.new_item_name
      is: "Other"
validation code: |
  if x.to_add.new_item_name in x.to_add.complete_elements().keys():
    validation_error(f'You already told us about your <strong>{job_items_names.get(x.to_add.new_item_name, x.to_add.new_item_name) }</strong> that pays { currency( x.to_add[ x.to_add.new_item_name ].value )}. Pick a different name.')

---
if: not x.to_add.complete_elements()
id: job at least one wage
generic object: ALItemizedJob
code: |
  if x.is_part_time:
    x.to_add.new_item_name = "part time"
  else:
    x.to_add.new_item_name = "full time"
  
---
id: edit wages and other incomes from a job
generic object: ALItemizedJob
continue button field: x.to_add.revisit
question: |
  Edit incomes from ${ x.source }
subquestion: |
  ${ x.to_add.table }

  ${ x.to_add.add_action() }
---
id: itemized value to add table
generic object: ALItemizedValueDict
table: x.to_add.table
rows: x
columns:
  - Type: |
      str(row_index).replace("_", " ").lower().capitalize()
  - Amount per hour or other time period: |
      currency(row_item.value)
  
edit:
  #- exists
  - is_part_time
  - is_hourly
  - times_per_year
  - value
---
id: itemized value table
generic object: ALItemizedValueDict
table: x.table
rows: x
columns:
  - Type: |
      str(row_index).replace("_", " ").lower().capitalize()
  - Amount: |
      currency(row_item.value)
edit:
  #- exists
  - is_part_time
  - is_hourly
  - times_per_year
  - value
---
id: job review
question: |
  Review your jobs
subquestion: |

  % if is_self_employed:
  **Self-employment**

  You said that you were self-employed with a net income of
  % if has_schedule_c:
  ${ currency(self_employed_net_income/12) } each month. (You can update this later if needed.)
  % else:
  ${ currency(str(self_employed_net_income_monthly_amount)) } each month. (You can update this later if needed.)
  % endif
  % endif

  **Jobs**

  % if is_self_employed:
  Here is what you've told us about your other jobs. You can add more or continue
  to the next question.
  % else:
  Here is what you've told us about your jobs. You can add more or continue
  to the next question.
  % endif
  ${ jobs_table } 
  
  ${ jobs.add_action() }  



continue button field: review_jobs
---
id: jobs_table
table: jobs_table
rows: jobs
columns:
  - Job: |
      row_item.source
  - Employer: |
      row_item.employer.name.first if defined("row_item.employer.name.first") else ""
  - Monthly gross income: |
      currency(row_item.gross_total(times_per_year=12)) 

edit:
  - employer.name.first
  - to_add.revisit

confirm: True
---
id: wages table
generic object: ALItemizedValueDict
table: x.table
rows: x
columns:
  - Type of pay: |
      str(row_index).replace("_", " ").lower().capitalize()
  - Notes : |
      "Hourly rate" if defined("row_item.is_hourly") and row_item.is_hourly == True else ""
  - Amount: |
      currency(row_item.value)
  - How often paid: |
      times_per_year(times_per_year_list, row_item.times_per_year)
      
  
edit:
  #- exists
  - is_part_time
  - is_hourly
  - times_per_year
  - value

---
############################### INTRO SCREENS ###############################
---
id: basic questions intro screen
decoration: form-lineal
question: |
  ${interview_short_title}
subquestion: |  

  <p>${ intro_vtcourtforms_3_steps }</p>
  
  <i class="fas fa-file-text fa-2x"></i> This guided interview will produce a completed Financial Affidavit form 400-813A for Vermont courts. It is used in Family Division cases.
  
  <i class="fas fa-clock fa-2x"></i>  It may take you between 45 minutes and 2 hours to complete this. There are a lot of questions.

  **Make an account**: We suggest that you create a free account. It will save your work along the way. You will be able to come back later to finish it. Tap "register" below to make an account. Your information will be kept private.

  <i class="fas fa-circle-info fa-2x"></i> It is free to use this tool. This site is not a lawyer.
  
  Visit the [VTLawHelp.org website](https://vtlawhelp.org) for information about family legal issues and procedures.

  <p>${ intro_vtcourtforms_created_by }</p>
    
continue button field: al_intro_screen
---
id: VT 813 intro
continue button field: VT_813A_intro
question: |
  Is this tool right for you?
subquestion: |
  ${ start_accordion('<h2 class="h5">Do you need to fill out Financial Affidavit form 813A?</h2>') }
  <p>There are a lot of questions on the 813A form. Be sure you really need to fill it out. It will take quite some time to describe all your income and expenses. This tool will help you work through it.</p>

  <p>You need to complete and file the 813A if:</p>
  <ul><li>You are a party in a newly filed divorce, civil union dissolution, legal separation, annulment or parentage case and you and the other party have minor children; OR</li>
  
  <li>You or the other party are seeking to change a previously issued order for child support or spousal maintenance (alimony); OR</li>
  
  <li>You are required to pay support and an enforcement action has been filed against you; OR</li>
  
  <li>Your child is in the custody of the Department of Children and Families and support has been requested of you; OR</li>
  
  <li>You are ordered by the court to complete and file this form or the other party requests that you fill out the form as part of a court case.</li>
  </ul>

  If you aren't sure if you should fill it out, <a href="https://www.vermontjudiciary.org/self-help/ARC"> contact the Vermont Judiciary Access and Resource Center.</a> Their services are free and they serve the whole state. They do NOT give legal advice. Or, call the <a href="https://www.vermontjudiciary.org/court-locations?f%5B0%5D=court_division%3A4">Family Division of the court handling your case.</a>

  ${ next_accordion('<h2 class="h5">Information you will need</h2>') }
  <p>You will need to know:</p>
  
  <li>birthdates of you, the other party and any children</li>
  <li>any Social Security or disability income received by your kids</li>
  <li>information about your court case like a case number (You can find this information on other court papers you have about this case. If you are starting a new case, you won't have a case number yet.)</li>
  <li>any public assistance that you get (like 3SquaresVT food help, ReachUp help for families, SSI, housing assistance, etc.)</li>
  <li>the name and address of any employer you might have</li>
  <li>your income — If you work or get unemployment, have those paystubs on hand. If you get child support, have that information on hand. If you are self-employed, have your IRS Schedule C on hand or your business income and expenses. If you earn rental income, have IRS Schedule E on hand or your rental income and expenses.</li>
  <li>amount of taxes taken out of your paycheck</li>
  <li>if you work, you will need to know the costs of one-person, two-person and family health insurance offered by your employer — whether you enroll in that insurance or not (Ask the human resources folks.)</li>
  <li>all your expenses (including rent/mortgage, utilities, insurance payments, child care, medical costs, car expenses, clothes, insurance, child support you pay, other child expenses, etc.)</li>
  <li>loan payments for cars/trucks, your home or other real estate, credit card debt payments and any other loan payments.</li>
  </ul>

  ${ end_accordion() }
---
id: important_notes_to_user
question: |
  Important
subquestion: |  
  <h4>Deadline for filing</h4>
  
  This form must be filed with the court before or at your first case manager's conference. If no conference is scheduled it must be filed at least 7 days before your first scheduled court hearing.

    <h4>Our terms of use</h4>
  
fields:
  - To continue, please accept our [terms of use](https://vtlawhelp.org/vtcourtforms/terms-of-use).: acknowledged_information_use
    datatype: checkboxes
    none of the above: False    
    minlength: 1
    choices:
      - I accept the terms of use.
    validation messages:
      minlength: |
        You cannot continue unless you agree to the terms of use.
continue button field: important_notes_to_user
---
id: paystub instructions
question: |
  Important
subquestion: |

  If you got paychecks in the last 12 months, you will need to attach copies of the 4 most recent paystubs to this form.

  If you had self-employed income, you will need to attach a copy of your most recent IRS Schedule C — only if you filed one.

  We'll remind you about this at the end in the Next Steps document.
continue button field: paystub_instructions
---
############################### ABOUT COURT CASE ###############################
---
id: is the user the plaintiff or defendant?
comment: |
  This question is asked if the interview can be used by both
  a Plaintiff and a Defendant. It sets the value of `user_role`, `user_started_case`,
  `plaintiffs`, `defendants`, `petitioners` and `respondents`.
  
  If you know your interview is exclusively
  used by the Plaintiff or Defendant, set `user_ask_role = 'plaintiff'` or
  `user_ask_role='defendant'` in your code.
question: |
  Are you the plaintiff or the defendant in this court case?
subquestion: |
  ${ collapse_template(help_user_ask_role_template) }
fields: 
  - no label: user_ask_role
    datatype: radio
    choices:
      - Plaintiff: plaintiff
      - Defendant: defendant
  - note: |
      Okay, you are the **plaintiff** in this case. The other person is the **defendant**.
    show if:
      variable: user_ask_role
      is: "plaintiff"
  - note: |
      Okay, you are the **defendant** in this case. The other person is the **plaintiff**.
    show if:
      variable: user_ask_role
      is: "defendant"
---
template: help_user_ask_role_template
subject: |
  How do I know?  
content: |
  Look at any papers you have from the court. The case name will look like this:

  Jane Test v. John Test

  The person listed first is the “plaintiff.” They are the person who started the original case.

  The person listed second is the “defendant.” They are the person responding to the original case. 

  The titles plaintiff and defendant remain consistent throughout the case. Even if the defendant is later asking to change or enforce a court order, they are still the defendant in the case. 

---
id: choose a court
question: |
  What court is your case in?
fields:
  - note: |
      Choose the county court where you will file this form. 
      
      ${ collapse_template(which_county_813A) }

      ${ collapse_template(in_which_county) }
    
  - County: user_selected_county
    code: sorted(all_courts.unique_column_values('branch') - {"Environmental", "Judicial Bureau"} )
    required: False
---
template: which_county_813A
subject: |
  Not sure which county to choose?
content: |
  Select the county listed on your court papers. On most court forms, you can find the county next to the word “Unit” in the upper-left corner of the first page.
---
id: docket number
question: |
  What is the case number?
subquestion: |
  If you have papers from the court, find the case number. It's usually in the upper-right corner.

  It will look like one of these examples: 25-DM-00000 or 1234-00-00 Cndm.

fields:
  - I don’t know the case number, or I don't have a case number yet: dont_know_docket_number
    datatype: yesno    
  - Case number: docket_number
    hide if: dont_know_docket_number
validation code: |
  # This should be safe too
  if dont_know_docket_number:
    docket_number = ''    
---
############################### USERS INFO ###############################
---
id: Gather users street address
sets:
  - users[0].address.address
  - users[0].address.city
  - users[0].address.zip
  - users[0].address.unit
  - users[0].address.state
question: |
  What is your address?
  
fields:
  - code: |
      users[0].address_fields(default_state=AL_DEFAULT_STATE)
  - I have a mailing address that is different from my street address: users1_mailing_address_different
    datatype: yesno
  - Mailing address: users[0].mailing_address.address
    address autocomplete: True
    show if: users1_mailing_address_different
  - Unit: users[0].mailing_address.unit
    required: False
    show if: users1_mailing_address_different
  - City: users[0].mailing_address.city
    show if: users1_mailing_address_different
  - State: users[0].mailing_address.state
    code: |
      states_list()
    default: VT
    show if: users1_mailing_address_different
  - Zip or postal code: users[0].mailing_address.zip
    required: False
    show if: users1_mailing_address_different

---
id: About you
question: |
  About you and your household
subquestion: |
  How many people live in your household? Include yourself, any spouse, partner, and dependants such as children.
fields:
  - "Household size": household_size
    datatype: integer
    min: 0
---
id: your contact information
question: |
  What is your contact information?
subquestion: |
  Include **at least one** way to reach you other than by mail.

  If you do not have a phone number or email, use a trusted friend's phone number. But the friend must be someone you can rely on to give you a message.

fields:  
  - Daytime phone number: users[0].daytime_phone_number
    datatype: al_international_phone
    required: False
  - Evening phone number: users[0].evening_phone_number
    datatype: al_international_phone
    required: False
  - Email address: users[0].email    
    datatype: email
    required: False

validation code: |
  if (not showifdef('users[0].daytime_phone_number') and \
      (not showifdef('users[0].evening_phone_number')) and \
      (not showifdef('users[0].email')) and \
      (not showifdef('users[0].other_contact_method'))):
    validation_error(word("You need to provide at least one contact method."), field="users[0].other_contact_method")
---
id: users.revisit
continue button field: users.revisit
question: |
  Edit info about you
subquestion: |
  ${ users.table }

  ${ users.add_action() }
---
id: users.table
table: users.table
rows: users
columns:
  - Name: |
      row_item.name.full() if defined("row_item.name.first") else ""
  - Address: |
      row_item.address.block() if defined("row_item.address.address") else ""
  - Mailing address: |
      row_item.mailing_address.block() if defined("row_item.mailing_address.address") else ""
  - Email: |
      row_item.email if defined("row_item.email") else ""
  - Phone number: |
      row_item.daytime_phone_number if defined("row_item.daytime_phone_number") else ""
  - Signature: |
      row_item.signature if defined("row_item.signature") else ""
edit:
  - name.first
  - address.address
  - mailing_address.address
  - email
  - daytime_phone_number
  - signature
confirm: True
---
############################# EXPENSES #############################
---
id: expenses intro screen
mandatory: True
continue button field: expenses_intro_screen
question: |
  Expenses
subquestion: |
  Now we'll review your expenses — the things you pay for.
  
  We will have screens for:
  
  % if len(shared_children) > 0 or len(other_children) > 0:
  - child-related expenses
  %endif
  
  - household expenses
  
  - vehicle expenses
  
  - insurance expenses
  
  - personal expenses
    
  Tap the Next button.
comment: |
  --Notes on how an expenses list is gathered, which may have expenses set as default from other lists, using household_expensess as an example--
  
  Interview has already asked about primary_residence_loans (which will be used as a default for the household_expenses['rent']

  Interview order calls household_expenses and household_expenses.review_items - id: interview_order_VT_813

  Gather looks for .there_are_any - id: selected types sets there_are_any

  there_any_any asks for household_expenses.selected_types - id: household expenses types
  
  default code sets household_expenses.selected_types['rent'] to true if there are primary_residence_loans that the user pays

  if any selected types,
   move_check_to_lists function from al_income_move
   This creates a number of elements in the list. The version in al_income_move does not delete 'source' if other, (original may set 'source' to the default, like 'vehicle')
   also sets .moved for the list
   there_are_any is set to true (  check_for_others will set source? CHECK)
   will then look for complete - id: ALExpense complete

  complete calls for attribute (value for household_expenses) for information question
  if household_expenses[i].source is "rent", then code sets the value. for editing purposes, it also sets primary_residence_loans_househould_expenses_list_number to the index of household_expenses wi id: code setting loans as default for rent

  information question calls display name (with reconsider to keep it fresh)
  
  answering the question sets display_name fresh with new source_other with validation code

  complete sets display  
  
  household_expenses.review_items shows a table, which will include the mortgage expense calculated by the code block
---
# "!!omap" makes these terms ordered
# their order here will be their same order when shown to users.
id: household_expenses.terms_ordered
variable name: household_expenses.terms_ordered
data: !!omap
  - rent: "Rent"
  - property_tax: "Property taxes"
  - home_insurance: "Homeowners' or renter's insurance"
  - electric: "Electricity"
  - phone: "Telephone (land and cell phone)"
  - water: "Water"
  - gas: "Gas for home"
  - fuel: "Oil, Wood or other fuel not listed above"
  - mowplowtrash: "Mowing, plowing, trash and/or homeowner association fees"
  - food: "Groceries"
  - cableinternet: "Cable/internet"
  - laundry: "Laundry/dry cleaning"
  - repairs: "Maintenance/repairs"
--- 
id: household expenses other display
code: |
  household_expenses_other_display = "another household expense"

---
id: household expenses object
objects:
  - household_expenses: ALExpenseList.using(complete_attribute='complete',there_is_another=False)
---
id: household_expenses_ordered object
objects:
  - household_expenses_ordered: DAOrderedDict.using(elements=household_expenses.terms_ordered, auto_gather=False, gathered=True)
---
#expenses
id: household expenses types
reconsider:
  - primary_residence_loans.total_monthly_self_payment
  - primary_residence_loans.total_monthly_other_payment
question: |
  What kind of household expenses do you have?
subquestion: |
  You can look back 12 months for these expenses. That will give an accurate picture of how much the expenses really are.
  
  % if primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
  <hr>
  **Household expenses you have told us about already**
  
  You said that the total monthly expenses for paying for loans on your primary residence is **${ currency(primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(primary_residence_loans.total_monthly_self_payment) }** and others pay **${ currency(primary_residence_loans.total_monthly_other_payment) }**. This amount will be entered into the form. You will be able to edit it.
  
  <hr>
  % endif
fields:
  - Household expenses: household_expenses.selected_types
    datatype: checkboxes
    code: |
      household_expenses_ordered

---
id: ALExpense complete
generic object: ALExpense
code: |
  x.value
  x.complete = True
---
id: household expense information
reconsider: household_expenses[i].display_name
question: |
  Tell us about your ${ household_expenses[i].display_name.lower() }
subquestion: |
  **Tip**: You can look back 12 months for this expense. That will give an accurate picture of how much the expense really is.
fields: 
  - Type of expense: household_expenses[i].source
    code: |
      household_expenses_ordered
  - Other (explain): household_expenses[i].source_other
    show if:
      variable: household_expenses[i].source
      is: other
  - Amount: household_expenses[i].value
    datatype: currency
  - How often do you pay this amount?: household_expenses[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_for_expenses
  - Does **anyone else** pay all or part of this expense?: household_expenses[i].paid_by_other
    datatype: yesnoradio

validation code: |
  if household_expenses[i].source != "other":
    household_expenses[i].display_name = household_expenses.terms_ordered.get(household_expenses[i].source, household_expenses[i].source)
  else:
    household_expenses[i].display_name = household_expenses[i].source_other
  if household_expenses[i].paid_by_other == False:
    household_expenses[i].paid_by_other_monthly = 0
  else:
    if defined('household_expenses[i].paid_by_other_monthly') and household_expenses[i].paid_by_other_monthly <= household_expenses[i].total(times_per_year=12):
      household_expenses[i].paid_by_other_monthly_default = household_expenses[i].paid_by_other_monthly
    else:
      household_expenses[i].paid_by_other_monthly_default = 0
    invalidate('household_expenses[i].paid_by_other_monthly')

---
id: household expenses paid by others
question:  Other payments for ${ household_expenses[i].display_name.lower() }
subquestion: |
  You said your ${ household_expenses[i].display_name.lower() } expense is ${ currency(household_expenses[i].total(times_per_year=12)) } per month.
fields: 
  - How much does somebody else pay for that expense per month?: household_expenses[i].paid_by_other_monthly
    datatype: currency
    min: 0
    max: ${ household_expenses[i].total(times_per_year=12) }
    default: ${ household_expenses[i].paid_by_other_monthly_default }
---
code: |
  household_expenses[i].paid_by_other_monthly_default = 0
---
id: sets display name for household expense
code: |
  if defined('household_expenses[i].source') and household_expenses[i].source != "other":
    household_expenses[i].display_name = household_expenses.terms_ordered.get(household_expenses[i].source, household_expenses[i].source)
  elif defined('household_expenses[i].source') and household_expenses[i].source == "other" and defined('household_expenses[i].source_other'):
    household_expenses[i].display_name = household_expenses[i].source_other
  else:
    household_expenses[i].display_name = household_expenses_other_display
---
reconsider: primary_residence_loans.total_monthly_self_payment
id: want to add more household expenses
question: Do you want to list any more household expenses?
subquestion: |

  % if primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
  You said that the total monthly expenses for paying for loans on your primary residence is **${ currency(primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(primary_residence_loans.total_monthly_self_payment) }**. This amount will be entered into the form.   [You can edit this by
  clicking this link](${ url_action('primary_residence_loans.revisit')}).
  % endif
  
  Tap Next if you don't have more to add.
  
  ${ household_expenses_table }
  
  ${ household_expenses.add_action() }
  
  **Total of household expenses shown above:**
  ${ currency(household_expenses.total(times_per_year=12) + primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) ) }

continue button field: household_expenses.review_items
---
reconsider: household_expenses.total_monthly_self_payment
id: household_expenses.revisit
continue button field: household_expenses.revisit
question: |
  Edit expenses
subquestion: |
  
  ${ household_expenses_table }

  ${ household_expenses.add_action() }
---
id: household_expenses_table
table: household_expenses_table
rows: household_expenses
columns:
  - Type: |
      row_item.display_name
  - Amount paid by you each month: |
      currency(float(row_item.total(times_per_year=12)) - row_item.paid_by_other_monthly)
  - Amount paid by somebody else: |
      currency(row_item.paid_by_other_monthly)
  - Total: |
      currency(row_item.total(times_per_year=12))
edit:
  - source
---
id: vehicle_expenses.terms_ordered
# "!!omap" makes these terms ordered
# their order here will be their same order when shown to users.
variable name: vehicle_expenses.terms_ordered
data: !!omap
  - auto_insur: "Car insurance"
  - auto_gas: "Gas"
  - auto_maint: "Maintenance/repairs"
  - auto_reg: "Registration"

--- 
id: vehicle_expenses_other_display
code: |
  vehicle_expenses_other_display = "another vehicle expense"

---
id: vehicle_expenses object
objects:
  - vehicle_expenses: ALExpenseList.using(complete_attribute='complete',there_is_another=False)
---
id: vehicle_expenses_ordered
objects:
  - vehicle_expenses_ordered: DAOrderedDict.using(elements=vehicle_expenses.terms_ordered, auto_gather=False, gathered=True)
---
#expenses
id: vehicle expenses types
reconsider:
  - vehicle_loans.total_monthly_self_payment
  - vehicle_loans.total_monthly_other_payment
question: |
  What kind of car, truck and other vehicle expenses do you have?
subquestion: | 
  You can look back 12 months for these expenses. That will give an accurate picture of how much the expenses really are.
  
  % if vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
  <hr>
  **Vehicle expenses you have told us about already**
  
  You said that the total monthly expenses for paying for loans on your vehicles is **${ currency(vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(vehicle_loans.total_monthly_self_payment) }** and others pay **${ currency(vehicle_loans.total_monthly_other_payment) }**. This amount will be entered into the form. You will be able to edit it.
  <hr>
  % endif
fields:
  - Vehicle expenses: vehicle_expenses.selected_types
    datatype: checkboxes
    code: |
      vehicle_expenses_ordered
---
id: vehicle expense information
reconsider: vehicle_expenses[i].display_name
question: |
  Tell us about your ${ vehicle_expenses[i].display_name.lower() }
subquestion: |
  **Tip**: You can look back 12 months for this expense. That will give an accurate picture of how much the expense really is.
fields: 
  - Type of expense: vehicle_expenses[i].source
    code: |
      vehicle_expenses_ordered
  - Other (explain): vehicle_expenses[i].source_other
    show if:
      variable: vehicle_expenses[i].source
      is: other
  - Amount: vehicle_expenses[i].value
  - How often do you pay this amount?: vehicle_expenses[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_for_expenses
  - Does **anyone else** pay all or part of this expense?: vehicle_expenses[i].paid_by_other
    datatype: yesnoradio

validation code: |
  if vehicle_expenses[i].source != "other":
    vehicle_expenses[i].display_name = vehicle_expenses.terms_ordered.get(vehicle_expenses[i].source, vehicle_expenses[i].source)
  else:
    vehicle_expenses[i].display_name = vehicle_expenses[i].source_other
  if vehicle_expenses[i].paid_by_other == False:
    vehicle_expenses[i].paid_by_other_monthly = 0
  else:
    if defined('vehicle_expenses[i].paid_by_other_monthly') and vehicle_expenses[i].paid_by_other_monthly <= vehicle_expenses[i].total(times_per_year=12):
      vehicle_expenses[i].paid_by_other_monthly_default = vehicle_expenses[i].paid_by_other_monthly
    else:
      vehicle_expenses[i].paid_by_other_monthly_default = 0
    invalidate('vehicle_expenses[i].paid_by_other_monthly')
---
id: vehicle expenses paid by others
question:  Other payments for ${ vehicle_expenses[i].display_name.lower() }
subquestion: |
  You said your ${ vehicle_expenses[i].display_name.lower() } expense is ${ currency(vehicle_expenses[i].total(times_per_year=12)) } per month.
fields: 
  - How much does somebody else pay for that expense per month?: vehicle_expenses[i].paid_by_other_monthly
    datatype: currency
    min: 0
    max: ${ vehicle_expenses[i].total(times_per_year=12) }
    default: ${ vehicle_expenses[i].paid_by_other_monthly_default }

---
id: vehicle expense display name
code: |
  if defined('vehicle_expenses[i].source') and vehicle_expenses[i].source != "other":
    vehicle_expenses[i].display_name = vehicle_expenses.terms_ordered.get(vehicle_expenses[i].source, vehicle_expenses[i].source)
  elif defined('vehicle_expenses[i].source') and vehicle_expenses[i].source == "other" and defined('expenses[i].source_other'):
    vehicle_expenses[i].display_name = vehicle_expenses[i].source_other
  else:
    vehicle_expenses[i].display_name = vehicle_expenses_other_display
---
reconsider: vehicle_loans.total_monthly_self_payment
id: want to add more expenses
question: Do you want to list any more vehicle expenses?
subquestion: |
  Tap Next if you don't have more to add.

    % if vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
  You said that the total monthly expenses for paying for loans on your vehicles is **${ currency(vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(vehicle_loans.total_monthly_self_payment) }**. This amount will be entered into the form. [You can edit this by
  clicking this link](${ url_action('vehicle_loans.revisit')}).

  % endif
  
  ${ vehicle_expenses_table }
  
  ${ vehicle_expenses.add_action() }

  **Total of vehicle expenses shown above:** ${ currency(vehicle_expenses.total(times_per_year=12) + vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }
continue button field: vehicle_expenses.review_items
---
reconsider: vehicle_expenses.total_monthly_self_payment
id: vehicle_expenses.revisit
continue button field: vehicle_expenses.revisit
question: |
  Edit vehicle expenses
subquestion: |
  ${ vehicle_expenses_table }

  ${ vehicle_expenses.add_action() }

  Total of expenses: 
  ${ currency(vehicle_expenses.total(times_per_year=12)) }
---
id: vehicle_expenses_table
table: vehicle_expenses_table
rows: vehicle_expenses
columns:
  - Type: |
      row_item.display_name
  - Amount paid by you each month: |
      currency(float(row_item.total(times_per_year=12)) - row_item.paid_by_other_monthly)
  - Amount paid by somebody else: |
      currency(row_item.paid_by_other_monthly)
  - Total: |
      currency(row_item.total(times_per_year=12))
edit:
  - source
  - value

---
id: insurance_expenses.terms_ordered
# "!!omap" makes these terms ordered
# their order here will be their same order when shown to users.
variable name: insurance_expenses.terms_ordered
data: !!omap
  - insur_life: "Life insurance"
  - insur_disab: "Disability insurance"
  - insur_health: "Health insurance not offered through employer"
  - insur_dentvis: "Dental/vision insurance"
---
id: insurance_expenses_other_display
code: |
  insurance_expenses_other_display = "another insurance expense"

---
id: insurance_expenses object
objects:
  - insurance_expenses: ALExpenseList.using(complete_attribute='complete',there_is_another=False)
---
id: insurance_expenses_ordered object
objects:
  - insurance_expenses_ordered: DAOrderedDict.using(elements=insurance_expenses.terms_ordered, auto_gather=False, gathered=True)
---
#expenses
id: insurance expenses types
question: |
  What kind of insurance expenses do you have?
subquestion: |
  You can look back 12 months for these expenses. That will give an accurate picture of how much the expenses really are.

  % if health_insurance_paid > 0 or health_insurance_paid_by_employer > 0:
  <hr>
  **Health insurance expenses you have told us about already**
  
  You said that you pay **${ currency(health_insurance_paid) }** for health insurance and someone else pays **${ currency(health_insurance_paid_by_employer) }.** This amount will be entered into the form. You will be able to change this after entering any other insurance expense information.
  % endif
fields:
  - Insurance expenses: insurance_expenses.selected_types
    datatype: checkboxes
    code: |
      insurance_expenses_ordered
---
id: insurance expense information
reconsider: insurance_expenses[i].display_name
question: |
  Tell us about your ${ insurance_expenses[i].display_name.lower() }
subquestion: |
  **Tip**: You can look back 12 months for this expense. That will give an accurate picture of how much the expense really is.
fields: 
  - Type of expense: insurance_expenses[i].source
    code: |
      insurance_expenses_ordered
  - Other (explain): insurance_expenses[i].source_other
    show if:
      variable: insurance_expenses[i].source
      is: other
  - Amount: insurance_expenses[i].value
    datatype: currency
  - How often do you pay this amount?: insurance_expenses[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_for_expenses
  - Does **anyone else** pay all or part of this expense?: insurance_expenses[i].paid_by_other
    datatype: yesnoradio

validation code: |
  if insurance_expenses[i].source != "other":
    insurance_expenses[i].display_name = insurance_expenses.terms_ordered.get(insurance_expenses[i].source, insurance_expenses[i].source)
  else:
    insurance_expenses[i].display_name = insurance_expenses[i].source_other
  if insurance_expenses[i].paid_by_other == False:
    insurance_expenses[i].paid_by_other_monthly = 0
  else:
    if defined('insurance_expenses[i].paid_by_other_monthly') and insurance_expenses[i].paid_by_other_monthly <= insurance_expenses[i].total(times_per_year=12):
      insurance_expenses[i].paid_by_other_monthly_default = insurance_expenses[i].paid_by_other_monthly
    else:
      insurance_expenses[i].paid_by_other_monthly_default = 0
    invalidate('insurance_expenses[i].paid_by_other_monthly')
---
id: insurance expense paid by other question
question:  Other payments for ${ insurance_expenses[i].display_name }
subquestion: |
  You said your ${ insurance_expenses[i].display_name } expense is ${ currency(insurance_expenses[i].total(times_per_year=12)) } per month.
fields: 
  - How much does somebody else pay for that expense per month?: insurance_expenses[i].paid_by_other_monthly
    datatype: currency
    min: 0
    max: ${ insurance_expenses[i].total(times_per_year=12) }
    default: ${ insurance_expenses[i].paid_by_other_monthly_default }
---
code: |
  insurance_expenses[i].paid_by_other_monthly_default = 0
---
id: insurance expense display name
code: |
  if defined('insurance_expenses[i].source') and insurance_expenses[i].source != "other":
    insurance_expenses[i].display_name = insurance_expenses.terms_ordered.get(insurance_expenses[i].source, insurance_expenses[i].source)
  elif defined('insurance_expenses[i].source') and insurance_expenses[i].source == "other" and defined('expenses[i].source_other'):
    insurance_expenses[i].display_name = insurance_expenses[i].source_other
  else:
    insurance_expenses[i].display_name = insurance_expenses_other_display
---
id: want to add more insurance expenses
question: Do you want to list any more insurance expenses?
subquestion: |
  Tap Next if you don't have more to add.

    % if health_insurance_paid > 0 or health_insurance_paid_by_employer > 0:
  **Health insurance through work:**
  You said that you pay **${ currency(health_insurance_paid) }** for health insurance and someone else pays **${ currency(health_insurance_paid_by_employer) }**. [You can edit this by clicking this link](${ url_action('health_insurance_paid')})
  % endif
  
  ${ insurance_expenses_table }
  
  ${ insurance_expenses.add_action() }

  **Total of insurance expenses shown above:** ${ currency(float(insurance_expenses.total(times_per_year=12)) + health_insurance_paid) }
continue button field: insurance_expenses.review_items
---
reconsider: insurance_expenses.total_monthly_self_payment
id: insurance_expenses.revisit
continue button field: insurance_expenses.revisit
question: |
  Edit insurance expenses
subquestion: |
  ${ insurance_expenses_table }

  ${ insurance_expenses.add_action() }

  Total of expenses: 
  ${ currency(insurance_expenses.total(times_per_year=12)) }
---
id: insurance_expenses_table
table: insurance_expenses_table
rows: insurance_expenses
columns:
  - Type: |
      row_item.display_name
  - Amount paid by you each month: |
      currency(float(row_item.total(times_per_year=12)) - row_item.paid_by_other_monthly)
  - Amount paid by somebody else: |
      currency(row_item.paid_by_other_monthly)
  - Total: |
      currency(row_item.total(times_per_year=12))
edit:
  - source
  - value
---
id: personal_expenses.terms_ordered
# "!!omap" makes these terms ordered
# their order here will be their same order when shown to users.
variable name: personal_expenses.terms_ordered
data: !!omap
  - medical: "Uninsured medical expenses"
  - clothes: "Clothing/shoes"
  - toiletries: "Toiletries/cosmetics"
  - dining: "Meals/snacks eaten out"
  - hair: "Hair care"
  - reading: "Magazines, newspapers, books, other reading material"
  - tobalch: "Tobacco and alcohol products"
  - pets: "Veterinarian and other pet expenses"
  - entertain: "Entertainment (movies, bowling, museums, etc.)"
  - gifts: "Gifts for others"
  - charity: "Charitable contributions"
  - vacation: "Vacation"
  - dues: "Union dues"
  - save: "Monthly contribution to savings"
  - contributions: "Monthly contribution to retirement funds (401K, IRA, etc.)"
  - other_kids: |
      Expenses for children living with you but not of the relationship with ${ other_parties[0].name_full() }
  - alimony: "Court-ordered spousal maintenance (alimony) you pay"
  - other: "Miscellaneous"
--- 
id: personal expenses other display default
code: |
  personal_expenses_other_display = "another personal expense"

---
id: personal_expenses object
objects:
  - personal_expenses: ALExpenseList.using(complete_attribute='complete',there_is_another=False)
---
id: personal_expenses_ordered object
objects:
  - personal_expenses_ordered: DAOrderedDict.using(elements=personal_expenses.terms_ordered, auto_gather=False, gathered=True)
---
code: |
  monthly_debt_payment = real_estate_loans.total_monthly_self_payment + other_loans.total_monthly_self_payment + other_debt.total_monthly_self_payment
depends on:
  - real_estate_loans.total_monthly_self_payment
  - other_loans.total_monthly_self_payment
  - other_debt.total_monthly_self_payment
---
code: |
  monthly_debt_other_payment = real_estate_loans.total_monthly_other_payment + other_loans.total_monthly_other_payment + other_debt.total_monthly_other_payment
depends on:
  - real_estate_loans.total_monthly_other_payment
  - other_loans.total_monthly_other_payment
  - other_debt.total_monthly_other_payment
---
code: |
  total_monthly_debt_payment = real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) + other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) + other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12)
depends on:
  - real_estate_loans
  - other_loans
  - other_debt
---
#expenses
id: personal expenses types
reconsider:
 - real_estate_loans.total_monthly_self_payment
 - real_estate_loans.total_monthly_other_payment
 - other_loans.total_monthly_self_payment
 - other_loans.total_monthly_other_payment
 - other_debt.total_monthly_self_payment
 - other_debt.total_monthly_other_payment
 - monthly_debt_payment
 - monthly_debt_other_payment
question: |
  What kind of personal expenses do you have?
subquestion: |
  You can look back 12 months for these expenses listed below. That will give an accurate picture of how much the expenses really are.
  
  % if len(shared_children) > 0:
  If you already answered questions about expenses for children of your relationship with ${ other_parties[0] }, do **not** include those child expenses here.
  % endif
  
  % if monthly_debt_payment > 0:
  <hr>
  **Personal expenses you have told us about already**
  
  You said that you make these monthly debt payments:

  % if real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
    - Real estate loans (not including your primary residence): Total of ${ currency(real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(real_estate_loans.total_monthly_self_payment) } and others pay ${ currency(real_estate_loans.total_monthly_other_payment) }. 
  % endif
  % if other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)>0:
    - Other loans: Total of ${ currency(other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(other_loans.total_monthly_self_payment) } and others pay you pay ${ currency(other_loans.total_monthly_other_payment) }. They include:
  % for loan_type in ["personal","school","other"]:
  % if len(other_loans.matches(source=[loan_type])) > 0:
      - ${ quantity_noun(len(other_loans.matches(source=[loan_type])), other_loans.terms_ordered.get(loan_type, loan_type)).lower() }
  % endif
  % endfor

  % endif
  % if other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12):
    - Other debt - Total of ${ currency(other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(other_debt.total_monthly_self_payment) } and others you pay ${ currency(other_debt.total_monthly_other_payment) }.
  % endif
   
  Grand total of **${ currency(total_monthly_debt_payment) }** of which you pay **${ currency(monthly_debt_payment) }** and others pay **${ currency(monthly_debt_other_payment) }**. This amount will be entered into the form. You will be able to edit it after entering other expenses.

  (Note that primary residence loans, credit card debt and vehicle payments are not included in this "personal expenses" section.)
  % endif

  % if monthly_debt_payment == 0 and child_support_other_total > 0:
    <hr>
    **Personal expenses you have told us about already**
  % elif child_support_other_total > 0:
  
    According to the information you entered about children from another relationship, your monthly child support expense for these children is:
  **${ currency(child_support_other_total) }** and you pay **${ currency(child_support_other_self_paid) }**. This will be entered into the form. You will be able to edit it.
  % else:
  
  % endif

  <hr>
fields:
  - Personal expenses: personal_expenses.selected_types
    datatype: checkboxes
    code: |
      personal_expenses_ordered
  - note: |
      After you enter any personal expenses, it will take a moment to generate your draft form so you can review it!
---
id: personal expense information
reconsider: personal_expenses[i].display_name
question: |
  Tell us about your ${ personal_expenses[i].display_name.lower() }
subquestion: |
  **Tip**: You can look back 12 months for this expense. That will give an accurate picture of how much the expense really is.
fields: 
  - Type of expense: personal_expenses[i].source
    code: |
      personal_expenses_ordered
  - Other (explain): personal_expenses[i].source_other
    show if:
      variable: personal_expenses[i].source
      is: other
  - Amount: personal_expenses[i].value
    datatype: currency
  - How often do you pay this amount?: personal_expenses[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_for_expenses
  - Does **anyone else** pay all or part of this expense?: personal_expenses[i].paid_by_other
    datatype: yesnoradio

validation code: |
  if personal_expenses[i].source != "other":
    personal_expenses[i].display_name = personal_expenses.terms_ordered.get(personal_expenses[i].source, personal_expenses[i].source)
  else:
    personal_expenses[i].display_name = personal_expenses[i].source_other
  if personal_expenses[i].paid_by_other == False:
    personal_expenses[i].paid_by_other_monthly = 0
  else:
    if defined('personal_expenses[i].paid_by_other_monthly') and personal_expenses[i].paid_by_other_monthly <= personal_expenses[i].total(times_per_year=12):
      personal_expenses[i].paid_by_other_monthly_default = personal_expenses[i].paid_by_other_monthly
    else:
      personal_expenses[i].paid_by_other_monthly_default = 0
    invalidate('personal_expenses[i].paid_by_other_monthly')

---
id: personal expenses paid by others question
question:  Other payments for ${ personal_expenses[i].display_name.lower() }
subquestion: |
  You said your ${ personal_expenses[i].source } expense is ${ currency(personal_expenses[i].total(times_per_year=12)) } per month.
fields: 
  - How much does somebody else pay for that expense per month?: personal_expenses[i].paid_by_other_monthly
    datatype: currency
    min: 0
    max: ${ personal_expenses[i].total(times_per_year=12) }
    default: ${ personal_expenses[i].paid_by_other_monthly_default }
---
code: |
  personal_expenses[i].paid_by_other_monthly_default = 0
---
id: personal expenses display
code: |
  if defined('personal_expenses[i].source') and personal_expenses[i].source != "other":
    personal_expenses[i].display_name = personal_expenses.terms_ordered.get(personal_expenses[i].source, personal_expenses[i].source)
  elif defined('personal_expenses[i].source') and personal_expenses[i].source == "other" and defined('expenses[i].source_other'):
    personal_expenses[i].display_name = personal_expenses[i].source_other
  else:
    personal_expenses[i].display_name = personal_expenses_other_display
---
reconsider: 
  - real_estate_loans.total_monthly_self_payment
  - other_loans.total_monthly_self_payment
  - other_debt.total_monthly_self_payment
  - monthly_debt_payment
  - total_monthly_debt_payment
id: want to add more personal expenses
question: Do you want to list any more personal expenses?
subquestion: |
  Tap Next if you don't have more to add.
  
  % if total_monthly_debt_payment > 0:
  <hr>
  **Personal expenses that you have told us about already**
  
  You said that you make these monthly debt payments (note that primary residence loans, credit card debt and vehicle payments are not included in this "personal expenses" section):

  % if real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
    - Real estate loans (not including your primary residence): Total of ${ currency(real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(real_estate_loans.total_monthly_self_payment) }. 
  
      - [Click here to edit the real estate loans.](${ url_action('real_estate_loans.revisit')})
  
  % endif
  % if other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)>0:
    - Other loans: Total of ${ currency(other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(other_loans.total_monthly_self_payment) }. They include:
  % for loan_type in ["personal","school","other"]:
  % if len(other_loans.matches(source=[loan_type])) > 0:
      - ${ quantity_noun(len(other_loans.matches(source=[loan_type])), other_loans.terms_ordered.get(loan_type, loan_type)).lower() }
  % endif
  % endfor

      - [Click here to edit the other loans.](${ url_action('other_loans.revisit')})
  
  % endif
  % if other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12):
    - Other debt - Total of ${ currency(other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(other_debt.total_monthly_self_payment) }.

      - [Click here to edit the other debt.](${ url_action('other_debt.revisit')})
  
  % endif
   
   Grand total of **${ currency(total_monthly_debt_payment) }** of which you pay **${ currency(monthly_debt_payment) }**.
  
  <hr>
  % endif

  % if child_support_other_total > 0:
  According to the information you entered about children of another relationship, your monthly child support expense for these children is **${ currency(child_support_other_total )}**. This will be entered into the form. [Click here to change this amount by editing the child support for any child.](${ url_action('other_children.revisit')})
  % endif  
  
  ${ personal_expenses_table }

  ${ personal_expenses.add_action() }
  
  **Total of personal expenses shown above:** ${ currency(float(personal_expenses.total(times_per_year=12)) + float(total_monthly_debt_payment) + child_support_other_total) }

continue button field: personal_expenses.review_items
---
id: we are ready to create your form
question: We're ready to create your form
subquestion: |
  It will take a moment to generate the form after you tap the Next button.
continue button field: wait_while_form_is_generated
---
reconsider: total_monthly_debt_payment
id: personal_expenses.revisit
continue button field: personal_expenses.revisit
question: |
  Edit personal expenses
subquestion: |

  % if monthly_debt_payment > 0:
  <hr>
  You said that you make these monthly debt payments (note that primary residence loans, credit card debt and vehicle payments are not included in this "personal expenses" section):

  % if real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12) > 0:
    - Real estate loans (not including your primary residence): Total of ${ currency(real_estate_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(real_estate_loans.total_monthly_self_payment) }. 
  
  [You can edit the real estate loans by clicking this link](${ url_action('real_estate_loans.revisit')}).
  % endif
  % if other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)>0:
    - Other loans: Total of ${ currency(other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(other_loans.total_monthly_self_payment) }. They include:
  % for loan_type in ["personal","school","other"]:
  % if len(other_loans.matches(source=[loan_type])) > 0:
      - ${ quantity_noun(len(other_loans.matches(source=[loan_type])), other_loans.terms_ordered.get(loan_type, loan_type)).lower() }
  % endif
  % endfor

  [You can edit the other loans by clicking this link](${ url_action('other_loans.revisit')}).

  % endif
  % if other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12):
    - Other debt - Total of ${ currency(other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } of which you pay ${ currency(other_debt.total_monthly_self_payment) }.

  [You can edit the other debt by clicking this link](${ url_action('other_debt.revisit')}).
  % endif
   
   Grand total of **${ currency(total_monthly_debt_payment) }** of which you pay **${ currency(monthly_debt_payment) }**.
  
  % endif
  
  ${ personal_expenses_table }
  
  ${ personal_expenses.add_action() }

  Total of expenses: 
  ${ currency(personal_expenses.total(times_per_year=12) + total_monthly_debt_payment) }
---
id: personal_expenses_table
table: personal_expenses_table
rows: personal_expenses
columns:
  - Type: |
      row_item.display_name
  - Amount paid by you each month: |
      currency(float(row_item.total(times_per_year=12))) if not row_item.paid_by_other else currency(float(row_item.total(times_per_year=12)) - row_item.paid_by_other_monthly)
  - Amount paid by somebody else: |
      "$0" if not row_item.paid_by_other else currency(row_item.paid_by_other_monthly)
  - Total: |
      currency(row_item.total(times_per_year=12))
edit:
  - source
  - value
---
id: children_expenses.terms_ordered
# "!!omap" makes these terms ordered
# their order here will be their same order when shown to users.
variable name: children_expenses.terms_ordered
data: !!omap
  - kids_clothes: "Clothing and shoes"
  - kids_diapers: "Diapers"
  - kids_lunch: "School lunches"
  - kids_supplies: "School supplies"
  - kids_activities: "Fees/expenses for special activities (e.g., piano lessons, sports)"
  - kids_camp: "Summer camp/school vacation camp"
  - kids_tuition: "Private school tuition"
  - kids_medical: "Uninsured medical/dental expenses"
  - kids_other: "Miscellaneous"

--- 
id: children expenses display name default
code: |
  children_expenses_other_display = "another children expense"

---
id: children_expenses object
objects:
  - children_expenses: ALExpenseList.using(complete_attribute='complete',there_is_another=False)
---
generic object: ALExpenseList
code: |
  temp_total = 0
  for item in x:
    temp_total += float(item.total(times_per_year=12)) - item.paid_by_other_monthly
  x.total_monthly_self_payment = temp_total
---
id: children_expenses_ordered object
objects:
  - children_expenses_ordered: DAOrderedDict.using(elements=children_expenses.terms_ordered, auto_gather=False, gathered=True)
---
#expenses
id: children expenses types
question: |
  What kind of child expenses do you have for children with ${ other_parties[0].name_full() }?
subquestion: |
  What expenses do you have for children of this relationship?
  
  You can look back 12 months for these expenses. That will give an accurate picture of how much the expenses really are.

  % if out_of_pocket_costs > 0:
  <hr>
  **Child expenses you have told us about already**
  
  You said earlier that your monthly out-of-pocket childcare cost is: **${ currency(out_of_pocket_costs)}** (the total childcare cost of ${currency(total_monthly_childcare_costs) } minus the subsidy of ${ currency(childcare_subsidy) }). This amount will be entered into the form. You will be able to edit it.
  % endif
  
  % if out_of_pocket_costs == 0 and child_support_shared > 0:
  <hr>
  **Child expenses you have told us about already**
  % endif
  
  % if child_support_shared > 0:
  According to the information you entered about shared children with ${ other_parties[0] }, your monthly child support expense for these children is: 
  **${ currency(child_support_shared) }**. This amount will be entered into the form. You will be able to edit it.
  % endif
  <hr>
fields:
  - Expenses for children: children_expenses.selected_types
    datatype: checkboxes
    code: |
      children_expenses_ordered
---
id: children expense information
reconsider: children_expenses[i].display_name
question: |
  Tell us about the ${ children_expenses[i].display_name.lower() } expense for the child/children
subquestion: |
  **Tip**: You can look back 12 months for this expense. That will give an accurate picture of how much the expense really is.
fields: 
  - Type of expense: children_expenses[i].source
    code: |
      children_expenses_ordered
  - Other (explain): children_expenses[i].source_other
    show if:
      variable: children_expenses[i].source
      is: kids_other
  - Amount: children_expenses[i].value
    datatype: currency
  - How often do you pay this amount?: children_expenses[i].times_per_year
    input type: radio
    default: 12
    code: |
      times_per_year_for_expenses

validation code: |
  if children_expenses[i].source != "kids_other":
    children_expenses[i].display_name = children_expenses.terms_ordered.get(children_expenses[i].source, children_expenses[i].source)
  else:
    children_expenses[i].display_name = children_expenses[i].source_other

---
if: children_expenses[i].source == 'kids_childcare' and out_of_pocket_costs > 0
code: |
  children_expenses[i].value = out_of_pocket_costs
  children_expenses[i].times_per_year = 12   
---
id: children expense paid by others question
question:  ${ children_expenses[i].display_name.lower() }
subquestion: |
  You said your ${ children_expenses[i].display_name.lower() } expense is ${ currency(children_expenses[i].total(times_per_year=12)) }
fields: 
  - How much does somebody else pay for that expense per month?: children_expenses[i].paid_by_other_monthly
    datatype: currency
    min: 0
    max: ${ children_expenses[i].total(times_per_year=12) }
    default: ${ children_expenses[i].paid_by_other_monthly_default }
---
id: children expense display name
code: |
  if defined('children_expenses[i].source') and children_expenses[i].source != "other":
    children_expenses[i].display_name = children_expenses.terms_ordered.get(children_expenses[i].source, children_expenses[i].source)
  elif defined('children_expenses[i].source') and children_expenses[i].source == "other" and defined('expenses[i].source_other'):
    children_expenses[i].display_name = children_expenses[i].source_other
  else:
    children_expenses[i].display_name = children_expenses_other_display
---
id: want to add more expenses
question: Do you want to list any more child expenses?
subquestion: |

  Tap Next if you don't have more to add.

  % if out_of_pocket_costs > 0:
  You said earlier that your monthly out-of-pocket childcare cost is: **${ currency(out_of_pocket_costs)}** (the total childcare cost of ${currency(total_monthly_childcare_costs) } minus the subsidy of ${ currency(childcare_subsidy) }).  This amount will be entered into the form. [Click here to change this amount.](${ url_action('out_of_pocket_costs')})
  % endif

  % if child_support_shared > 0:
  According to the information you entered about shared children with ${ other_parties[0] }, your monthly child support expense for these children is: **${ currency(child_support_shared) }**. This amount will be entered into the form. [Click here to change this amount by editing the child support for any child.](${ url_action('shared_children.revisit')})
  % endif
  
  ${ children_expenses_table }

  ${ children_expenses.add_action() }

  **Total of expenses shown above:**    ${ currency(float(children_expenses.total(times_per_year=12)) + out_of_pocket_costs + child_support_shared ) }
 
continue button field: children_expenses.review_items
---
id: children_expenses.revisit
continue button field: children_expenses.revisit
question: |
  Edit expenses
subquestion: |
  ${ children_expenses_table }

  ${ children_expenses.add_action() }
---
id: children_expenses_table
table: children_expenses_table
rows: children_expenses
columns:
  - Type: |
      row_item.display_name
  - Amount paid by you each month: |
      currency(row_item.total(times_per_year=12))
edit:
  - source
  - value
---
if: len(shared_children) > 0
id: childcare costs
question: Your child care costs for children with ${ other_parties[0].name.full() }
subquestion: |
  How much do you pay for daycare or child care for children of this relationship?
  
  Look back over the last 12 months. If your monthly amount changes during the year, use your total amount for the year and divide by 12. Do not include summer camps or vacation camps — we'll collect that information later.

  Enter 0 if these don't apply to you.
fields:
  - Total monthly childcare costs: total_monthly_childcare_costs
    datatype: currency
  - Any subsidy you get from the state to help pay each month: childcare_subsidy
    datatype: currency
validation code: |
  out_of_pocket_costs = total_monthly_childcare_costs - childcare_subsidy
---
if: len(shared_children) == 0
id: childcare costs if no shared children
code: |
  out_of_pocket_costs = 0
---
id: extraordinary expenses
question: Your extraordinary expenses for children with ${ other_parties[0].name.full() }
subquestion: |
  Do you have these expenses for children of this relationship?
  
  Look back over the last 12 months. If your monthly amount changes during the year, use your total amount for the year and divide by 12.

  Select any that apply to you.

fields:
  - Uninsured medical expenses for kids: uninsured_medical_expenses_kids
    datatype: yesno
  - Type: uninsured_medical_expenses_type
    show if: uninsured_medical_expenses_kids
    maxlength: 36
  - Cost paid by you each month: uninsured_medical_expenses_amount
    show if: uninsured_medical_expenses_kids
    datatype: currency
  - Educational expenses for kids: educational_expenses_kids
    datatype: yesno
  - Type: educational_expenses_type
    show if: educational_expenses_kids
    maxlength: 36
  - Cost paid by you each month: educational_expenses_amount
    show if: educational_expenses_kids
    datatype: currency
  - Special needs expenses for kids: specialneeds_expenses_kids
    datatype: yesno
  - Type: special_needs_expenses_type
    show if: specialneeds_expenses_kids
    maxlength: 36
  - Cost paid by you each month: special_needs_expenses_amount
    show if: specialneeds_expenses_kids
    datatype: currency
  - None of the above: no_extraordinary_expenses
    datatype: yesno
    disable others:
      - uninsured_medical_expenses_kids
      - educational_expenses_kids
      - specialneeds_expenses_kids
continue button field: extraordinary_expenses
---
id: primary_residence_loans.terms_ordered
variable name: primary_residence_loans.terms_ordered
data: !!omap
  - primary: "Primary residence mortgage"
  - second: "Primary residence second mortgage"
  - home_equity: "Primary residence home equity loan"
---
id: primary residence loan other default
comment: |
  used in this display line
  About your ___
code: |
  primary_residence_loans_other_display = "other primary_residence_loan"
---
id: primary_residence_loans object
objects:
  - primary_residence_loans: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id:  primary_residence_loans_ordered object
objects:
  - primary_residence_loans_ordered: DAOrderedDict.using(elements=primary_residence_loans.terms_ordered, auto_gather=False, gathered=True)
---
id: primary_residence_loans there are any
generic object: ALAssetList
code: |
  if x.selected_types.any_true():
    x.move_checks_to_list(selected_terms=x.terms_ordered)
    x.there_are_any = True
  else:
    x.there_are_any = False
---
#id: real_estate object
#objects:
  #- real_estate: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id: loan intro screen
continue button field: loan_intro_screen
question: |
  Loans and debts
subquestion: |
  Now we'll review any loans on things you own, as well as debts.
---
id: does user own home or real estate
question: |
  Real estate
subquestion: |
  Do you own your home or other real estate?

  Say "yes" whether you own it outright or have a mortgage or loan.
fields: 
  - no label: real_estate_user_owned
    datatype: yesnoradio
---
id: what real estate does user own
question: |
  Real estate
subquestion: |
  What do you own?
fields:
  - no label: real_estate_owned
    datatype: checkboxes
    choices:
      - I own the home I live in.: user_owns_home_re
      - I own business or rental properties.: user_owns_commercial_re
      - I own other real estate or land.: user_owns_other_re
---
id: are there primary loans
question: |
  Loans on the home you live in
subquestion: |
   Do you have any loans on your primary residence (the home you live in)?
   
   Check any that apply to you. Otherwise, choose none of the above.
fields:
  - no label: primary_residence_loans.selected_types
    datatype: checkboxes
    code: |
      primary_residence_loans_ordered
---
id: primary_residence_loans complete
code: |
  primary_residence_loans[i].balance
  if not primary_residence_loans[i].self_payment:
    primary_residence_loans[i].paid_by_other_monthly
  primary_residence_loans[i].complete = True
---
id: primary_residence_loans complete
generic object: ALAssetList
code: |
  x[i].market_value
  if not x[i].self_payment:
    x[i].paid_by_other_monthly
  x[i].complete = True
---
id: info for each primary_residence_loans
reconsider: primary_residence_loans[i].display_name
question: |
  About your ${ primary_residence_loans[i].display_name.lower() }
fields:
  - Type of Loan: primary_residence_loans[i].source
    code: |
      primary_residence_loans_ordered
  - Lender: primary_residence_loans[i].lender
  - Balance owed: primary_residence_loans[i].balance
    datatype: currency
  - Monthly payment set by the lender: primary_residence_loans[i].monthly_payment
    datatype: currency
  - Are YOU paying this in full?: primary_residence_loans[i].self_payment
    datatype: yesnoradio
validation code: |
  primary_residence_loans[i].value = primary_residence_loans[i].monthly_payment
  primary_residence_loans[i].times_per_year = 12
---
id: primary residence loan display name
code: |
  if defined('primary_residence_loans[i].source') and primary_residence_loans[i].source != "other":
    primary_residence_loans[i].display_name = primary_residence_loans.terms_ordered.get(primary_residence_loans[i].source, primary_residence_loans[i].source)
  elif defined('primary_residence_loans[i].source') and primary_residence_loans[i].source == "other" and defined('primary_residence_loans[i].source_other'):
    primary_residence_loans[i].display_name = primary_residence_loans[i].source_other
  else:
    primary_residence_loans[i].display_name = primary_residence_loans_other_display
---
generic object: ALAssetList
id: generic object for loans paid by others
question:  Other payments for ${ x[i].display_name.lower() }
subquestion: |
  You said your ${ x[i].display_name.lower() } loan payment is ${ currency(x[i].total(times_per_year=12)) } per month, but you do not pay it in full yourself.
  
fields: 
  - How much do you pay for that loan payment per month? : x[i].paid_by_self_monthly
    datatype: currency
    min: 0
    default: 0
  - How much does somebody else pay for that loan payment per month?: x[i].paid_by_other_monthly
    datatype: currency
    min: 0
    default: 0
---
reconsider:
  - primary_residence_loans.total_monthly_self_payment
  - primary_residence_loans.total_monthly_other_payment
id: want to add more primary_residence_loans
question: Do you want to list any more primary residence loans?
subquestion: |
  
  The total for the monthly loan expenses below is **${ currency(primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and the amount you pay is **${ currency(primary_residence_loans.total_monthly_self_payment) }** and others pay **${ currency(primary_residence_loans.total_monthly_other_payment) }**.
  
  Tap Next if you don't have more to add.
  
  ${ primary_residence_loans_table }
  
  ${ primary_residence_loans.add_action() }
  
continue button field: primary_residence_loans.review_items
---
generic object: ALIncomeList
code: |
  temp_total = 0
  for item in x:
    if item.self_payment:
      temp_total += item.monthly_payment
  x.total_monthly_self_payment = temp_total
---
generic object: ALAssetList
code: |
  temp_total = 0
  for item in x:
    if item.self_payment:
      temp_total += item.monthly_payment
    else:
      temp_total += item.paid_by_self_monthly
  x.total_monthly_self_payment = temp_total
---
generic object: ALAssetList
code: |
  temp_total = 0
  for item in x:
    if not item.self_payment:
      temp_total += item.paid_by_other_monthly
  x.total_monthly_other_payment = temp_total
---
reconsider: primary_residence_loans.total_monthly_self_payment
id: primary_residence_loans.revisit
continue button field: primary_residence_loans.revisit
question: |
  Edit your primary residence loans
subquestion: |
  ${ primary_residence_loans_table }

  ${ primary_residence_loans.add_action() }
---
id: primary_residence_loans_table
table: primary_residence_loans_table
rows: primary_residence_loans
columns:
  - Type of Loan: |
      row_item.display_name.lower() 
  - Lender: |
      row_item.lender
  - Balance owed: |
      currency(row_item.balance) if defined("row_item.balance") else ""
  - Monthly Payment: |
      currency(row_item.monthly_payment) if defined("row_item.monthly_payment") else ""
  - Amount paid per month: |
      "You pay in full" if row_item.self_payment else "You pay " + currency(row_item.paid_by_self_monthly) + "\n Others pay "  + currency(row_item.paid_by_other_monthly)
edit:
  - source
  - lender
  - monthly_payment
  - self_payment
  - balance
---
id: other_loans.terms_ordered
variable name: other_loans.terms_ordered
data: !!omap
  - personal: "Personal loan"
  - school: "School/college Loan"
  - other: "Other loan"
---
id: other loans display default
comment: |
  used in this display line
  About your ___
code: |
  other_loans_other_display = "other loan"
---
id: other_loans object
objects:
  - other_loans: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id: other_loans_ordered object
objects:
  - other_loans_ordered: DAOrderedDict.using(elements=other_loans.terms_ordered, auto_gather=False, gathered=True)
---
id: other_loans there are any
generic object: ALAssetList
code: |
  if x.selected_types.any_true():
    x.move_checks_to_list(selected_terms=x.terms_ordered)
    x.there_are_any = True
  else:
    x.there_are_any = False
---
id: are there other loans
question: |
  Do you have any other loans?
subquestion: |
   Check any that apply to you.
fields:
  - no label: other_loans.selected_types
    datatype: checkboxes
    code: |
      other_loans_ordered
---
id: other loans complete
generic object: ALAssetList
code: |
  other_loans[i].lender
  if not other_loans[i].self_payment:
    other_loans[i].paid_by_other_monthly
  other_loans[i].complete = True
---
id: info for each other_loans
reconsider: other_loans[i].display_name
question: |
  About your ${ other_loans[i].display_name.lower() }
fields:
  - Type of Loan: other_loans[i].source
    code: |
      other_loans_ordered
  - Lender: other_loans[i].lender
  - Balance owed: other_loans[i].balance
    datatype: currency
  - Monthly payment set by lender: other_loans[i].monthly_payment
    datatype: currency
  - Are YOU paying this in full?: other_loans[i].self_payment
    datatype: yesnoradio
  - note: |
      Don't have an official monthly payment? Look back over the last 12 months and enter an average monthly payment.
validation code: |
  if other_loans[i].source != "other":
    other_loans[i].display_name = other_loans.terms_ordered.get(other_loans[i].source, other_loans[i].source)
  else:
    other_loans[i].display_name = other_loans_other_display
  other_loans[i].value = other_loans[i].monthly_payment
  other_loans[i].times_per_year = 12
---
id: other loans display name
code: |
  if defined('other_loans[i].source') and other_loans[i].source != "other":
    other_loans[i].display_name = other_loans.terms_ordered.get(other_loans[i].source, other_loans[i].source)
  elif defined('other_loans[i].source') and other_loans[i].source == "other" and defined('other_loans[i].source_other'):
    other_loans[i].display_name = other_loans[i].source_other
  else:
    other_loans[i].display_name = other_loans_other_display
---
id: want to add more other_loans
reconsider:
  - other_loans.total_monthly_self_payment
  - other_loans.total_monthly_other_payment
question: Do you want to list any other loans?
subquestion: |
  
  The total for the monthly loan expenses below is **${ currency(other_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(other_loans.total_monthly_self_payment) }** and others pay **${ currency(other_loans.total_monthly_other_payment) }**.
  
  Tap Next if you don't have more to add.
  
  ${ other_loans_table }
  
  ${ other_loans.add_action() }
continue button field: other_loans.review_items
---
id: other_loans.revisit
continue button field: other_loans.revisit
question: |
  Edit your other loans
subquestion: |
  ${ other_loans_table }

  ${ other_loans.add_action() }
---
id: other_loans_table
table: other_loans_table
rows: other_loans
columns:
  - Type of Loan: |
      row_item.source
  - Lender: |
      row_item.lender
  - Balance owed: |
      currency(row_item.balance) if defined("row_item.balance") else ""
  - Monthly Payment: |
      currency(row_item.monthly_payment) if defined("row_item.monthly_payment") else ""
  - Amount paid per month: |
      "You pay in full" if row_item.self_payment else "You pay " + currency(row_item.paid_by_self_monthly) + "\n Others pay "  + currency(row_item.paid_by_other_monthly)
edit:
  - source
  - lender
  - monthly_payment
  - self_payment
  - balance
---
id: real_estate_loans object
objects:
  - real_estate_loans: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id: are there real estate loans
question: Loans on other real estate
subquestion: |
  Note: On this screen, do not include business or rental property loans. Do not include mortgages or loans on the home you live in.
fields:
  - Do you have loans on other pieces of real estate?: real_estate_loans.there_are_any
    datatype: yesnoradio
---
id: real_estate_loans complete
code: |
  real_estate_loans[i].lender
  if not real_estate_loans[i].self_payment:
    real_estate_loans[i].paid_by_other_monthly
  real_estate_loans[i].complete = True
---
id: real estate loan display name
code: |
  real_estate_loans[i].display_name = real_estate_loans[i].source
---
id: info for each real estate loans
question: |
  About your ${ ordinal(i) } real estate loan
fields:
  - Property description: real_estate_loans[i].source
  - Lender: real_estate_loans[i].lender
  - Balance owed: real_estate_loans[i].balance
    datatype: currency
  - Monthly payment set by lender: real_estate_loans[i].monthly_payment
    datatype: currency
  - Are YOU paying this in full?: real_estate_loans[i].self_payment
    datatype: yesnoradio
validation code: |
  real_estate_loans[i].value = real_estate_loans[i].monthly_payment
  real_estate_loans[i].times_per_year = 12
---
id: want to add more real_estate_loans
reconsider:
  - real_estate_loans.total_monthly_self_payment
  - real_estate_loans.total_monthly_other_payment
question: Do you want to list any more real estate loans?
subquestion: |
  The total for the monthly loan expenses below is **${ currency(real_estate_loans.total(times_per_year=12)) }** and you pay **${ currency(real_estate_loans.total_monthly_self_payment) }** and others pay **${ currency(real_estate_loans.total_monthly_other_payment) }**.
  
  Tap Next if you don't have more to add.
  
  ${ real_estate_loans_table }
  
  ${ real_estate_loans.add_action() }
continue button field: real_estate_loans.review_items
---
id: real_estate_loans.revisit
continue button field: real_estate_loans.revisit
question: |
  Edit real estate loans
subquestion: |
  ${ real_estate_loans_table }

  ${ real_estate_loans.add_action() }
---
id: real_estate_loans_table
table: real_estate_loans_table
rows: real_estate_loans
columns:
  - Property description: |
      row_item.source
  - Lender: |
      row_item.lender
  - Balance owed: |
      currency(row_item.balance) if defined("row_item.balance") else ""
  - Monthly payment: |
      currency(row_item.monthly_payment) if defined("row_item.monthly_payment") else ""
  - Amount paid per month: |
      "You pay in full" if row_item.self_payment else "You pay " + currency(row_item.paid_by_self_monthly) + "\n Others pay "  + currency(row_item.paid_by_other_monthly)
edit:
  - source
  - lender
  - monthly_payment
  - self_payment
  - balance
---
id: vehicle_loans
objects:
  - vehicle_loans: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id: are there vehicle loans
question: Loans on cars, trucks and other vehicles
fields:
  - Do you have any vehicle loans?: vehicle_loans.there_are_any
    datatype: yesnoradio
---
id: vehicle_loans complete
code: |
  vehicle_loans[i].lender
  if not vehicle_loans[i].self_payment:
    vehicle_loans[i].paid_by_other_monthly
  vehicle_loans[i].complete = True
---
id: info for each vehicle loans
question: |
  About your ${ ordinal(i) } vehicle loan
fields:
  - Type of vehicle (Year, Make, Model): vehicle_loans[i].source
  - Lender: vehicle_loans[i].lender
  - Balance owed: vehicle_loans[i].balance
    datatype: currency
  - Monthly payment set by the lender: vehicle_loans[i].monthly_payment
    datatype: currency
  - Are YOU paying this in full?: vehicle_loans[i].self_payment
    datatype: yesnoradio
validation code: |
  vehicle_loans[i].value = vehicle_loans[i].monthly_payment
  vehicle_loans[i].times_per_year = 12
---
id: vehicle_loans display name
code: |
  vehicle_loans[i].display_name = vehicle_loans[i].source
---
id: more vehicle loans
reconsider: 
 - vehicle_loans.total_monthly_self_payment
 - vehicle_loans.total_monthly_other_payment
question: Do you want to list any more vehicle loans?
subquestion: |
  The total for the monthly vehicle loan expenses is **${ currency( vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(vehicle_loans.total_monthly_self_payment) }** and others pay **${ currency(vehicle_loans.total_monthly_other_payment) }**.
  
  
  Tap Next if you don't have more to add.
  
  ${ vehicle_loans_table }
  
  ${ vehicle_loans.add_action() }
continue button field: vehicle_loans.review_items
---
id: vehicle_loans.revisit
continue button field: vehicle_loans.revisit
question: |
  Edit your vehicle loans
subquestion: |
  ${ vehicle_loans_table }

  ${ vehicle_loans.add_action() }
---
id: vehicle_loans_table
table: vehicle_loans_table
rows: vehicle_loans
columns:
  - Year, Make, Model: |
      row_item.source
  - Lender: |
      row_item.lender
  - Balance owed: |
      currency(row_item.balance) if defined("row_item.balance") else ""
  - Monthly Payment: |
      currency(row_item.monthly_payment) if defined("row_item.monthly_payment") else ""
  - Amount paid per month: |
      "You pay in full" if row_item.self_payment else "You pay " + currency(row_item.paid_by_self_monthly) + "\n Others pay "  + currency(row_item.paid_by_other_monthly)
edit:
  - source
  - lender
  - monthly_payment
  - self_payment
  - balance
---
id: credit_card_debt object
objects:
  - credit_card_debt: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id: is there credit card debt
question: Credit card debt
fields:
  - Do you have any credit card debt?: credit_card_debt.there_are_any
    datatype: yesnoradio
  - note: |
      If you are paying the full balance of credit card bills every month, you can say No.
---
id: credit_card_debt complete
code: |
  credit_card_debt[i].lender
  if not credit_card_debt[i].self_payment:
    credit_card_debt[i].paid_by_other_monthly
  credit_card_debt[i].complete = True
---
id: info for each credit_card_debt loans
question: |
  About your credit card debt
fields:
  - Name of card holder: credit_card_debt[i].source
    datatype: radio
    choices:
      - ${ users[0] }
      - ${ other_parties[0] }
      - Other
  - Name: credit_card_debt[i].source_other
    show if:
      variable: credit_card_debt[i].source
      is: Other
  - Company: credit_card_debt[i].lender
  - Balance owed: credit_card_debt[i].balance
    datatype: currency
  - Monthly payment set by credit card company: credit_card_debt[i].monthly_payment
    datatype: currency
  - note: |
      Note: If you aren't paying off your credit card bill each month, what is the minimum amount that the credit card company asks for?
  - Are YOU paying this in full?: credit_card_debt[i].self_payment
    datatype: yesnoradio
validation code: |
  if credit_card_debt[i].source != "Other":
    credit_card_debt[i].display_name = credit_card_debt[i].source
  else: 
    credit_card_debt[i].display_name = credit_card_debt[i].source_other
  credit_card_debt[i].value = credit_card_debt[i].monthly_payment
  credit_card_debt[i].times_per_year = 12
---
id: want to add more credit_card_debt
reconsider: 
 - credit_card_debt.total_monthly_self_payment
 - credit_card_debt.total_monthly_other_payment
question: Do you want to list any more credit card debt?
subquestion:  |
  The total for the monthly credit card debt expenses is **${ currency(credit_card_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(credit_card_debt.total_monthly_self_payment) }** and others pay **${ currency(credit_card_debt.total_monthly_other_payment) }**.
  
  Tap Next if you don't have more to add.
  
  ${ credit_card_debt_table }
  
  ${ credit_card_debt.add_action() }
continue button field: credit_card_debt.review_items
---
id: credit_card_debt.revisit
continue button field: credit_card_debt.revisit
question: |
  Edit your credit card debt
subquestion: |
  ${ credit_card_debt_table }

  ${ credit_card_debt.add_action() }
---
id: credit_card_debt_table
table: credit_card_debt_table
rows: credit_card_debt
columns:
  - Card holder: |
      row_item.display_name
  - Company: |
      row_item.lender
  - Balance owed: |
      currency(row_item.balance) if defined("row_item.balance") else ""
  - Monthly payment: |
      currency(row_item.monthly_payment) if defined("row_item.monthly_payment") else ""
  - Amount paid per month: |
      "You pay in full" if row_item.self_payment else "You pay " + currency(row_item.paid_by_self_monthly) + "\n Others pay "  + currency(row_item.paid_by_other_monthly)
edit:
  - source
  - lender
  - monthly_payment
  - self_payment
  - balance
---
id: other_debt object
objects:
  - other_debt: ALAssetList.using(complete_attribute='complete',there_is_another=False)
---
id: is there other debt
question: Other debt
fields:
  - Do you have any other debt?: other_debt.there_are_any
    datatype: yesnoradio
  - note: |
      Examples of other debts are hospital bills, collection accounts and tax liens.
---
id: other_debt complete
code: |
  other_debt[i].lender
  if not other_debt[i].self_payment:
    other_debt[i].paid_by_other_monthly
  other_debt[i].complete = True
---
id: other_debt display name
code: |
  other_debt[i].display_name = other_debt[i].source
---
id: info for each other_debt loans
question: |
  About your other debt
fields:
  - Type of debt: other_debt[i].source
  - Company/Entity owed: other_debt[i].lender
  - Balance owed: other_debt[i].balance
    datatype: currency
  - Monthly payment set by the lender or creditor -- if any: other_debt[i].monthly_payment
    datatype: currency
  - Are YOU paying this in full?: other_debt[i].self_payment
    datatype: yesnoradio
  - note: |
      Don't have an official monthly payment? Look back over the last 12 months and enter an average monthly payment.
validation code: |
  other_debt[i].value = other_debt[i].monthly_payment
  other_debt[i].times_per_year = 12
---
id: want to add more other debt
reconsider: 
 - other_debt.total_monthly_self_payment
 - other_debt.total_monthly_other_payment
question: Do you want to list any other debt?
subquestion: |
  The total for the monthly debt expenses below is **${ currency(other_debt.total_other_attribute(attribute="monthly_payment",times_per_year=12)) }** and you pay **${ currency(other_debt.total_monthly_self_payment) }.** and others pay **${ currency(other_debt.total_monthly_other_payment) }**.
  
  Tap Next if you don't have more to add.
  
  ${ other_debt_table }
  
  ${ other_debt.add_action() }
continue button field: other_debt.review_items
---
id: other_debt.revisit
continue button field: other_debt.revisit
question: |
  Edit your other debt
subquestion: |
  ${ other_debt_table }

  ${ other_debt.add_action() }
---
id: other_debt_table
table: other_debt_table
rows: other_debt
columns:
  - Type of Debt: |
      row_item.source
  - Company/Entity Owed: |
      row_item.lender
  - Balance owed: |
      currency(row_item.balance) if defined("row_item.balance") else ""
  - Monthly Payment: |
      currency(row_item.monthly_payment) if defined("row_item.monthly_payment") else ""
  - Amount paid per month: |
      "You pay in full" if row_item.self_payment else "You pay " + currency(row_item.paid_by_self_monthly) + "\n Others pay "  + currency(row_item.paid_by_other_monthly)
edit:
  - source
  - lender
  - monthly_payment
  - self_payment
  - balance
---
############################# SIGNATURE #############################
---
id: User signature
question: |
  User signature
continue button field: User_signature
---
id: signature choice
decoration: file-signature
question: |
  Your documents are almost ready
subquestion: |
  How do you want to sign them?
fields: 
  - I will sign: signature_choice
    input type: radio
    choices:
      - On my computer or phone: this_device
    show if:
      code: |
        al_form_requires_digital_signature
  - I will sign: signature_choice
    input type: radio
    choices:
      - On my computer or phone: this_device
      - On the paper with a pen after I print the documents: sign_after_printing
    show if:
      code: |
        not al_form_requires_digital_signature
continue button field: saw_signature_choice    
---

##################### PREVIEW SCREEN #######################
---
id: preview VT_813A
question: |
  Preview your form before you sign it
subquestion: |


  Here is a preview of the form you will sign on the next page. 
  
  ${ al_court_bundle.as_pdf(key='preview') }

  Click the image to open it in a new tab. Click the "Edit your answers" button
  to edit your answers. **Do not edit the PDF itself.** Use the Edit your answers button.

  ${ action_button_html(url_action('review_VT_813'), label='<i class="fa-solid fa-pencil"></i> Edit your answers', color='info') }
  
  **Remember to come back to this window to continue and sign your form.**
continue button field: VT_813A_preview_question    
---
code: |
  signature_fields = ['users[0].signature']
---
code: |
  # This is a placeholder for the addresses that will be searched
  # for matching address to court. Edit if court venue is based on 
  # a different address than the user's
  addresses_to_search = [user.address for user in users]
  
  
  

##################### REVIEW SCREEN #######################
---
id: VT 813 review screen
event: review_VT_813
question: |
  Review your answers
subquestion: |  
  ${ review_screen_instructions }


  
review:      
  - note: |
      ###About you
  - Edit: users[0].name.first
    button: |
      **Your name**: ${ users[0].name.full() }
  - Edit: users[0].address.address
    button: |
      **Address**: ${ users[0].address.on_one_line() }
      
      % if users1_mailing_address_different:
      **Mailing Address**: ${ users[0].mailing_address.on_one_line() }
      % endif
  - Edit: users[0].email
    button: |
      **Daytime phone number**: ${ users[0].daytime_phone_number }
      
      **Evening phone number**: ${ users[0].evening_phone_number }
      
      **Email**: ${ users[0].email }
  - Edit: users[0].birthdate
    button: |
      **Birthdate**:
      ${ users[0].birthdate }

  - note: |
     ###Your court case      
  - Edit: 
    - user_selected_county
    - recompute:
      - trial_court_index
      - trial_court
    button: |
      % if defined("user_selected_county"):
      **Is in family court in this county**: ${ user_selected_county }
      % else:
      **Is in family court in this county**: No county selected
      % endif

  - Edit: docket_number
    button: |
      **Case number**:
      % if dont_know_docket_number:
      Unknown
      % else:
      ${ showifdef("docket_number") }
      % endif

  - Edit: user_ask_role
    button: |
      **Case name**:
      % if user_ask_role == "plaintiff":
      ${ users[0] } v. ${ other_parties[0] }
      % else:
      ${ other_parties[0] } v. ${ users[0] }
      % endif
      
      **Your role in court case**:
      ${ user_ask_role }
  - Edit:
      - other_parties[0].name.first
    button: |
      **Other party**: ${ other_parties[0].name.full() }
      
      **Birthdate**: ${ other_parties[0].birthdate }

  - note: |
      ###Children

  - Edit: 
      - shared_children.revisit
      - undefine:
        - supported_children
        - children_income
      - recompute:
        - supported_children.gathered
        - children_income.gathered
      - follow up:
        - extraordinary_expenses
        - out_of_pocket_costs
        

    button: |
      **Children from this relationship**
      
      % for child in shared_children:
      * ${ child.name.full() } - Birthdate: ${ child.birthdate }
      % endfor
      % if len(shared_children) == 0:
      - None
      % endif

  - Edit: 
      - other_children.revisit
      - undefine:
        - supported_children
      - recompute:
        - supported_children.gathered
    button: |
      **Other children that you support**
      
      % for child in other_children:
      * ${ child.name.full() } - Birthdate: ${ child.birthdate }
      % endfor
      % if len(other_children) == 0:
      - None
      % endif

  - note: |
      ###Income

      
  - Edit: 
      - public_benefits.revisit
    button: |
      **Public assistance**
      
      % for benefit in public_benefits.complete_elements():
      * ${ benefit.display_name }
      % endfor
      % if len(public_benefits) == 0:
      - None
      % endif

  - Edit:
      - invalidate:
          - why_unemployed
          - is_self_employed
          - has_schedule_c
          - self_employed_net_income
          - net_income_order
          - self_employed_expenses_monthly_amount
          - self_employed_net_income_monthly_amount
          - jobs
          - review_jobs
      - employed
      - recompute:
        - single_jobs_attribute
        - jobs_order
    button: |
      **Work**
      
      % if employed:
      * You get income from working.
      % else:
      * You do not get income from working. You are unemployed because: ${ why_unemployed }.
      % endif
  - Edit: review_jobs
    button: |
      **Jobs**

      % for item in jobs:
      - ${ item.source }, ${ item.employer.name.first }
      
      % endfor
      % if len(jobs) == 0:
      - None

      % endif

  - Edit:
      - invalidate:
          - is_self_employed
          - self_empl_gross_sales_monthly_amount
          - has_schedule_c
          - self_employed_estimated_taxes_paid_feds
          - self_employed_estimated_taxes_paid_state
          - self_employed_net_income
          - self_employed_expenses_monthly_amount
          - self_employed_net_income_monthly_amount
          - self_empl_cgs
          - self_empl_office
          - self_empl_employees
          - self_empl_auto
          - self_empl_travel
          - self_empl_common_exp
          - self_empl_other_insurances
          - self_empl_other_expenses
          - self_empl_debts
          - net_income_order
      - is_self_employed
      - recompute:
        - jobs_order
    button: |
      **Self-employment**
      
      % if is_self_employed:
      - You are self-employed: ${ self_employed_description }

      % if has_schedule_c:
      - You have a Schedule C. You do not need to fill out the self-employment worksheet (seen on page 11 of the form).
      % else:
      - You do not have a Schedule C. You used the self employment worksheet (edit below).
      % endif
      % else:
      - You are not self-employed.
      % endif   

  - Edit: 
      - self_employed_estimated_taxes_paid_feds
    button: |
      **Estimated taxes you paid on your self-employed income**

      % if defined("self_employed_estimated_taxes_paid_feds") and self_employed_estimated_taxes_paid_feds > 0:
      - Federal estimated taxes
      % endif
      
      % if defined("self_employed_estimated_taxes_paid_state") and self_employed_estimated_taxes_paid_state > 0:
      - State estimated taxes 
      % endif

  - note: |
      % if is_self_employed and not has_schedule_c:
      ###Self-employment worksheet
      % endif
  - Edit: self_empl_gross_sales_monthly_amount
    button: |
      **Monthly gross sales**:
      ${ currency(self_empl_gross_sales_monthly_amount) }
  - Edit: self_empl_cgs[0].value
    button: |
      **Cost of goods sold**:
      ${ currency(self_empl_cgs[0].value) }

  - Edit: self_empl_office[0].value
    button: |
      **Office and equipment expenses**:
      
      % for item in self_empl_office:
      * ${ item.source }: ${ currency(item.value) }
      % endfor
  - Edit: self_empl_employees[0].value
    button: |
      **Employee expenses**:
      
      % for item in self_empl_employees:
      * ${ item.source }: ${ currency(item.value) }
      % endfor
  - Edit: self_empl_auto[0].value
    button: |
      **Auto expenses**:
      
      % for item in self_empl_auto:
      * ${ item.source }: ${ currency(item.value) }
      % endfor
  - Edit: self_empl_travel[0].value
    button: |
      **Travel and meal expenses**:
      
      % for item in self_empl_travel:
      * ${ item.source }: ${ currency(item.value) }
      % endfor
  - Edit: self_empl_common_exp[0].value
    button: |
      **Other common expenses**:
      
      % for item in self_empl_common_exp:
      * ${ item.source }: ${ currency(item.value) }
      % endfor

  - Edit: self_empl_other_insurances[0].value
    button: |
      **Insurance**:
      
      % if self_empl_other_insurances[0].source != '':
      * ${ self_empl_other_insurances[0].source }: ${ currency(self_empl_other_insurances[0].value) }
      % else:
      * No other insurance.
      % endif
      % if self_empl_other_insurances[1].source != '':
      * ${ self_empl_other_insurances[1].source }: ${ currency(self_empl_other_insurances[1].value) }
      % else:
      
      % endif
  - Edit: self_empl_debts[0].value
    button: |
      **Bad debt, taxes and other interest expenses**:
      
      % for item in self_empl_debts:
      * ${ item.source }: ${ currency(item.value) }
      % endfor
  - Edit: self_empl_other_expenses[0].value
    button: |
      **Other expenses**:
      
      % for item in self_empl_other_expenses:
      * ${ item.source }: ${ currency(item.value) }
      % endfor 
      

  - note: |
      ###Other incomes       
  - Edit: 
      - other_incomes.revisit
      - recompute:
        - other_incomes.gathered
    button: |
      **Other incomes**

      % for income in other_incomes.complete_elements():
      * ${ income.display_name.lower() }
      % endfor

      % if len(other_incomes) == 0:
      - None
      % endif

  - Edit: 
      - invalidate:
          - has_schedule_e
          - schedule_e_income
      - has_schedule_e
    button: |
      % if defined("has_schedule_e"):
      **Rental income - IRS Schedule E**
      
      % if has_schedule_e:
      - You have a Schedule E. You do not need to fill out the rental income worksheet (seen on page 10 of the form).
      % else:
      - You do not have a Schedule E. You used the rental income worksheet (edit below).
      % endif
      % endif
      
  - note: |
      % if not has_schedule_e:
      ###Rental income worksheet
      % endif

  - Edit:
      - invalidate:
          - monthly_rental_income
      - rental_expenses.revisit
      - annual_rental_income
      - recompute:
        - monthly_rental_income
    button: |
      % if not has_schedule_e:
      % if rental_expenses.total(times_per_year=1) > 0:
      **Annual expenses**
      
      % for expense in rental_expenses:
      - ${ expense.display_name.lower() }: ${ currency(expense.total(times_per_year=1)) }
      % endfor
      % else:
      - None
      % endif


      **Annual rent received**
      
      - ${ currency(annual_rental_income) }
      % endif      
  - note: |
      ###Loans   

  - Edit: 
      - primary_residence_loans.revisit
      - recompute: 
        - primary_residence_loans.total_monthly_self_payment
      - household_expenses.revisit
    button: |
      **Primary residence loans**

      % for item in primary_residence_loans:
      * ${ item.display_name.lower() }
      % endfor
      % if primary_residence_loans.number_gathered() == 0:
      - None

      % endif
  - Edit: 
      - real_estate_loans.revisit
      - recompute: 
        - real_estate_loans.total_monthly_self_payment
    button: |
      **Other real estate loans**

      % for item in real_estate_loans:
      * ${ item.source.lower() }
      % endfor
      % if real_estate_loans.number_gathered() == 0:
      - None

      % endif
  - Edit: 
      - vehicle_loans.revisit
      - recompute: 
        - vehicle_loans.total_monthly_self_payment
    button: |
      **Vehicle loans**

      % for item in vehicle_loans:
      * ${ item.source }
      % endfor
      % if vehicle_loans.number_gathered() == 0:
      - None

      % endif
  - Edit: 
      - other_loans.revisit
      - recompute: 
        - other_loans.total_monthly_self_payment
    button: |
      **Other loans**

      % for item in other_loans:
      * ${ item.source }
      % endfor
      % if other_loans.number_gathered() == 0:
      - None

      % endif
  - note: |
      ###Debts    

  - Edit: 
      - credit_card_debt.revisit
      - recompute: 
        - credit_card_debt.total_monthly_self_payment
    button: |
      **Credit card debt**

      % for item in credit_card_debt:
      * ${ item.lender }
      % endfor
      % if credit_card_debt.number_gathered() == 0:
      - None

      % endif
  - Edit: 
      - other_debt.revisit
      - recompute: 
        - other_debt.total_monthly_self_payment
    button: |
      **Other debt**

      % for item in other_debt:
      * ${ item.source.lower() }
      % endfor
      % if other_debt.number_gathered() == 0:
      - None

      % endif
  - note: |
      ###Expenses 
  - Edit: childcare_subsidy
    button: |
      **Childcare costs for children with ${ other_parties[0].name.full() }**
    
      - Total cost of childcare each month: ${currency(total_monthly_childcare_costs) }
      
      - Any subsidy you get from the state to help pay each month: ${ currency(childcare_subsidy) }
  
  - Edit:
      - no_extraordinary_expenses
    button: |
      **Extraordinary expenseses for children with ${ other_parties[0].name.full() }**

      % if defined("uninsured_medical_expenses_kids") and uninsured_medical_expenses_kids:
      * ${ uninsured_medical_expenses_type } 
      % endif
      
      % if defined("educational_expenses_kids") and educational_expenses_kids:
      * ${ educational_expenses_type }
      % endif

      % if defined("specialneeds_expenses_kids") and specialneeds_expenses_kids:
      * ${ special_needs_expenses_type }
      % endif

      % if no_extraordinary_expenses:
      * None
      % endif
  - Edit: children_expenses.revisit
    button: |
      **Common children expenses**

      % for item in children_expenses:
      * ${ item.display_name.lower()  }
      % endfor
      % if children_expenses.number_gathered() == 0:
      - None

      % endif
  - Edit: household_expenses.revisit
    button: |
      **Household expenses**

      % for item in household_expenses:
      * ${ item.display_name.lower()  }
      % endfor
      % if household_expenses.number_gathered() == 0:
      - None

      % endif
  - Edit: vehicle_expenses.revisit
    button: |
      **Vehicle expenses**

      % for item in vehicle_expenses:
      * ${ item.display_name.lower()  }
      % endfor
      % if vehicle_expenses.number_gathered() == 0:
      - None

      % endif
  - Edit: healthcare_available
    button: |
      **Health insurance through work**
      
      % if healthcare_available:
      - You can get health insurance through your work.
      % else:
      - You cannot get health insurance through your work.
      % endif
      % if defined("enrolled") and enrolled:
      - You are enrolled.
      % endif
      % if defined("kids_enrolled") and kids_enrolled:
      - Your child/children are enrolled.
      % endif
      % if defined("health_insurance_paid"):
      - You pay this much each month: ${ currency(health_insurance_paid) }
      % endif
  - Edit: insurance_expenses.revisit
    button: |
      **Insurance expenses**

      % for item in insurance_expenses:
      * ${ item.display_name.lower()  }
      % endfor
      % if insurance_expenses.number_gathered() == 0:
      - None

      % endif
  - Edit: personal_expenses.revisit
    button: |
      **Personal expenses**

      % for item in personal_expenses:
      * ${ item.display_name.lower()  }
      % endfor
      % if personal_expenses.number_gathered() == 0:
      - None

      % endif

  - Edit: signature_date
    button: |
      **Date of signature for these forms**:
      ${ signature_date }

  - note: |
      **Select Resume, below, when you are done. It will take a moment to generate your form again.**
---
reconsider: monthly_rental_income
id: rental_expenses.revisit
continue button field: rental_expenses.revisit
question: |
  Edit rental business income and expenses
subquestion: |

  You said your annual rental income was ${ currency(annual_rental_income) }. [Click hear to edit.](${ url_action('annual_rental_income_revisit')})
  
  ${ rental_expenses_table }

  ${ rental_expenses.add_action() }

  Your total annual rental income is ${ currency(annual_rental_income - float(rental_expenses.total(times_per_year = 1)))} and your monthly rental income is ${ currency(monthly_rental_income)}.
---
id: rental_expenses_table
table: rental_expenses_table
rows: rental_expenses
columns:
  - Type: |
      row_item.display_name
  - Amount each year: |
      currency(row_item.total(times_per_year=1))
edit:
  - source
  - value
---
##################### DOWNLOAD SCREEN #####################
---
id: download VT_813A
event: VT_813A_download
question: |
  ${ download_screen_instructions_headline_one_form }
subquestion: |
  
  ${ download_screen_instructions_one_form }

  **Do not edit the PDF itself.** Use the Edit your answers button.

  ${ action_button_html(url_action('review_VT_813'), label='<i class="fa-solid fa-pencil"></i> Edit your answers', color='info') }

  <hr>
  
  <h4 style="margin-bottom: 18px;">Documents to download</h4>
  
  ${ al_user_bundle.download_list_html() }
  

  ${ al_user_bundle.send_button_html(show_editable_checkbox=False) }

  <hr>
  
  ${ download_screen_bottom_instructions }
  
  ${ collapse_template(not_seeing_email) }
  ${ collapse_template(log_out_when_done) }

progress: 100
---
##################### OVERFLOW + ADDENDUM #####################
---
attachment:
  variable name: vt_financial_form_813A_attachment.addendum
  docx template file: VT_813A_addendum.docx
---
reconsider: True
id: overflow fields
code: |
  vt_financial_form_813A_attachment.overflow_fields["jobs"].label = "Additional jobs"
  vt_financial_form_813A_attachment.overflow_fields["jobs"].overflow_trigger = 2
  vt_financial_form_813A_attachment.overflow_fields["jobs"].headers = [
    {'employer': "Employer"},    
    {'employer.address': "Employer address"},
  ]  
  
  vt_financial_form_813A_attachment.overflow_fields["shared_children"].label = "Shared children"
  vt_financial_form_813A_attachment.overflow_fields["shared_children"].overflow_trigger = 4
  vt_financial_form_813A_attachment.overflow_fields["shared_children"].headers = [
    {'name': "Name"},
    {'birthdate': "Birthdate"},
    {'address': "Address"},
  ]  
  
  vt_financial_form_813A_attachment.overflow_fields["other_children"].label = "Other children"
  vt_financial_form_813A_attachment.overflow_fields["other_children"].overflow_trigger = 3
  vt_financial_form_813A_attachment.overflow_fields["other_children"].headers = [
    {'name': "Name"},
    {'birthdate': "Birthdate"},
    {'relationship': "Relationship"},
    {'address': "Address"},
  ]  

  vt_financial_form_813A_attachment.overflow_fields["supported_children"].label = "Supported children"
  vt_financial_form_813A_attachment.overflow_fields["supported_children"].overflow_trigger = 3
  vt_financial_form_813A_attachment.overflow_fields["supported_children"].headers = [
    {'name': "Name"},
    {'child_support_amount': "Amount ordered"},
    {'child_support_paid': "Amount paid"},
    {'child_support_state': "State of order"},
    {'child_support_county': "County of order"},
  ]  

  vt_financial_form_813A_attachment.overflow_fields["real_estate_loans"].label = "Other real estate loans"
  vt_financial_form_813A_attachment.overflow_fields["real_estate_loans"].overflow_trigger = 2
  vt_financial_form_813A_attachment.overflow_fields["real_estate_loans"].headers = [
    {'lender': "Lender"},
    {'balance': "Amount owed"},
    {'monthly_payment': "Monthly payment"},
    {'self_payment': "You are paying this in full"},
  ]  

  vt_financial_form_813A_attachment.overflow_fields["vehicle_loans"].label = "Vehicle loans"
  vt_financial_form_813A_attachment.overflow_fields["vehicle_loans"].overflow_trigger = 3
  vt_financial_form_813A_attachment.overflow_fields["vehicle_loans"].headers = [
    {'source': "Year/make/model"},
    {'lender': "Lender"},
    {'balance': "Amount owed"},
    {'monthly_payment': "Monthly payment"},
    {'self_payment': "You are paying this in full"},
  ]  

  vt_financial_form_813A_attachment.overflow_fields["other_loans"].label = "Other real estate loans"
  vt_financial_form_813A_attachment.overflow_fields["other_loans"].overflow_trigger = 4
  vt_financial_form_813A_attachment.overflow_fields["other_loans"].headers = [
    {'source': "Description"},
    {'lender': "Lender"},
    {'balance': "Amount owed"},
    {'monthly_payment': "Monthly payment"},
    {'self_payment': "You are paying this in full"},
  ]  

  vt_financial_form_813A_attachment.overflow_fields["other_debt"].label = "Other debt"
  vt_financial_form_813A_attachment.overflow_fields["other_debt"].overflow_trigger = 4
  vt_financial_form_813A_attachment.overflow_fields["other_debt"].headers = [
    {'source': "Description"},
    {'lender': "Lender"},
    {'balance': "Amount owed"},
    {'monthly_payment': "Monthly payment"},
    {'self_payment': "You are paying this in full"},
  ]  


  vt_financial_form_813A_attachment.overflow_fields["personal_expenses"].label = "Misc. personal expenses"
  vt_financial_form_813A_attachment.overflow_fields["personal_expenses"].overflow_trigger = 0 + len(personal_expenses.matches(source=personal_expenses.sources(),exclude_source='other'))
  vt_financial_form_813A_attachment.overflow_fields["personal_expenses"].headers = [
    {'display_name': "Description"},
    {'value': "Amount"},
    {'times_per_year': "Paid this many times a year"},
    {'paid_by_other_monthly': "Monthly amount paid by someone else"},
  ] 

  vt_financial_form_813A_attachment.overflow_fields["children_expenses"].label = "Misc. children expenses"
  vt_financial_form_813A_attachment.overflow_fields["children_expenses"].overflow_trigger = 4 + len(children_expenses.matches(source=children_expenses.sources(),exclude_source='kids_other'))
  vt_financial_form_813A_attachment.overflow_fields["children_expenses"].headers = [
    {'display_name': "Description"},
    {'value': "Amount"},
    {'times_per_year': "Paid this many times a year"},
  ] 
  
  vt_financial_form_813A_attachment.overflow_fields.gathered = True
---
##################### ATTACHMENTS #####################
---
id: attachment objects
objects:
  - VT_financial_form_813a_post_interview_instructions: ALDocument.using(title="NEXT STEPS - Instructions for filing this form with the court", filename="VT_813A_next_steps.docx", enabled=True, has_addendum=False, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
  - vt_financial_form_813A_attachment: ALDocument.using(title="Financial Affidavit 813A", filename="VT_financial_form_813A.pdf", enabled=True, has_addendum=True, default_overflow_message=AL_DEFAULT_OVERFLOW_MESSAGE)
---
id: al_user_bundle objects
objects:
  - al_user_bundle: ALDocumentBundle.using(elements=[VT_financial_form_813a_post_interview_instructions,vt_financial_form_813A_attachment], filename="VT_813A.pdf_package.pdf", title="All forms to download for your records", enabled=True)
  - al_court_bundle: ALDocumentBundle.using(elements=[vt_financial_form_813A_attachment], filename="VT_financial_form_813A.pdf_package.pdf", title="All forms to download for your records", enabled=True)
---
id: attachments
attachments:
  - name: VT financial form 813A post interview instructions
    filename: VT_813A_next_steps
    variable name: VT_financial_form_813a_post_interview_instructions[i]        
    skip undefined: True
    docx template file: VT_813A_next_steps.docx
  - name: VT financial form 813A
    filename: vt_financial_form_813A.pdf     
    variable name: vt_financial_form_813A_attachment[i]        
    skip undefined: True
    pdf template file: VT_financial_form_813A.pdf
    fields:
      - "trial_court_county": |
          % if defined("user_selected_county"):
          ${ user_selected_county }
          % else:
          ${ }
          % endif
      - "docket_number": ${ docket_number } 
      - "case_name": |
          % if user_ask_role == "plaintiff":
          ${ users[0] } v. ${ other_parties[0] }
          % else:
          ${ other_parties[0] } v. ${ users[0] }
          % endif
      - "users1_name": |
          % if user_ask_role == "plaintiff":
          ${ users[0] }
          % else:
          ${ other_parties[0] }
          % endif
      - "users1_birthdate": |
          % if user_ask_role == "plaintiff":
          ${ format_date(users[0].birthdate, format='M/d/yyyy') }
          % else:
          ${ format_date(other_parties[0].birthdate, format='M/d/yyyy') }
          % endif
      - "other_parties1_name": |
          % if user_ask_role == "defendant":
          ${ users[0] }
          % else:
          ${ other_parties[0] }
          % endif
      - "other_parties1_birthdate": |
          % if user_ask_role == "defendant":
          ${ format_date(users[0].birthdate, format='M/d/yyyy') }
          % else:
          ${ format_date(other_parties[0].birthdate, format='M/d/yyyy') }
          % endif
      - "role_plaintiff": |
          ${ user_ask_role == "plaintiff" }
      - "role_defendant": |
          ${ user_ask_role == "defendant" }
      - "role_other": |
          ${ user_ask_role == "other" }
      - "user1_other_role": |
          ${  } 
      - "users1_name_full": |
          ${ users[0].name } 
      - "users1_address_line_one": |
          ${ users[0].address.line_one() } 
      - "users1_address_line_two": |
          ${ users[0].address.line_two() } 
      - "users1_mailing_address_line_one": |
          ${ users[0].mailing_address.line_one() } 
      - "users1_mailing_address_line_two": |
          ${ users[0].mailing_address.line_two() } 
      - "users1_daytime_phone_number": |
          ${ users[0].daytime_phone_number } 
      - "users1_evening_phone_number": ${ users[0].evening_phone_number } 
      - "users1_email": ${ users[0].email } 
      - "signature_date": ${ signature_date } 
      - "users1_signature": ${ users[0].signature_if_final(i) }
      - "users1_name_full__1": |
          ${ users[0].name.full() } 
      - "users1_employer_0_name": |
          ${ jobs[0].employer.name.first }, ${ jobs[0].employer.address.on_one_line() } 

      - "users1_employer_1_name": |
          ${ jobs[1].employer.name.first }, ${ jobs[1].employer.address.on_one_line() }  


      - "is_self_employed": ${ is_self_employed } 
      - "self_employed_employer_name": ${ self_employed_description } 
      - "employed_no": ${ not employed } 
      - "why_unemployed": ${ why_unemployed } 
      - "users1_income_wages_monthly_amount": |
          ${ "{:.2f}".format(jobs.total(source=['part time', 'full time'],times_per_year=12)) } 
      - "overtime_included_yes": |
          % if len(jobs) > 0:
          ${ overtime_included_any_job } 
          % endif
      - "overtime_included_no": |
          % if len(jobs) > 0:
          ${ not overtime_included_any_job } 
          % endif
      - "users1_income_tips_commissions_monthly_amount": |
          ${ "{:.2f}".format(jobs.total(source=['Tips', 'Commissions','Bonuses','Royalties'], times_per_year=12)) } 
      - "users1_income_self_employment_monthly_amount": |
          % if employed and is_self_employed and has_schedule_c:
          ${ "{:.2f}".format(self_employed_net_income/12) }
          % elif employed and is_self_employed and not has_schedule_c:
          ${ "{:.2f}".format(self_empl_gross_sales_monthly_amount - float(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ]))) }
          % else:
          0.00
          % endif
      - "users1_employer_paid_expenses_monthly_amount": |
          ${ "{:.2f}".format(jobs.total(source='expenses',times_per_year=12)) } 
      - "users1_income_employment_monthly_total": |
          % if employed and is_self_employed and has_schedule_c:
          ${ "{:.2f}".format(float(jobs.total(times_per_year=12)) + float(self_employed_net_income/12)) }
          % elif employed and is_self_employed and not has_schedule_c:
          ${ "{:.2f}".format(float(jobs.total(times_per_year=12)) + float(self_empl_gross_sales_monthly_amount - float(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ])))) }
          % else: 
          ${ "{:.2f}".format(jobs.total(times_per_year = 12)) }
          % endif
      - "users1_income_rental_monthly_amount": |
          % if rental_income and has_schedule_e:
          ${ "{:.2f}".format(schedule_e_income/12,symbol="") }
          % elif rental_income:
          ${ "{:.2f}".format((float(annual_rental_income) - float(rental_expenses.total(times_per_year=1)))/12,symbol="") }
          % else:
          0.00
          % endif
      - "users1_income_income_retirement_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['pension'], times_per_year=12)) } 
      - "users1_income_unemployment_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['unemployment income'], times_per_year=12)) } 
      - "users1_income_workers_comp_disability_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['worker comp'], times_per_year=12)) } 
      - "users1_income_social_security_description": |
          ${ other_incomes.matches(source=['social security'])[0].source_other } 
      - "users1_income_social_security_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['social security'], times_per_year=12)) } 
      - "users1_income_veterans_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['veteran'], times_per_year=12)) } 
      - "users1_income_interest_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['interest'], times_per_year=12)) } 
      - "users1_income_trust_annuit_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['trust'], times_per_year=12)) } 
      - "users1_income_gifts_prizes_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['gift'], times_per_year=12)) } 
      - "users1_income_alimony_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['alimony'], times_per_year=12)) } 
      - "users1_income_other_alimony_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['alimony other'], times_per_year=12)) } 
      - "users1_income_other_description": |
          ${ other_incomes.matches(source=['other'])[0].source_other } 
      - "users1_income_other_monthly_amount": |
          ${ "{:.2f}".format(other_incomes.total(source=['other'], times_per_year=12)) } 
      - "users1_other_incomes_total_monthly_amount": |
          % if rental_income and has_schedule_e:
          ${ "{:.2f}".format((float(schedule_e_income)/12 + float(other_incomes.total(times_per_year = 12))),symbol="") }
          % elif rental_income:
          ${ "{:.2f}".format((float(annual_rental_income) - float(rental_expenses.total(times_per_year=1)))/12 + float(other_incomes.total(times_per_year = 12)),symbol="") }
          % else:
          ${ "{:.2f}".format(other_incomes.total(times_per_year = 12)) } 
          % endif
      - "users1_income_monthly_total": |
          % if employed and is_self_employed and has_schedule_c and rental_income and has_schedule_e:
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + (float(self_employed_net_income/12)) + float(schedule_e_income/12)) }
          % elif employed and is_self_employed and has_schedule_c and rental_income:
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + (float(self_employed_net_income/12)) + (float(annual_rental_income) - float(rental_expenses.total(times_per_year=1)))/12) }        
          % elif employed and is_self_employed and not has_schedule_c and rental_income and has_schedule_e:          
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + float(self_empl_gross_sales_monthly_amount)  - float(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ]))+ schedule_e_income/12) }          
          % elif employed and is_self_employed and not has_schedule_c and rental_income:
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + float(self_empl_gross_sales_monthly_amount)  - float(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ]))  + (float(annual_rental_income) - float(rental_expenses.total(times_per_year=1)))/12) }
          % elif employed and is_self_employed and has_schedule_c:
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + (float(self_employed_net_income/12))) }     
          % elif employed and is_self_employed and not has_schedule_c:
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + float(self_empl_gross_sales_monthly_amount)  - float(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ]))) }
          % elif rental_income and has_schedule_e: 
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + schedule_e_income/12) }
          % elif rental_income: 
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12)) + (annual_rental_income - float(rental_expenses.total(times_per_year=1)))/12) }
          % else: 
          ${ "{:.2f}".format(float(other_incomes.total(times_per_year = 12)) + float(jobs.total(times_per_year = 12))) }
          % endif
          
      - "users1_receives_benefits_yes": |
          ${ len(public_benefits) > 0 } 
      - "users1_receives_benefits_no": |
          ${ len(public_benefits) == 0 } 
      - "users1_benefits_reach_up": |
          ${ len(public_benefits.matches(source=['reach_up'])) > 0 } 
      - "users1_benefits_reach_up_monthly_amount": |
          ${ "{:.2f}".format(public_benefits.total(source=['reach_up'], times_per_year=12)) } 
      - "users1_benefits_dr_dynasaur": |
          ${ len(public_benefits.matches(source=['dynasaur'])) > 0 } 
      - "users1_benefits_fuel_assistance": |
          ${ len(public_benefits.matches(source=['fuel_assist'])) > 0 } 
      - "users1_benefits_fuel_assistance_monthly_amount": |
          ${ "{:.2f}".format(public_benefits.total(source=['fuel_assist'], times_per_year=12)) } 
      - "users1_benefits_GA": |
          ${ len(public_benefits.matches(source=['ga'])) > 0 } 
      - "users1_benefits_GA_monthly_amount": |
          ${ "{:.2f}".format(public_benefits.total(source=['ga'], times_per_year=12)) } 
      - "users1_benefits_medicaid_medicare": |
          ${ len(public_benefits.matches(source=["medicaid"])) > 0 or len(public_benefits.matches(source=["medicare"])) > 0   }
      - "users1_benefits_3squaresvt": |
          ${ len(public_benefits.matches(source=['3squaresvt'])) > 0 } 
      - "users1_benefits_3squaresvt_monthly_amount": |
          ${ "{:.2f}".format(public_benefits.total(source=['3squaresvt'], times_per_year=12)) } 
      - "users1_benefits_ssi": |
          ${ len(public_benefits.matches(source=['ssi'])) > 0 } 
      - "users1_benefits_vhap": |
          ${ len(public_benefits.matches(source=['vhap'])) > 0 } 
      - "users1_benefits_housing_assistance": |
          ${ len(public_benefits.matches(source=['housing_assist'])) > 0 } 
      - "children1_name": |
          ${ shared_children[0].name.full() } 
      - "children1_birthdate": |
          ${ format_date(shared_children[0].birthdate, format='M/d/yyyy') }
      - "children1_address": |
          ${ shared_children[0].address.on_one_line() } 
      - "children2_name": |
         ${ shared_children[1].name.full() } 
      - "children2_birthdate": |
          ${ format_date(shared_children[1].birthdate, format='M/d/yyyy') }
      - "children2_address": |
          ${ shared_children[1].address.on_one_line() } 
      - "children3_name": |
          ${ shared_children[2].name.full() } 
      - "children3_birthdate": |
          ${ format_date(shared_children[2].birthdate, format='M/d/yyyy') }
      - "children3_address": |
          ${ shared_children[2].address.on_one_line() } 
      - "children4_name": |
          ${ shared_children[3].name.full() } 
      - "children4_birthdate": |
          ${ format_date(shared_children[3].birthdate, format='M/d/yyyy') }
      - "children4_address": |
          ${ shared_children[3].address.on_one_line() } 
      - "children_other1_name": |
          ${ other_children[0].name.full() } 
      - "children_other1_birthdate": |
          ${ format_date(other_children[0].birthdate, format='M/d/yyyy') }
      - "children_other1_relationship_users1": |
          ${ other_children[0].relationship } 
      - "children_other1_address": |
          ${ other_children[0].address.on_one_line() } 
      - "children_other2_name": |
          ${ other_children[1].name.full() } 
      - "children_other2_birthdate": |
          ${ format_date(other_children[1].birthdate, format='M/d/yyyy') }
      - "children_other2_relationship_users1": |
          ${ other_children[1].relationship } 
      - "children_other2_address": |
          ${ other_children[1].address.on_one_line() } 
      - "children_other3_name": |
          ${ other_children[2].name.full() } 
      - "children_other3_birthdate": |
          ${ format_date(other_children[2].birthdate, format='M/d/yyyy') }
      - "children_other3_relationship_users1": |
          ${ other_children[2].relationship } 
      - "children_other3_address": |
          ${ other_children[2].address.on_one_line() } 
      - "children_other4_name": |
          ${ other_children[3].name.full() }
      - "children_other4_birthdate": |
          ${ format_date(other_children[3].birthdate, format='M/d/yyyy') }
      - "children_other4_relationship_users1": |
          ${ other_children[3].relationship } 
      - "children_other4_address": |
          ${ other_children[3].address.on_one_line() } 
      - "children_supported1_name": |
          ${ supported_children[0].name.full() } 
      - "children_supported1_amount": |
          ${ "{:.2f}".format(supported_children[0].child_support_amount) } 
      - "children_supported1_paid": |
          ${ "{:.2f}".format(supported_children[0].child_support_paid) } 
      - "children_supported1_order_from": |
          % if supported_children[0].child_support_state == "VT":
          ${ supported_children[0].child_support_state }/${ supported_children[0].child_support_county }
          % else:
          ${ supported_children[0].child_support_state }
          % endif
      - "children_supported2_name": |
          ${ supported_children[1].name } 
      - "children_supported2_amount": |
          ${ "{:.2f}".format(supported_children[1].child_support_amount) } 
      - "children_supported2_paid": |
          ${ "{:.2f}".format(supported_children[1].child_support_paid) } 
      - "children_supported2_order_from": |
          % if supported_children[1].child_support_state == "VT":
          ${ supported_children[1].child_support_state }/${ supported_children[1].child_support_county }
          % else:
          ${ supported_children[1].child_support_state }
          % endif
      - "children_supported3_name": |
          ${ supported_children[2].name } 
      - "children_supported3_amount": |
          ${ "{:.2f}".format(supported_children[2].child_support_amount) } 
      - "children_supported3_paid": |
          ${ "{:.2f}".format(supported_children[2].child_support_paid) } 
      - "children_supported3_order_from": |
          % if supported_children[2].child_support_state == "VT":
          ${ supported_children[2].child_support_state }/${ supported_children[2].child_support_county }
          % else:
          ${ supported_children[2].child_support_state }
          % endif
      - "health_insurance_family_cost": |
          % if healthcare_available:
          ${ "{:.2f}".format(health_insurance_family_cost) }
          % endif
      - "health_insurance_2_person_cost": |
          % if healthcare_available:
          ${ "{:.2f}".format(health_insurance_2_person_cost) }
          % endif
      - "health_insurance_single_person_cost": |
          % if healthcare_available:
          ${ "{:.2f}".format(health_insurance_single_person_cost) }
          % endif
      - "health_insurance_kids_enrolled_yes": |
          % if healthcare_available and len(shared_children) > 0:
          ${ kids_enrolled } 
          % elif healthcare_available and len(other_children) > 0:
          ${ kids_enrolled } 
          % endif
      - "health_insurance_kids_enrolled_no": |
          % if healthcare_available and len(shared_children) > 0:
          ${ not kids_enrolled } 
          % elif healthcare_available and len(other_children) > 0:
          ${ not kids_enrolled } 
          % endif
      - "users1_expenses_child_care_monthly_amount": ${ "{:.2f}".format(total_monthly_childcare_costs) } 
      - "users1_expenses_child_care_subsidy_monthly_amount": |
          ${ "{:.2f}".format(childcare_subsidy) } 
      - "users1_expenses_child_care_net_monthly_amount": |
          ${ "{:.2f}".format(total_monthly_childcare_costs - childcare_subsidy) }
      - "users1_expenses_kids_medical_description": |
          ${ uninsured_medical_expenses_type } 
      - "users1_expenses_kids_medical_monthly_amount": |
          ${ "{:.2f}".format(uninsured_medical_expenses_amount) } 
      - "users1_expenses_kids_education_description": |
          ${ educational_expenses_type } 
      - "users1_expenses_kids_education_monthly_amount": |
          ${ "{:.2f}".format(educational_expenses_amount) } 
      - "users1_expenses_kids_specneeds_description": |
          ${ special_needs_expenses_type } 
      - "users1_expenses_kids_specneeds_monthly_amount": |
          ${ "{:.2f}".format(special_needs_expenses_amount) } 
      - "childrens_income_disability_name": |
          ${ comma_and_list(child.name.first for child in children_income.matches(source='disability'))}
      - "childrens_income_disability_monthly_amount": |
          ${ "{:.2f}".format(children_income.total(source = "disability", times_per_year = 12)) } 
      - "childrens_income_socsec_name": |
          ${ comma_and_list(child.name.first for child in children_income.matches(source='social security')) }
      - "childrens_income_socsec_monthly_amount": |
          ${ "{:.2f}".format(children_income.total(source = "social security", times_per_year = 12)) } 
      - "childrens_income_other_benefit_description": |
          ${ comma_and_list(child.source_other for child in children_income.matches(source=['other'])) } 
      - "childrens_income_other_benefit_name": |
          ${ comma_and_list(child.name.first for child in children_income.matches(source='other')) }
      - "childrens_income_other_benefit_monthly_amount": |
          ${ "{:.2f}".format(children_income.total(source=['other'], times_per_year=12)) } 
      - "parent_name_gets_children_benefits": |
          ${ children_income.parents } 
      - "users1_assets_real_estate_primary_res_lender": |
          ${ primary_residence_loans.matches(source=['primary'])[0].lender } 
      - "users1_assets_real_estate_primary_res_amount_owed": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(source='primary', attribute='balance')) } 
      - "users1_assets_real_estate_primary_res_payment": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(source='primary', attribute='monthly_payment')) } 
      - "users1_assets_real_estate_primary_res_self_paid": |
          ${ primary_residence_loans.matches(source=['primary'])[0].self_payment } 
      - "users1_assets_real_estate_2nd_mortgage_lender": |
          ${ primary_residence_loans.matches(source=['second'])[0].lender } 
      - "users1_assets_real_estate_2nd_mortgage_amount_owed": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(source='second', attribute='balance')) } 
      - "users1_assets_real_estate_2nd_mortgage_payment": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(source='second', attribute='monthly_payment')) } 
      - "users1_assets_real_estate_2nd_mortgage_self_paid": |
          ${ primary_residence_loans.matches(source=['second'])[0].self_payment } 
      - "users1_assets_real_estate_home_eq_loan_lender": |
          ${ primary_residence_loans.matches(source=['home_equity'])[0].lender } 
      - "users1_assets_real_estate_home_eq_loan_amount_owed": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(source='home_equity', attribute='balance')) } 
      - "users1_assets_real_estate_home_eq_loan_payment": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(source='home_equity', attribute='monthly_payment')) } 
      - "users1_assets_real_estate_home_eq_loan_self_paid": |
          ${ primary_residence_loans.matches(source=['home_equity'])[0].self_payment } 
      - "users1_assets_real_estate_home_loans_total_lender": ""
      - "users1_assets_real_estate_home_loans_total_amount_owed": |
          ${ "{:.2f}".format(primary_residence_loans.balance()) } 
      - "users1_assets_real_estate_home_loans_total_payment": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(attribute='monthly_payment')) } 
      - "users1_assets_real_estate_other_loan1_description": |
          ${ real_estate_loans[0].source } 
      - "users1_assets_real_estate_other_loan1_lender": |
          ${ real_estate_loans[0].lender } 
      - "users1_assets_real_estate_other_loan1_amount_owed": |
          ${ "{:.2f}".format(real_estate_loans[0].balance) } 
      - "users1_assets_real_estate_other_loan1_payment": |
          ${ "{:.2f}".format(real_estate_loans[0].monthly_payment) } 
      - "users1_assets_real_estate_other_loan1_self_paid": |
          ${ real_estate_loans[0].self_payment } 
      - "users1_assets_real_estate_other_loan2_description": |
          ${ real_estate_loans[1].source } 
      - "users1_assets_real_estate_other_loan2_lender": |
          ${ real_estate_loans[1].lender } 
      - "users1_assets_real_estate_other_loan2_amount_owed": |
          ${ "{:.2f}".format(real_estate_loans[1].balance) } 
      - "users1_assets_real_estate_other_loan2_payment": |
          ${ "{:.2f}".format(real_estate_loans[1].monthly_payment) } 
      - "users1_assets_real_estate_other_loan2_self_paid": |
          ${ real_estate_loans[1].self_payment } 
      - "users1_assets_real_estate_other_loans_total_lender": ""
      - "users1_assets_real_estate_other_loans_total_amount_owed": |
          ${ "{:.2f}".format(real_estate_loans.balance()) } 
      - "users1_assets_real_estate_other_loans_total_payment": |
          ${ "{:.2f}".format(real_estate_loans.total_other_attribute(attribute='monthly_payment')) } 
      - "users1_assets_vehicle_1_description": |
          ${ vehicle_loans[0].source } 
      - "users1_assets_vehicle_1_lender": |
          ${ vehicle_loans[0].lender } 
      - "users1_assets_vehicle_1_description_amount_owed": |
          ${ "{:.2f}".format(vehicle_loans[0].balance) } 
      - "users1_assets_vehicle_1_payment": |
          ${ "{:.2f}".format(vehicle_loans[0].monthly_payment) } 
      - "users1_assets_vehicle_0_self_paid": |
          ${ vehicle_loans[0].self_payment } 
      - "users1_assets_vehicle_2_description": |
          ${ vehicle_loans[1].source }
      - "users1_assets_vehicle_2_lender": |
          ${ vehicle_loans[1].lender } 
      - "users1_assets_vehicle_2_amount_owed": |
          ${ "{:.2f}".format(vehicle_loans[1].balance) } 
      - "users1_assets_vehicle_2_payment": |
          ${ "{:.2f}".format(vehicle_loans[1].monthly_payment) } 
      - "users1_assets_vehicle_1_self_paid": |
          ${ vehicle_loans[1].self_payment } 
      - "users1_assets_vehicle_3_description": |
          ${ vehicle_loans[2].source } 
      - "users1_assets_vehicle_3_lender": |
          ${ vehicle_loans[2].lender } 
      - "users1_assets_vehicle_3_amount_owed": |
          ${ "{:.2f}".format(vehicle_loans[2].balance) } 
      - "users1_assets_vehicle_3_payment": |
          ${ "{:.2f}".format(vehicle_loans[2].monthly_payment) } 
      - "users1_assets_vehicle_3_self_paid": |
          ${ vehicle_loans[2].self_payment } 
      - "users1_assets_vehicles_total_lender": ""
      - "users1_assets_vehicles_total_amount_owed": |
          ${ "{:.2f}".format(vehicle_loans.balance()) } 
      - "users1_assets_vehicles_total_payment": |
          ${ "{:.2f}".format(vehicle_loans.total_other_attribute(attribute='monthly_payment')) } 
      - "users1_assets_vehicles_total_self_paid": ""
      - "users1_personal_loan_1_lender": |
          ${ other_loans.matches(source=['personal'])[0].lender } 
      - "users1_personal_loan_1_amount_owed": |
          ${ "{:.2f}".format(other_loans.matches(source=['personal'])[0].balance) } 
      - "users1_personal_loan_1_payment": |
          ${ "{:.2f}".format(other_loans.matches(source=['personal'])[0].monthly_payment) } 
      - "users1_personal_loan_1_self_paid": |
          ${ other_loans.matches(source=['personal'])[0].self_payment } 
      - "users1_personal_loan_2_lender": |
          ${ other_loans.matches(source=['school'])[0].lender } 
      - "users1_personal_loan_2_amount_owed": |
          ${ "{:.2f}".format(other_loans.matches(source=['school'])[0].balance) } 
      - "users1_personal_loan_2_payment": |
          ${ "{:.2f}".format(other_loans.matches(source=['school'])[0].monthly_payment) } 
      - "users1_personal_loan_2_self_paid": |
          ${ other_loans.matches(source=['school'])[0].self_payment } 
      - "users1_personal_loan_3_lender": |
          ${ other_loans.matches(source=['other'])[0].lender } 
      - "users1_personal_loan_3_amount_owed": |
          ${ "{:.2f}".format(other_loans.matches(source=['other'])[0].balance) } 
      - "users1_personal_loan_3_payment": |
          ${ "{:.2f}".format(other_loans.matches(source=['other'])[0].monthly_payment) } 
      - "users1_personal_loan_3_self_paid": |
          ${ other_loans.matches(source=['other'])[0].self_payment } 
      - "users1_personal_loan_4_lender": |
          ${ other_loans.matches(source=['other'])[1].lender } 
      - "users1_personal_loan_4_amount_owed": |
          ${ "{:.2f}".format(other_loans.matches(source=['other'])[1].balance) } 
      - "users1_personal_loan_4_payment": |
          ${ "{:.2f}".format(other_loans.matches(source=['other'])[1].monthly_payment) } 
      - "users1_personal_loan_4_self_paid": |
          ${ other_loans.matches(source=['other'])[1].self_payment } 
      - "users1_personal_loans_total_lender": ""
      - "users1_personal_loans_total_amount_owed": |
          ${ "{:.2f}".format(other_loans.balance()) } 
      - "users1_personal_loans_total_payment": |
          ${ "{:.2f}".format(other_loans.total_other_attribute(attribute='monthly_payment')) } 
      - "users1_credit_card_debt_1_name": |
          ${ credit_card_debt[0].display_name } 
      - "users1_credit_card_debt_1_lender": |
          ${ credit_card_debt[0].lender } 
      - "users1_credit_card_debt_1_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt[0].balance) } 
      - "users1_credit_card_debt_1_payment": |
          ${ "{:.2f}".format(credit_card_debt[0].monthly_payment) } 
      - "users1_credit_card_debt_1_self_paid": |
          ${ credit_card_debt[0].self_payment } 
      - "users1_credit_card_debt_2_name": |
          ${ credit_card_debt[1].display_name } 
      - "users1_credit_card_debt_2_lender": |
          ${ credit_card_debt[1].lender } 
      - "users1_credit_card_debt_2_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt[1].balance) } 
      - "users1_credit_card_debt_2_payment": |
          ${ "{:.2f}".format(credit_card_debt[1].monthly_payment) } 
      - "users1_credit_card_debt_2_self_paid": |
          ${ credit_card_debt[1].self_payment } 
      - "users1_credit_card_debt_3_name": |
          ${ credit_card_debt[2].display_name } 
      - "users1_credit_card_debt_3_lender": |
          ${ credit_card_debt[2].lender } 
      - "users1_credit_card_debt_3_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt[2].balance) } 
      - "users1_credit_card_debt_3_payment": |
          ${ "{:.2f}".format(credit_card_debt[2].monthly_payment) } 
      - "users1_credit_card_debt_3_self_paid": |
          ${ credit_card_debt[2].self_payment } 
      - "users1_credit_card_debt_4_name": |
          ${ credit_card_debt[3].display_name } 
      - "users1_credit_card_debt_4_lender": |
          ${ credit_card_debt[3].lender } 
      - "users1_credit_card_debt_4_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt[3].balance) } 
      - "users1_credit_card_debt_4_payment": |
          ${ "{:.2f}".format(credit_card_debt[3].monthly_payment) } 
      - "users1_credit_card_debt_4_self_paid": |
          ${ credit_card_debt[3].self_payment } 
      - "users1_credit_card_debt_5_name": |
          ${ credit_card_debt[4].display_name } 
      - "users1_credit_card_debt_5_lender": |
          ${ credit_card_debt[4].lender } 
      - "users1_credit_card_debt_5_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt[4].balance) } 
      - "users1_credit_card_debt_5_payment": |
          ${ "{:.2f}".format(credit_card_debt[4].monthly_payment) } 
      - "users1_credit_card_debt_5_self_paid": |
          ${ credit_card_debt[4].self_payment } 
      - "users1_credit_card_debt_6_name": |
          ${ credit_card_debt[5].display_name } 
      - "users1_credit_card_debt_6_lender": |
          ${ credit_card_debt[5].lender } 
      - "users1_credit_card_debt_6_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt[5].balance) } 
      - "users1_credit_card_debt_6_payment": |
          ${ "{:.2f}".format(credit_card_debt[5].monthly_payment) } 
      - "users1_credit_card_debt_6_self_paid": |
          ${ credit_card_debt[5].self_payment } 
      - "users1_credit_card_debt_total_lender": ""
      - "users1_credit_card_debt_total_amount_owed": |
          ${ "{:.2f}".format(credit_card_debt.balance()) } 
      - "users1_credit_card_debt_total_payment": |
          ${ "{:.2f}".format(credit_card_debt.total_other_attribute(attribute='monthly_payment')) } 
      - "users1_credit_card_debt_total_self_paid": ""
      - "users1_other_debt_1_description": |
          ${ other_debt[0].source } 
      - "users1_other_debt_1_lender": |
          ${ other_debt[0].lender } 
      - "users1_other_debt_1_amount_owed": |
          ${ "{:.2f}".format(other_debt[0].balance) } 
      - "users1_other_debt_1_payment": |
          ${ "{:.2f}".format(other_debt[0].monthly_payment) } 
      - "users1_other_debt_1_self_paid": |
          ${ other_debt[0].self_payment } 
      - "users1_other_debt_2_description": |
          ${ other_debt[1].source } 
      - "users1_other_debt_2_lender": |
          ${ other_debt[1].lender } 
      - "users1_other_debt_2_amount_owed": |
          ${ "{:.2f}".format(other_debt[1].balance) } 
      - "users1_other_debt_2_payment": |
          ${ "{:.2f}".format(other_debt[1].monthly_payment) } 
      - "users1_other_debt_2_self_paid": |
          ${ other_debt[1].self_payment } 
      - "users1_other_debt_total_lender": ""
      - "users1_other_debt_total_amount_owed": |
          ${ "{:.2f}".format(other_debt.balance()) } 
      - "users1_other_debt_total_payment": |
          ${ "{:.2f}".format(other_debt.total_other_attribute(attribute='monthly_payment')) } 
      - "users1_expenses_rent_mortgage_self_paid": |
          ${ "{:.2f}".format(primary_residence_loans.total_monthly_self_payment+float(household_expenses.total(source='rent', times_per_year=12) -household_expenses.total_other_attribute(source='rent', attribute='paid_by_other_monthly'))) } 
      - "users1_expenses_rent_mortgage_other_paid": |
          ${ "{:.2f}".format(primary_residence_loans.total_monthly_other_payment+float(household_expenses.total_other_attribute(source='rent', attribute='paid_by_other_monthly'))) } 
      - "users1_expenses_rent_mortgage_monthly_amount": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)+household_expenses.total(source=['rent'], times_per_year=12)) } 
      - "users1_expenses_property_tax_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='property_tax', times_per_year=12) -household_expenses.total_other_attribute(source='property_tax', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_property_tax_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='property_tax', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_property_tax_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['property_tax'], times_per_year=12)) } 
      - "users1_expenses_home_insurance_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='home_insurance', times_per_year=12) -household_expenses.total_other_attribute(source='home_insurance', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_home_insurance_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='home_insurance', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_home_insurance_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['home_insurance'], times_per_year=12)) } 
      - "users1_expenses_electric_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='electric', times_per_year=12) -household_expenses.total_other_attribute(source='electric', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_electric_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='electric', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_electric_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['electric'], times_per_year=12)) } 
      - "users1_expenses_phone_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='phone', times_per_year=12) -household_expenses.total_other_attribute(source='phone', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_phone_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='phone', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_phone_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['phone'], times_per_year=12)) } 
      - "users1_expenses_water_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='water', times_per_year=12) -household_expenses.total_other_attribute(source='water', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_water_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='water', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_water_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['water'], times_per_year=12)) } 
      - "users1_expenses_gas_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='gas', times_per_year=12) -household_expenses.total_other_attribute(source='gas', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_gas_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='gas', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_gas_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['gas'], times_per_year=12)) } 
      - "users1_expenses_fuel_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='fuel', times_per_year=12) -household_expenses.total_other_attribute(source='fuel', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_fuel_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='fuel', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_fuel_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['fuel'], times_per_year=12)) } 
      - "users1_expenses_mowplowtrash_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='mowplowtrash', times_per_year=12) -household_expenses.total_other_attribute(source='mowplowtrash', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_mowplowtrash_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='mowplowtrash', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_mowplowtrash_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['mowplowtrash'], times_per_year=12)) } 
      - "users1_expenses_food_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='food', times_per_year=12) -household_expenses.total_other_attribute(source='food', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_food_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='food', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_food_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['food'], times_per_year=12)) } 
      - "users1_expenses_cableinternet_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='cableinternet', times_per_year=12) -household_expenses.total_other_attribute(source='cableinternet', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_cableinternet_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='cableinternet', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_cableinternet_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['cableinternet'], times_per_year=12)) } 
      - "users1_expenses_laundry_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='laundry', times_per_year=12) -household_expenses.total_other_attribute(source='laundry', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_laundry_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='laundry', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_laundry_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['laundry'], times_per_year=12)) } 
      - "users1_expenses_repairs_self_paid": |
          ${ "{:.2f}".format(household_expenses.total(source='repairs', times_per_year=12) -household_expenses.total_other_attribute(source='repairs', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_repairs_other_paid": |
          ${ "{:.2f}".format(household_expenses.total_other_attribute(source='repairs', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_repairs_monthly_amount": |
          ${ "{:.2f}".format(household_expenses.total(source=['repairs'], times_per_year=12)) } 
      - "users1_expenses_total_self_paid": |
          ${ "{:.2f}".format(primary_residence_loans.total_monthly_self_payment+float(household_expenses.total(times_per_year=12) -household_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) } 
      - "users1_expenses_total_other_paid": |
          ${ "{:.2f}".format(primary_residence_loans.total_monthly_other_payment+float(household_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) } 
      - "users1_expenses_total_monthly_amount": |
          ${ "{:.2f}".format(primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)+household_expenses.total(times_per_year = 12)) } 
      - "users1_assets_vehicles_total_payment_self_paid_1": |
          ${ "{:.2f}".format(vehicle_loans.total_monthly_self_payment) } 
      - "users1_assets_vehicles_total_payment_other_paid_1": |
          ${ "{:.2f}".format(vehicle_loans.total_monthly_other_payment) } 
      - "users1_assets_vehicles_total_payment_1": |
          ${ "{:.2f}".format(vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) } 
      - "users1_expenses_auto_insur_self_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total(source='auto_insur', times_per_year=12) -vehicle_expenses.total_other_attribute(source='auto_insur', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_insur_other_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total_other_attribute(source='auto_insur', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_insur_monthly_amount": |
          ${ "{:.2f}".format(vehicle_expenses.total(source=['auto_insur'], times_per_year=12)) } 
      - "users1_expenses_auto_gas_self_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total(source='auto_gas', times_per_year=12) -vehicle_expenses.total_other_attribute(source='auto_gas', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_gas_other_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total_other_attribute(source='auto_gas', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_gas_monthly_amount": |
          ${ "{:.2f}".format(vehicle_expenses.total(source=['auto_gas'], times_per_year=12)) } 
      - "users1_expenses_auto_maint_self_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total(source='auto_maint', times_per_year=12) -vehicle_expenses.total_other_attribute(source='auto_maint', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_maint_other_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total_other_attribute(source='auto_maint', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_maint_monthly_amount": |
          ${ "{:.2f}".format(vehicle_expenses.total(source=['auto_maint'], times_per_year=12)) } 
      - "users1_expenses_auto_reg_self_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total(source='auto_reg', times_per_year=12) -vehicle_expenses.total_other_attribute(source='auto_reg', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_reg_other_paid": |
          ${ "{:.2f}".format(vehicle_expenses.total_other_attribute(source='auto_reg', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_auto_reg_monthly_amount": |
          ${ "{:.2f}".format(vehicle_expenses.total(source=['auto_reg'], times_per_year=12)) } 
      - "users1_expenses_auto_total_self_paid": |
          ${ "{:.2f}".format(vehicle_loans.total_monthly_self_payment+float(vehicle_expenses.total(times_per_year=12) -vehicle_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) } 
      - "users1_expenses_auto_total_other_paid": |
          ${ "{:.2f}".format(vehicle_loans.total_monthly_other_payment+float(vehicle_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) } 
      - "users1_expenses_auto_total_monthly_amount": |
          ${ "{:.2f}".format(vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)+vehicle_expenses.total(times_per_year = 12)) } 
      - "users1_expenses_insur_life_self_paid": |
          ${ "{:.2f}".format(insurance_expenses.total(source=['insur_life'],times_per_year=12) -insurance_expenses.total_other_attribute(source=['insur_life'],attribute='paid_by_other_monthly')) } 
      - "users1_expenses_insur_life_other_paid": |
          ${ "{:.2f}".format(insurance_expenses.total_other_attribute(source=['insur_life'],attribute='paid_by_other_monthly')) } 
      - "users1_expenses_insur_life_monthly_amount": |
          ${ "{:.2f}".format(insurance_expenses.total(source=['insur_life'], times_per_year=12)) } 
      - "users1_expenses_insur_disab_self_paid": |
          ${ "{:.2f}".format(insurance_expenses.total(source=['insur_disab'],times_per_year=12) -insurance_expenses.total_other_attribute(source=['insur_disab'],attribute='paid_by_other_monthly')) } 
      - "users1_expenses_insur_disab_other_paid": |
          ${ "{:.2f}".format(insurance_expenses.total_other_attribute(source=['insur_disab'],attribute='paid_by_other_monthly')) } 
      - "users1_expenses_insur_disab_monthly_amount": |
          ${ "{:.2f}".format(insurance_expenses.total(source=['insur_disab'], times_per_year=12)) } 
      - "users1_expenses_insur_health_self_paid": |
          ${ "{:.2f}".format(float(insurance_expenses.total(source=['insur_health'],times_per_year=12) -insurance_expenses.total_other_attribute(source=['insur_health'],attribute='paid_by_other_monthly'))+ health_insurance_paid) } 
      - "users1_expenses_insur_health_other_paid": |
          ${ "{:.2f}".format(float(insurance_expenses.total_other_attribute(source=['insur_health'],attribute='paid_by_other_monthly')) + health_insurance_paid_by_employer) } 
      - "users1_expenses_insur_health_monthly_amount": |
          ${ "{:.2f}".format(float(insurance_expenses.total(source=['insur_health'], times_per_year=12)) + health_insurance_paid + health_insurance_paid_by_employer) } 
      - "users1_expenses_insur_dentvis_self_paid": |
          ${ "{:.2f}".format(insurance_expenses.total(source=['insur_dentvis'],times_per_year=12) -insurance_expenses.total_other_attribute(source=['insur_dentvis'],attribute='paid_by_other_monthly')) } 
      - "users1_expenses_insur_dentvis_other_paid": |
          ${ "{:.2f}".format(insurance_expenses.total_other_attribute(source=['insur_dentvis'],attribute='paid_by_other_monthly')) } 
      - "users1_expenses_insur_dentvis_monthly_amount": |
          ${ "{:.2f}".format(insurance_expenses.total(source=['insur_dentvis'], times_per_year=12)) } 
      - "users1_expenses_insur_total_self_paid": |
          ${ "{:.2f}".format(float(insurance_expenses.total(times_per_year=12) -insurance_expenses.total_other_attribute(attribute='paid_by_other_monthly'))+health_insurance_paid) } 
      - "users1_expenses_insur_total_other_paid": |
          ${ "{:.2f}".format(float(insurance_expenses.total_other_attribute(attribute='paid_by_other_monthly'))+health_insurance_paid_by_employer) } 
      - "users1_expenses_insur_total_monthly_amount": |
          ${ "{:.2f}".format(float(insurance_expenses.total(times_per_year = 12)) + health_insurance_paid + health_insurance_paid_by_employer) } 
      - "users1_expenses_medical_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='medical', times_per_year=12) -personal_expenses.total_other_attribute(source='medical', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_medical_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='medical', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_medical_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['medical'], times_per_year=12)) } 
      - "users1_expenses_clothes_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='clothes', times_per_year=12) -personal_expenses.total_other_attribute(source='clothes', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_clothes_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='clothes', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_clothes_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['clothes'], times_per_year=12)) } 
      - "users1_expenses_toiletries_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='toiletries', times_per_year=12) -personal_expenses.total_other_attribute(source='toiletries', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_toiletries_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='toiletries', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_toiletries_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['toiletries'], times_per_year=12)) } 
      - "users1_expenses_dining_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='dining', times_per_year=12) -personal_expenses.total_other_attribute(source='dining', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_dining_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='dining', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_dining_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['dining'], times_per_year=12)) } 
      - "users1_expenses_hair_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='hair', times_per_year=12) -personal_expenses.total_other_attribute(source='hair', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_hair_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='hair', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_hair_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['hair'], times_per_year=12)) } 
      - "users1_expenses_reading_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='reading', times_per_year=12) -personal_expenses.total_other_attribute(source='reading', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_reading_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='reading', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_reading_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['reading'], times_per_year=12)) } 
      - "users1_expenses_tobalch_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='tobalch', times_per_year=12) -personal_expenses.total_other_attribute(source='tobalch', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_tobalch_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='tobalch', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_tobalch_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['tobalch'], times_per_year=12)) } 
      - "users1_expenses_pets_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='pets', times_per_year=12) -personal_expenses.total_other_attribute(source='pets', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_pets_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='pets', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_pets_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['pets'], times_per_year=12)) } 
      - "users1_expenses_entertain_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='entertain', times_per_year=12) -personal_expenses.total_other_attribute(source='entertain', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_entertain_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='entertain', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_entertain_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['entertain'], times_per_year=12)) } 
      - "users1_expenses_gifts_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='gifts', times_per_year=12) -personal_expenses.total_other_attribute(source='gifts', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_gifts_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='gifts', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_gifts_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['gifts'], times_per_year=12)) } 
      - "users1_expenses_charity_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='charity', times_per_year=12) -personal_expenses.total_other_attribute(source='charity', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_charity_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='charity', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_charity_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['charity'], times_per_year=12)) } 
      - "users1_expenses_vacation_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='vacation', times_per_year=12) -personal_expenses.total_other_attribute(source='vacation', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_vacation_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='vacation', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_vacation_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['vacation'], times_per_year=12)) } 
      - "users1_expenses_dues_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='dues', times_per_year=12) -personal_expenses.total_other_attribute(source='dues', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_dues_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='dues', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_dues_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['dues'], times_per_year=12)) } 
      - "users1_expenses_save_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='save', times_per_year=12) -personal_expenses.total_other_attribute(source='save', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_save_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='save', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_save_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['save'], times_per_year=12)) } 
      - "users1_expenses_contributions_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='contributions', times_per_year=12) -personal_expenses.total_other_attribute(source='contributions', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_contributions_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='contributions', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_contributions_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['contributions'], times_per_year=12)) } 
      - "users1_expenses_loandebt_self_paid": |
          ${ "{:.2f}".format(monthly_debt_payment) } 
      - "users1_expenses_loandebt_other_paid": |
          ${ "{:.2f}".format(monthly_debt_other_payment) } 
      - "users1_expenses_loandebt_monthly_amount": |
          ${ "{:.2f}".format(total_monthly_debt_payment) } 
      - "users1_expenses_other_kids_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='other_kids', times_per_year=12) -personal_expenses.total_other_attribute(source='other_kids', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_other_kids_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='other_kids', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_other_kids_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['other_kids'], times_per_year=12)) } 
      - "users1_expenses_child_support_self_paid": |
          ${ "{:.2f}".format(child_support_other_self_paid) } 
      - "users1_expenses_child_support_other_paid": |
          ${ "{:.2f}".format(child_support_other_other_paid) } 
      - "users1_expenses_child_support_monthly_amount": |
          ${ "{:.2f}".format(child_support_other_total) } 
      - "users1_expenses_alimony_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='alimony', times_per_year=12) -personal_expenses.total_other_attribute(source='alimony', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_alimony_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='alimony', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_alimony_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['alimony'], times_per_year=12)) } 
      - "users1_expenses_other_self_paid": |
          ${ "{:.2f}".format(personal_expenses.total(source='other', times_per_year=12) -personal_expenses.total_other_attribute(source='other', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_other_other_paid": |
          ${ "{:.2f}".format(personal_expenses.total_other_attribute(source='other', attribute='paid_by_other_monthly')) } 
      - "users1_expenses_other_monthly_amount": |
          ${ "{:.2f}".format(personal_expenses.total(source=['other'], times_per_year=12)) } 
      - "users1_expenses_monthly_total_self_paid": |
          ${ "{:.2f}".format(float(personal_expenses.total(times_per_year=12) -personal_expenses.total_other_attribute(attribute='paid_by_other_monthly'))+ monthly_debt_payment + child_support_other_self_paid ) } 
      - "users1_expenses_monthly_total_other_paid": |
          ${ "{:.2f}".format(float(personal_expenses.total_other_attribute(attribute='paid_by_other_monthly'))+float(monthly_debt_other_payment) + child_support_other_other_paid ) } 
      - "users1_expenses_monthly_total": |
          ${ "{:.2f}".format(float(personal_expenses.total(times_per_year = 12))+float(total_monthly_debt_payment)  + child_support_other_total ) } 
      - "users1_credit_card_debt_total_payment_self_paid": |
          ${ "{:.2f}".format(float(credit_card_debt.total_monthly_self_payment)) } 
      - "users1_credit_card_debt_total_payment_other_paid": |
          ${ "{:.2f}".format(float(credit_card_debt.total_monthly_other_payment)) } 
      - "users1_credit_card_debt_total_payment_1": |
          ${ "{:.2f}".format(credit_card_debt.total_other_attribute(attribute='monthly_payment',times_per_year = 12)) } 
      - "users1_expenses_grand_total_self_paid": |
          ${ "{:.2f}".format((float(household_expenses.total(times_per_year=12)) - float(household_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) + (float(vehicle_expenses.total(times_per_year=12)) - float(vehicle_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) + (float(insurance_expenses.total(times_per_year=12)) - float(insurance_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) + (float(personal_expenses.total(times_per_year=12)) - float(personal_expenses.total_other_attribute(attribute='paid_by_other_monthly'))) + float(credit_card_debt.total_monthly_self_payment) + primary_residence_loans.total_monthly_self_payment + vehicle_loans.total_monthly_self_payment + health_insurance_paid + monthly_debt_payment+ child_support_other_self_paid) }
      - "users1_expenses_grand_total_other_paid": |
          ${ "{:.2f}".format(float(household_expenses.total_other_attribute(attribute='paid_by_other_monthly')) + float(vehicle_expenses.total_other_attribute(attribute='paid_by_other_monthly')) + float(insurance_expenses.total_other_attribute(attribute='paid_by_other_monthly')) + float(personal_expenses.total_other_attribute(attribute='paid_by_other_monthly')) + float(credit_card_debt.total_monthly_other_payment) + (float(primary_residence_loans.total_monthly_other_payment) + float(vehicle_loans.total_monthly_other_payment) + health_insurance_paid_by_employer + float(monthly_debt_other_payment) + child_support_other_other_paid)) }
      - "users1_expenses_grand_total_monthly_amount": |
          ${ "{:.2f}".format(float(household_expenses.total(times_per_year = 12)) + float(vehicle_expenses.total(times_per_year = 12)) + float(insurance_expenses.total(times_per_year = 12)) + float(personal_expenses.total(times_per_year = 12)) + float(credit_card_debt.total_other_attribute(attribute='monthly_payment',times_per_year=12)) + float(primary_residence_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) + float(vehicle_loans.total_other_attribute(attribute="monthly_payment",times_per_year=12)) + health_insurance_paid + health_insurance_paid_by_employer + float(total_monthly_debt_payment) + child_support_other_total) }
      - "users1_deductions_federal_monthly_amount": |
          % if is_self_employed and has_jobs:
          ${ "{:.2f}".format(float(self_employed_estimated_taxes_paid_feds / 12) + float(jobs.deductions_federal_monthly_amount)) }
          % elif is_self_employed:
           ${ "{:.2f}".format(self_employed_estimated_taxes_paid_feds / 12) }
          % endif
      - "users1_deductions_fica_monthly_amount": ${ "{:.2f}".format(jobs.deductions_fica_monthly_amount) } 
      - "users1_deductions_medicare_monthly_amount": ${ "{:.2f}".format(jobs.deductions_medicare_monthly_amount) } 
      - "users1_deductions_state_monthly_amount": |
          % if is_self_employed and has_jobs:
          ${ "{:.2f}".format(float(self_employed_estimated_taxes_paid_state / 12) + float(jobs.deductions_state_monthly_amount)) }
          % elif is_self_employed:
           ${ "{:.2f}".format(self_employed_estimated_taxes_paid_state / 12) }
          % endif
      - "users1_deductions_other_monthly_amount": ${ "{:.2f}".format(jobs.deductions_other_monthly_amount) } 
      - "users1_kids_expenses_clothes_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_clothes'], times_per_year=12)) } 
      - "users1_kids_expenses_diapers_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_diapers'], times_per_year=12)) } 
      - "users1_expenses_child_care_net_monthly_amount_1": |
          ${ "{:.2f}".format(out_of_pocket_costs) } 
      - "users1_kids_expenses_lunch_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_lunch'], times_per_year=12)) } 
      - "users1_kids_expenses_supplies_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_supplies'], times_per_year=12)) } 
      - "users1_kids_expenses_activities_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_activities'], times_per_year=12)) } 
      - "users1_kids_expenses_camp_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_camp'], times_per_year=12)) } 
      - "users1_kids_expenses_tuition_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_tuition'], times_per_year=12)) } 
      - "users1_kids_expenses_medical_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.total(source=['kids_medical'], times_per_year=12)) } 
      - "users1_kids_expenses_childsupport_monthly_amount": |
          ${ "{:.2f}".format(child_support_shared) } 
      - "users1_kids_expenses_other1_description": |
          ${ children_expenses.matches(source=['kids_other'])[0].source_other } 
      - "users1_kids_expenses_other1_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.matches(source=['kids_other'])[0].total(times_per_year=12)) } 
      - "users1_kids_expenses_other2_description": |
          ${ children_expenses.matches(source=['kids_other'])[1].source_other } 
      - "users1_kids_expenses_other2_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.matches(source=['kids_other'])[1].total(times_per_year=12)) } 
      - "users1_kids_expenses_other3_description": |
          ${ children_expenses.matches(source=['kids_other'])[2].source_other } 
      - "users1_kids_expenses_other3_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.matches(source=['kids_other'])[2].total(times_per_year=12)) } 
      - "users1_kids_expenses_other4_description": |
          ${ children_expenses.matches(source=['kids_other'])[3].source_other } 
      - "users1_kids_expenses_other4_monthly_amount": |
          ${ "{:.2f}".format(children_expenses.matches(source=['kids_other'])[3].total(times_per_year=12)) } 
      - "users1_kids_expenses_total_monthly_amount": |
          ${ "{:.2f}".format(float(children_expenses.total(times_per_year = 12))+out_of_pocket_costs+child_support_shared) } 
      - "rental_income_amount": ${ "{:.2f}".format(annual_rental_income) } 
      - "rental_cleaning_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['cleaning'], times_per_year=1)) } 
      - "rental_commiss_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['commissions'], times_per_year=1)) } 
      - "rental_insur_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['insurance'], times_per_year=1)) } 
      - "rental_legal_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['legal'], times_per_year=1)) } 
      - "rental_mortgint_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['mortgage'], times_per_year=1)) } 
      - "rental_interest_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['other_interest'], times_per_year=1)) } 
      - "rental_repairs_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['repairs'], times_per_year=1)) } 
      - "rental_supplies_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['supplies'], times_per_year=1)) } 
      - "rental_taxes_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['taxes'], times_per_year=1)) } 
      - "rental_utilities_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['utilities'], times_per_year=1)) } 
      - "rental_wages_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['wages'], times_per_year=1)) } 
      - "rental_other_exp1_description": |
          ${ rental_expenses.matches(source=['other'])[0].source_other } 
      - "rental_other_exp1_amount": |
          ${ "{:.2f}".format(rental_expenses.matches(source=['other'])[0].total(times_per_year=1)) } 
      - "rental_other_exp2_description": |
          ${ rental_expenses.matches(source=['other'])[1].source_other } 
      - "rental_other_exp2_amount": |
          ${ "{:.2f}".format(rental_expenses.matches(source=['other'])[1].total(times_per_year=1)) } 
      - "rental_other_exp3_description": |
          ${ rental_expenses.matches(source=['other'])[2].source_other } 
      - "rental_other_exp3_amount": |
          ${ "{:.2f}".format(rental_expenses.matches(source=['other'])[2].total(times_per_year=1)) } 
      - "rental_other_exp4_description": |
          ${ rental_expenses.matches(source=['other'])[3].source_other } 
      - "rental_other_exp4_amount": |
          ${ "{:.2f}".format(rental_expenses.matches(source=['other'])[3].total(times_per_year=1)) } 
      - "rental_depreciation_amount": |
          ${ "{:.2f}".format(rental_expenses.total(source=['depreciation'], times_per_year=1)) } 
      - "rental_total_expenses_amount": |
          ${ "{:.2f}".format(rental_expenses.total(times_per_year = 1)) } 
      - "rental_net_income_amount": |
          ${ "{:.2f}".format(float(annual_rental_income) - float(rental_expenses.total(times_per_year=1)),symbol="") }
      - "users1_income_rental_monthly_amount_1": 
          ${ "{:.2f}".format((float(annual_rental_income) - float(rental_expenses.total(times_per_year=1)))/12,symbol="") }
      - "self_empl_gross_sales_monthly_amount": |
          ${ "{:.2f}".format(self_empl_gross_sales_monthly_amount) } 
      - "self_empl_cgs_amount": |
          ${ "{:.2f}".format(self_empl_cgs.total(times_per_year = 12)) } 
      - "self_empl_advertising_amount": |
          ${ "{:.2f}".format(self_empl_common_exp[0].total(times_per_year = 12)) } 
      - "self_empl_bad_debt_amount": |
          ${ "{:.2f}".format(self_empl_debts[2].total(times_per_year = 12)) } 
      - "self_empl_auto_gas_amount": |
          ${ "{:.2f}".format(self_empl_auto[3].total(times_per_year = 12)) } 
      - "self_empl_auto_insur_amount": |
          ${ "{:.2f}".format(self_empl_auto[0].total(times_per_year = 12)) } 
      - "self_employed_auto_maint_amount": |
          ${ "{:.2f}".format(self_empl_auto[1].total(times_per_year = 12)) } 
      - "self_empl_auto_reg_amount": |
          ${ "{:.2f}".format(self_empl_auto[2].total(times_per_year = 12)) } 
      - "self_empl_auto_subtotal_amount": |
          ${ "{:.2f}".format(self_empl_auto.total(times_per_year = 12)) } 
      - "self_empl_commiss_amount": |
          ${ "{:.2f}".format(self_empl_employees[1].total(times_per_year = 12)) } 
      - "self_empl_depletion_amount": |
          ${ "{:.2f}".format(self_empl_office[4].total(times_per_year = 12)) } 
      - "self_empl_depreciation_amount": |
          ${ "{:.2f}".format(self_empl_office[3].total(times_per_year = 12)) } 
      - "self_empl_dues_pubs_amount": |
          ${ "{:.2f}".format(self_empl_common_exp[1].total(times_per_year = 12)) } 
      - "self_empl_employ_ben_prog_amount": |
          ${ "{:.2f}".format(self_empl_employees[2].total(times_per_year = 12)) } 
      - "self_empl_insur_not_health1_amount": |
          ${ "{:.2f}".format(self_empl_other_insurances[0].total(times_per_year = 12)) } 
      - "self_empl_insur_not_health1_descr": |
          ${ self_empl_other_insurances[0].source } 
      - "self_empl_insur_not_health2_amount": |
          ${ "{:.2f}".format(self_empl_other_insurances[1].total(times_per_year = 12)) } 
      - "self_empl_insur_not_health2_descr": |
          ${ self_empl_other_insurances[1].source } 
      - "self_empl_interest_paid_mort_amount": |
          ${ "{:.2f}".format(self_empl_office[1].total(times_per_year = 12)) } 
      - "self_empl_other_interest_paid_amount": |
          ${ "{:.2f}".format(self_empl_debts[1].total(times_per_year = 12)) } 
      - "self_empl_legal_prof_amount": |
          ${ "{:.2f}".format(self_empl_common_exp[2].total(times_per_year = 12)) } 
      - "self_empl_office_exp_amount": |
          ${ "{:.2f}".format(self_empl_office[8].total(times_per_year = 12)) } 
      - "self_emp_cleaning_amount": |
          ${ "{:.2f}".format(self_empl_common_exp[3].total(times_per_year = 12)) } 
      - "self_empl_pension_amount": |
          ${ "{:.2f}".format(self_empl_employees[3].total(times_per_year = 12)) } 
      - "self_empl_rent_amount": |
          ${ "{:.2f}".format(self_empl_office[0].total(times_per_year = 12)) } 
      - "self_empl_equip_amount": |
          ${ "{:.2f}".format(self_empl_office[2].total(times_per_year = 12)) } 
      - "self_empl_other_property_amount": |
          ${ "{:.2f}".format(self_empl_office[5].total(times_per_year = 12)) } 
      - "self_empl_repairs_amount": |
          ${ "{:.2f}".format(self_empl_office[6].total(times_per_year = 12)) } 
      - "self_empl_supplies_amount": |
          ${ "{:.2f}".format(self_empl_office[9].total(times_per_year = 12)) } 
      - "self_empl_taxes_amount": |
          ${ "{:.2f}".format(self_empl_debts[0].total(times_per_year = 12)) } 
      - "self_empl_travel_amount": |
          ${ "{:.2f}".format(self_empl_travel[0].total(times_per_year = 12)) } 
      - "self_empl_meals_amount": |
          ${ "{:.2f}".format(self_empl_travel[1].total(times_per_year = 12)) } 
      - "self_empl_utilities_amount": |
          ${ "{:.2f}".format(self_empl_office[7].total(times_per_year = 12)) } 
      - "self_empl_wages_paid_amount": |
          ${ "{:.2f}".format(self_empl_employees[0].total(times_per_year = 12)) } 
      - "self_empl_other_exp1_descr": |
          ${ self_empl_other_expenses[0].source } 
      - "self_empl_other_exp1_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[0].total(times_per_year = 12)) } 
      - "self_empl_other_exp2_descr": |
          ${ self_empl_other_expenses[1].source } 
      - "self_empl_other_exp2_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[1].total(times_per_year = 12)) } 
      - "self_empl_other_exp3_descr": |
          ${ self_empl_other_expenses[2].source } 
      - "self_empl_other_exp3_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[2].total(times_per_year = 12)) } 
      - "self_empl_other_exp4_descr": |
          ${ self_empl_other_expenses[3].source } 
      - "self_empl_other_exp4_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[3].total(times_per_year = 12)) } 
      - "self_empl_other_exp5_descr": |
          ${ self_empl_other_expenses[4].source } 
      - "self_empl_other_exp5_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[4].total(times_per_year = 12)) } 
      - "self_empl_other_exp6_descr": |
          ${ self_empl_other_expenses[5].source } 
      - "self_empl_other_exp6_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[5].total(times_per_year = 12)) } 
      - "self_empl_other_exp7_descr": |
          ${ self_empl_other_expenses[6].source } 
      - "self_empl_other_exp7_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses[6].total(times_per_year = 12)) } 
      - "self_empl_other_exp1_subtotal_amount": |
          ${ "{:.2f}".format(self_empl_other_expenses.total(times_per_year = 12)) }
      - "self_employed_expenses_monthly_amount": |
          % if is_self_employed:
          ${ "{:.2f}".format(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ])) }
          % else:
          ${ }
          % endif
      - "users1_income_self_employment_monthly_amount_1": |
          % if not has_schedule_c:
          ${ "{:.2f}".format(self_empl_gross_sales_monthly_amount - float(sum([ expense.total(times_per_year=12) for expense in al_expense_lists ]))) }
          % endif
---
